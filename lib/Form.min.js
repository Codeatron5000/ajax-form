!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.formla=e():t.formla=e()}(window,function(){return r={},o.m=n=[function(t,e,n){"use strict";n.r(e);var f=function(t){var e=t.uri,n=t.name,r=t.type;this.uri=e,this.name=n,this.type=r};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=Object.prototype.hasOwnProperty;function i(t,e){return o.call(t,e)}function a(t){return!!t&&t instanceof Blob}function s(e){if(l(e))return e.map(s);if(null==e)return null;if(a(e)||["number","string","boolean"].includes(r(e)))return e;if(u(e)){var n={};return Object.keys(e).forEach(function(t){return n[t]=s(e[t])}),n}}function u(t){return null!==t&&"object"===r(t)}function l(t){return t instanceof Array}function c(t){return null==t}function h(t){return"string"==typeof t}function p(t){var n={};return t.forEach(function(t,e){n[e]=t}),n}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,"errors",void 0),v(this,"elements",void 0),this.errors={},this.elements=[]}return function(t,e,n){e&&y(t.prototype,e),n&&y(t,n)}(t,[{key:"has",value:function(e){return e instanceof RegExp?Object.keys(this.errors).some(function(t){return e.test(t)}):this.errors.hasOwnProperty(e)}},{key:"any",value:function(){return 0<Object.keys(this.errors).length}},{key:"getFirst",value:function(t){var e=this.get(t);if(e)return l(e)?e.length?e[0]:null:e||null}},{key:"get",value:function(t){return this.errors[t]}},{key:"add",value:function(t,e,n){var r=2<arguments.length&&void 0!==n&&n;this.has(t)&&!r||(this.errors[t]=e)}},{key:"record",value:function(t,e){var n=this,r=1<arguments.length&&void 0!==e?e:3e3;this.errors=t,r&&window.setTimeout(function(){n.clear()},r)}},{key:"clear",value:function(t){t?delete this.errors[t]:this.errors={}}},{key:"addElement",value:function(t,e){var n=this;l(t)?t.forEach(function(t){return n.addElement(t,e)}):this.elements.push({key:t,el:e})}},{key:"removeElement",value:function(e){this.elements=this.elements.filter(function(t){return t.el!==e})}},{key:"removeElementKey",value:function(e){var n=this;l(e)?e.forEach(function(t){return n.removeElementKey(t)}):this.elements=this.elements.filter(function(t){return t.key!==e})}},{key:"hasElements",value:function(){return!!this.elements.length}},{key:"scrollToFirst",value:function(t){var o=this,e=0<arguments.length&&void 0!==t?t:null;e=c(e)?{behavior:"smooth",inline:"center"}:e;var n=this.elements.find(function(t){var e,n=t.key;t.el;if(n instanceof RegExp)e=n;else{var r=function(t){return t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}(n);e=new RegExp(r.replace("*",".*"))}if(Object.keys(o.errors).some(function(t){return e.test(t)}))return!0});n&&n.el.scrollIntoView(e)}}]),t}();function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach(function(t){O(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E(t,e,n){!h(e)&&"number"!=typeof e||(e=(""+e).split("."));var r=e.shift();u(t)&&!a(t)&&(e.length?(i(t,r)||(l(t)?t[+r]="0"===r?[]:{}:t[r]="0"===r?[]:{}),l(t)?E(t[+r],e,n):E(t[r],e,n)):l(t)?t[+r]=n:t[r]=n)}function _(t,e){h(e)&&(e=e.split("."));var n=e.shift();if(u(t)&&!a(t)&&i(t,n)){var r;if(r=l(t)?t[+n]:u(t)&&!a(t)?t[n]:void 0,!e.length)return r;_(r,e)}}function j(r,t){var o=1<arguments.length&&void 0!==t?t:"",i={};return l(r)?r.forEach(function(t){var e="".concat(o,"[]");!u(t)||a(t)?i[e]=a(t)?t:w(t):i=k({},i,{},j(t,e))}):Object.keys(r).forEach(function(t){var e=r[t],n=o?"".concat(o,"[").concat(t,"]"):""+t;!u(e)||a(e)?i[n]=a(e)?e:w(e):i=k({},i,{},j(e,n))}),i}function w(t){return"boolean"==typeof t?""+ +t:"number"==typeof t?t.toString():t||""}var D=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),O(this,"_errors",void 0),O(this,"_data",void 0),O(this,"_originalData",void 0),O(this,"_originalConstantData",void 0),O(this,"_options",void 0),this.setOptions(e),this._originalData={},this._originalConstantData={},this._data={},this.append(t),this._errors=new d}return function(t,e,n){e&&m(t.prototype,e),n&&m(t,n)}(n,[{key:"setOptions",value:function(t){this._options=this._options||n.defaultOptions,t&&(this._options=k({},this._options,{},t))}},{key:"append",value:function(e,t,n){var r=this,o=2<arguments.length&&void 0!==n&&n;return u(e)?Object.keys(e).forEach(function(t){r.append(t,e[t],o)}):(t=this.parseData(t),o?E(this._originalConstantData,e,t):E(this._originalData,e,this.parseData(t)),o?Object.defineProperty(this,e,{get:function(){},set:function(){throw new Error('The "'.concat(e,'" value has been set as constant and cannot be modified'))}}):(E(this._data,e,t),this.defineProperty(e))),this}},{key:"defineProperty",value:function(e){var n=this;Object.defineProperty(this,e,{get:function(){return _(n._data,e)},set:function(t){n.setData(e,t)}})}},{key:"constantData",value:function(t,e){return this.append(t,e,!0)}},{key:"getData",value:function(){return k({},this._data,{},this._originalConstantData)}},{key:"setData",value:function(t,e){E(this._data,t,e),this._options.autoRemoveError&&this._errors.clear(t)}},{key:"reset",value:function(){for(var t in this._data)E(this._data,t,this.parseData(_(this._originalData,t)));return this._errors.clear(),this}},{key:"clear",value:function(t){return i(this,t)&&E(this._data,t,function(t){return t instanceof Array?[]:"object"===r(t)?{}:"string"==typeof t?"":null}(_(this._data,t))),this}},{key:"parseData",value:function(t){return this._options.clone?s(t):t}},{key:"addFileFromEvent",value:function(t,e){var n=t.target;if(!(n instanceof HTMLInputElement))throw new Error("Incompatible event target, must be of type HTMLInputElement");return(e=e||n.name)in this&&""!==n.value&&(t instanceof DragEvent?this.setData(e,t.dataTransfer&&t.dataTransfer.files.length&&t.dataTransfer.files[0]):this.setData(e,n.files&&n.files.length&&n.files[0]),n.value=""),this}},{key:"post",value:function(t,e){return this.submit("post",t,e)}},{key:"put",value:function(t,e){return this.submit("put",t,e)}},{key:"patch",value:function(t,e){return this.submit("patch",t,e)}},{key:"delete",value:function(t,e){return this.submit("delete",t,e)}},{key:"get",value:function(t,e){return this.submit("get",t,e)}},{key:"graphql",value:function(i,t){var a=this,s=(t=t||{}).formatData||this._options.formatData;return t.url=t.graphql||this._options.graphql,t.useJson=!this.hasFile(),t.formatData=function(t){t=s?s(t):t;var e={query:i,variables:t};if(!a.hasFile())return e;var n=function r(t,e){var n;void 0===e&&(e="");var o=new Map;function i(t,e){var n=o.get(e);n?n.push.apply(n,t):o.set(e,t)}if("undefined"!=typeof File&&t instanceof File||"undefined"!=typeof Blob&&t instanceof Blob||t instanceof f)n=null,i([e],t);else{var a=e?e+".":"";if("undefined"!=typeof FileList&&t instanceof FileList)n=Array.prototype.map.call(t,function(t,e){return i([a+e],t),null});else if(Array.isArray(t))n=t.map(function(t,e){var n=r(t,a+e);return n.files.forEach(i),n.clone});else if(t&&t.constructor===Object)for(var s in n={},t){var u=r(t[s],a+s);u.files.forEach(i),n[s]=u.clone}else n=t}return{clone:n,files:o}}(t),r=n.clone,o=n.files;return e.variables=r,k({operations:JSON.stringify(e),map:JSON.stringify(p(Array.from(o.values())))},p(Array.from(o.keys())))},this.post(t)}},{key:"submit",value:function(t,e,n){var r=this;n=function(t,e,n){return t=t?u(t)?t:{method:t}:{},k({},n=n||{},{},e=e?u(e)?e:{url:e}:{},{},t)}(t,e,n);var o,i=k({},this._options,{},n),a=i.formatData(this.getData());if(this.shouldConvertToFormData(i)){o=new FormData;var s=j(a);Object.keys(s).forEach(function(t){o.append(t,s[t])}),a=o}return(0,i.sendWith)(i.method,this.buildBaseUrl(i),a,i).then(function(t){return i.isValidationError(t)?r.onFail(t,i):r.onSuccess(i),t}).catch(function(t){return i.isValidationError(t)&&r.onFail(t,i),function(t){if(t instanceof Error)throw t;return Promise.reject(t)}(t)})}},{key:"shouldConvertToFormData",value:function(t){if(!(t=t||this._options).useJson)return!0;if(this.hasFile()&&t.strictMode)throw new Error("Cannot convert a file to JSON");return this.hasFile()}},{key:"hasFile",value:function(){return function t(e){if(l(e))for(var n=0;n<e.length;n++){if(e[n]instanceof File)return!0;if(u(e[n]))return t(e[n])}else for(var r in e){if(e[r]instanceof File)return!0;if(u(e[r]))return t(e[r])}return!1}(this.getData())}},{key:"onSuccess",value:function(t){(t=t||this._options).clear&&this.reset()}},{key:"onFail",value:function(t,e){if(!(e=e||this._options).quiet){var n=e.formatErrorResponse(t);this._errors.record(n,e.timeout),this._errors.hasElements()&&this._errors.scrollToFirst()}}},{key:"buildBaseUrl",value:function(t){if((t=t||this._options).url.includes("://"))return t.url;var e=t.baseUrl,n=t.url;return e=e.replace(/\/+$/g,""),n=n.replace(/^\/+/g,""),"".concat(e,"/").concat(n)}},{key:"makeUrl",value:function(t){var e=this.buildBaseUrl(t),n=e.includes("?")?"&":"?",r=e+n,o=[],i=j(this.getData());return Object.keys(i).forEach(function(t){var e=i[t];if(a(e))throw new Error("Cannot convert file to a string");o.push(t+(c(e)?"":"=".concat(e)))}),r+o.join("&")}},{key:"addElement",value:function(t,e){this._errors.addElement(t,e)}},{key:"removeElement",value:function(t){this._errors.removeElement(t)}},{key:"removeElementKey",value:function(t){this._errors.removeElementKey(t)}}]),n}();O(D,"defaultOptions",{method:"post",baseUrl:"",url:"",graphql:"graphql",sendWith:function(t,e,n,r){var o=new XMLHttpRequest,i=new Promise(function(t,e){o.onload=function(){200<=o.status&&o.status<300?t(o):e(o)},o.onerror=function(){return e(o)}});return o.open(t,e),n instanceof FormData?(o.setRequestHeader("Content-Type","multipart/form-data"),o.send(n)):(o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(n))),i},useJson:!1,strictMode:!1,isValidationError:function(t){return 422===t.status},formatData:function(t){return t},formatErrorResponse:function(t){var e=t.data||t.response;if("string"==typeof e)try{e=JSON.parse(e)}catch(t){throw new Error("Unable to find errors in the response")}var n=e.errors;if(function(t){return!t||"object"!==b(t)||!Object.keys(t).length||Object.values(t).some(function(t){return l(t)?t.some(function(t){return!h(t)}):!h(t)})}(n))throw new Error("Unable to find errors in the response");return n},timeout:!1,autoRemoveError:!0,clear:!0,quiet:!1,clone:!0}),O(D,"setOptions",function(t){D.defaultOptions=k({},D.defaultOptions,{},t)});e.default=D}],o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0);function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}var n,r});
//# sourceMappingURL=Form.min.map