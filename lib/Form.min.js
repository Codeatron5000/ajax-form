!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.formla=t():e.formla=t()}(window,function(){return r={},o.m=n=[function(e,t,n){"use strict";n.r(t);var f=function(e){var t=e.uri,n=e.name,r=e.type;this.uri=t,this.name=n,this.type=r};function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=Object.prototype.hasOwnProperty;function a(e){return!!e&&e instanceof Blob}function u(e){return null!==e&&"object"===r(e)}function s(e){return e instanceof Array}function l(e){return null==e}function i(e){return"string"==typeof e}function c(e){var n={};return e.forEach(function(e,t){n[t]=e}),n}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"errors",void 0),p(this,"elements",void 0),this.errors={},this.elements=[]}return function(e,t,n){t&&h(e.prototype,t),n&&h(e,n)}(e,[{key:"has",value:function(t){return t instanceof RegExp?Object.keys(this.errors).some(function(e){return t.test(e)}):this.errors.hasOwnProperty(t)}},{key:"any",value:function(){return 0<Object.keys(this.errors).length}},{key:"getFirst",value:function(e){var t=this.get(e);if(t)return s(t)?t.length?t[0]:null:t||null}},{key:"get",value:function(e){return this.errors[e]}},{key:"add",value:function(e,t,n){var r=2<arguments.length&&void 0!==n&&n;this.has(e)&&!r||(this.errors[e]=t)}},{key:"record",value:function(e,t){var n=this,r=1<arguments.length&&void 0!==t?t:3e3;this.errors=e,r&&window.setTimeout(function(){n.clear()},r)}},{key:"clear",value:function(e){e?delete this.errors[e]:this.errors={}}},{key:"addElement",value:function(e,t){var n=this;s(e)?e.forEach(function(e){return n.addElement(e,t)}):this.elements.push({key:e,el:t})}},{key:"removeElement",value:function(t){this.elements=this.elements.filter(function(e){return e.el!==t})}},{key:"removeElementKey",value:function(t){var n=this;s(t)?t.forEach(function(e){return n.removeElementKey(e)}):this.elements=this.elements.filter(function(e){return e.key!==t})}},{key:"hasElements",value:function(){return!!this.elements.length}},{key:"scrollToFirst",value:function(e){var o=this,t=0<arguments.length&&void 0!==e?e:null;t=l(t)?{behavior:"smooth",inline:"center"}:t;var n=this.elements.find(function(e){var t,n=e.key;e.el;if(n instanceof RegExp)t=n;else{var r=function(e){return e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}(n);t=new RegExp(r.replace("*",".*"))}if(Object.keys(o.errors).some(function(e){return t.test(e)}))return!0});n&&n.el.scrollIntoView(t)}}]),e}();function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(n,!0).forEach(function(e){g(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(r,e){var o=1<arguments.length&&void 0!==e?e:"",i={};return s(r)?r.forEach(function(e){var t="".concat(o,"[]");!u(e)||a(e)?i[t]=a(e)?e:k(e):i=b({},i,{},O(e,t))}):Object.keys(r).forEach(function(e){var t=r[e],n=o?"".concat(o,"[").concat(e,"]"):""+e;!u(t)||a(t)?i[n]=a(t)?t:k(t):i=b({},i,{},O(t,n))}),i}function k(e){return"boolean"==typeof e?""+ +e:"number"==typeof e?e.toString():e||""}var E=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),g(this,"errors",void 0),g(this,"data",void 0),g(this,"originalData",void 0),g(this,"originalConstantData",void 0),g(this,"options",void 0),this.setOptions(t),this.originalData={},this.originalConstantData={},this.data={},this.append(e),this.errors=new y}return function(e,t,n){t&&v(e.prototype,t),n&&v(e,n)}(n,[{key:"setOptions",value:function(e){this.options=this.options||n.defaultOptions,e&&(this.options=b({},this.options,{},e))}},{key:"append",value:function(t,e,n){var r=this,o=2<arguments.length&&void 0!==n&&n;return"object"===d(t)?Object.keys(t).forEach(function(e){r.append(e,t[e],o)}):(e=this.parseData(e),o?this.originalConstantData[t]=e:this.originalData[t]=e,o?Object.defineProperty(this,t,{get:function(){},set:function(){throw new Error('The "'.concat(t,'" value has been set as constant and cannot be modified'))}}):(this.data[t]=e,this.defineProperty(t))),this}},{key:"defineProperty",value:function(t){var n=this;Object.defineProperty(this,t,{get:function(){return n.data[t]},set:function(e){n.setData(t,e)}})}},{key:"constantData",value:function(e,t){return this.append(e,t,!0)}},{key:"getData",value:function(){return b({},this.data,{},this.originalConstantData)}},{key:"setData",value:function(e,t){this.data[e]=t,this.options.autoRemoveError&&this.errors.clear(e)}},{key:"reset",value:function(){for(var e in this.data)this.data[e]=this.originalData[e];return this.errors.clear(),this}},{key:"clear",value:function(e){return function(e,t){return o.call(e,t)}(this,e)&&(this.data[e]=function(e){return e instanceof Array?[]:"object"===r(e)?{}:"string"==typeof e?"":null}(this.data[e])),this}},{key:"parseData",value:function(e){return this.options.clone&&!a(e)?function(e){return JSON.parse(JSON.stringify(e))}(e):e}},{key:"addFileFromEvent",value:function(e,t){var n=e.target;if(!(n instanceof HTMLInputElement))throw new Error("Incompatible event target, must be of type HTMLInputElement");return(t=t||n.name)in this&&""!==n.value&&(e instanceof DragEvent?this.setData(t,e.dataTransfer&&e.dataTransfer.files.length&&e.dataTransfer.files[0]):this.setData(t,n.files&&n.files.length&&n.files[0]),n.value=""),this}},{key:"post",value:function(e,t){return this.submit("post",e,t)}},{key:"put",value:function(e,t){return this.submit("put",e,t)}},{key:"patch",value:function(e,t){return this.submit("patch",e,t)}},{key:"delete",value:function(e,t){return this.submit("delete",e,t)}},{key:"get",value:function(e,t){return this.submit("get",e,t)}},{key:"graphql",value:function(i,e){var a=this,s=(e=e||{}).formatData;return e.url=e.graphql||this.options.graphql,e.useJson=!this.hasFile(),e.formatData=function(e){e=s?s(e):e;var t={query:i,variables:e};if(!a.hasFile())return t;var n=function r(e,t){var n;void 0===t&&(t="");var o=new Map;function i(e,t){var n=o.get(t);n?n.push.apply(n,e):o.set(t,e)}if("undefined"!=typeof File&&e instanceof File||"undefined"!=typeof Blob&&e instanceof Blob||e instanceof f)n=null,i([t],e);else{var a=t?t+".":"";if("undefined"!=typeof FileList&&e instanceof FileList)n=Array.prototype.map.call(e,function(e,t){return i([a+t],e),null});else if(Array.isArray(e))n=e.map(function(e,t){var n=r(e,a+t);return n.files.forEach(i),n.clone});else if(e&&e.constructor===Object)for(var s in n={},e){var u=r(e[s],a+s);u.files.forEach(i),n[s]=u.clone}else n=e}return{clone:n,files:o}}(e),r=n.clone,o=n.files;return t.variables=r,b({operations:JSON.stringify(t),map:JSON.stringify(c(Array.from(o.values())))},c(Array.from(o.keys())))},this.post(e)}},{key:"submit",value:function(e,t,n){var r=this;n=function(e,t,n){return e=e?u(e)?e:{method:e}:{},b({},n=n||{},{},t=t?u(t)?t:{url:t}:{},{},e)}(e,t,n);var o,i=b({},this.options,{},n),a=i.formatData(this.getData());if(this.shouldConvertToFormData(i)){o=new FormData;var s=O(a);Object.keys(s).forEach(function(e){o.append(e,s[e])}),a=o}return(0,i.sendWith)(i.method,this.buildBaseUrl(i),a,i).then(function(e){return i.isValidationError(e)?r.onFail(e,i):r.onSuccess(i),e}).catch(function(e){return i.isValidationError(e)&&r.onFail(e,i),function(e){if(e instanceof Error)throw e;return Promise.reject(e)}(e)})}},{key:"shouldConvertToFormData",value:function(e){if(!(e=e||this.options).useJson)return!0;if(this.hasFile()&&e.strictMode)throw new Error("Cannot convert a file to JSON");return this.hasFile()}},{key:"hasFile",value:function(){return function e(t){if(s(t))for(var n=0;n<t.length;n++){if(t[n]instanceof File)return!0;if(u(t[n]))return e(t[n])}else for(var r in t){if(t[r]instanceof File)return!0;if(u(t[r]))return e(t[r])}return!1}(this.getData())}},{key:"onSuccess",value:function(e){(e=e||this.options).clear&&this.reset()}},{key:"onFail",value:function(e,t){if(!(t=t||this.options).quiet){var n=t.formatErrorResponse(e);this.errors.record(n,t.timeout),this.errors.hasElements()&&this.errors.scrollToFirst()}}},{key:"buildBaseUrl",value:function(e){if((e=e||this.options).url.includes("://"))return e.url;var t=e.baseUrl,n=e.url;return t=t.replace(/\/+$/g,""),n=n.replace(/^\/+/g,""),"".concat(t,"/").concat(n)}},{key:"makeUrl",value:function(e){var t=this.buildBaseUrl(e),n=t.includes("?")?"&":"?",r=t+n,o=[],i=O(this.getData());return Object.keys(i).forEach(function(e){var t=i[e];if(a(t))throw new Error("Cannot convert file to a string");o.push(e+(l(t)?"":"=".concat(t)))}),r+o.join("&")}},{key:"addElement",value:function(e,t){this.errors.addElement(e,t)}},{key:"removeElement",value:function(e){this.errors.removeElement(e)}},{key:"removeElementKey",value:function(e){this.errors.removeElementKey(e)}}]),n}();g(E,"defaultOptions",{method:"post",baseUrl:"",url:"",graphql:"graphql",sendWith:function(e,t,n,r){var o=new XMLHttpRequest,i=new Promise(function(e,t){o.onload=function(){200<=o.status&&o.status<300?e(o):t(o)},o.onerror=function(){return t(o)}});return o.open(e,t),n instanceof FormData?(o.setRequestHeader("Content-Type","multipart/form-data"),o.send(n)):(o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(n))),i},useJson:!1,strictMode:!1,isValidationError:function(e){return 422===e.status},formatData:function(e){return e},formatErrorResponse:function(e){var t=e.data||e.response;if("string"==typeof t)try{t=JSON.parse(t)}catch(e){throw new Error("Unable to find errors in the response")}var n=t.errors;if(function(e){return!e||"object"!==d(e)||!Object.keys(e).length||Object.values(e).some(function(e){return s(e)?e.some(function(e){return!i(e)}):!i(e)})}(n))throw new Error("Unable to find errors in the response");return n},timeout:!1,autoRemoveError:!0,clear:!0,quiet:!1,clone:!0}),g(E,"setOptions",function(e){E.defaultOptions=b({},E.defaultOptions,{},e)});t.default=E}],o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0);function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n,r});
//# sourceMappingURL=Form.min.map