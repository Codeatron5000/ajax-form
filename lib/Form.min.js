!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.formla=t():e.formla=t()}(window,function(){return r={},o.m=n=[function(e,t,n){"use strict";n.r(t);var f=function(e){var t=e.uri,n=e.name,r=e.type;this.uri=t,this.name=n,this.type=r};function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=Object.prototype.hasOwnProperty;function i(e,t){return o.call(e,t)}function a(e){return!!e&&e instanceof Blob}function s(t){if(l(t))return t.map(s);if(null==t)return null;if(a(t)||["number","string","boolean"].includes(r(t)))return t;if(u(t)){var n={};return Object.keys(t).forEach(function(e){return n[e]=s(t[e])}),n}}function u(e){return null!==e&&"object"===r(e)}function l(e){return e instanceof Array}function c(e){return null==e}function h(e){return"string"==typeof e}function p(e){var n={};return e.forEach(function(e,t){n[t]=e}),n}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"errors",void 0),v(this,"elements",void 0),this.errors={},this.elements=[]}return function(e,t,n){t&&y(e.prototype,t),n&&y(e,n)}(e,[{key:"has",value:function(t){return t instanceof RegExp?Object.keys(this.errors).some(function(e){return t.test(e)}):this.errors.hasOwnProperty(t)}},{key:"any",value:function(){return 0<Object.keys(this.errors).length}},{key:"getFirst",value:function(e){var t=this.get(e);if(t)return l(t)?t.length?t[0]:null:t||null}},{key:"get",value:function(e){return this.errors[e]}},{key:"add",value:function(e,t,n){var r=2<arguments.length&&void 0!==n&&n;this.has(e)&&!r||(this.errors[e]=t)}},{key:"record",value:function(e,t){var n=this,r=1<arguments.length&&void 0!==t?t:3e3;this.errors=e,r&&window.setTimeout(function(){n.clear()},r)}},{key:"clear",value:function(e){e?delete this.errors[e]:this.errors={}}},{key:"addElement",value:function(e,t){var n=this;l(e)?e.forEach(function(e){return n.addElement(e,t)}):this.elements.push({key:e,el:t})}},{key:"removeElement",value:function(t){this.elements=this.elements.filter(function(e){return e.el!==t})}},{key:"removeElementKey",value:function(t){var n=this;l(t)?t.forEach(function(e){return n.removeElementKey(e)}):this.elements=this.elements.filter(function(e){return e.key!==t})}},{key:"hasElements",value:function(){return!!this.elements.length}},{key:"scrollToFirst",value:function(e){var o=this,t=0<arguments.length&&void 0!==e?e:null;t=c(t)?{behavior:"smooth",inline:"center"}:t;var n=this.elements.find(function(e){var t,n=e.key;e.el;if(n instanceof RegExp)t=n;else{var r=function(e){return e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}(n);t=new RegExp(r.replace("*",".*"))}if(Object.keys(o.errors).some(function(e){return t.test(e)}))return!0});n&&n.el.scrollIntoView(t)}}]),e}();function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(n,!0).forEach(function(e){O(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t,n){!h(t)&&"number"!=typeof t||(t=(""+t).split("."));var r=t.shift();u(e)&&!a(e)&&(t.length?(i(e,r)||(l(e)?e[+r]="0"===r?[]:{}:e[r]="0"===r?[]:{}),l(e)?_(e[+r],t,n):_(e[r],t,n)):l(e)?e[+r]=n:e[r]=n)}function E(e,t){h(t)&&(t=t.split("."));var n=t.shift();if(u(e)&&!a(e)&&i(e,n)){var r;if(r=l(e)?e[+n]:u(e)&&!a(e)?e[n]:void 0,!t.length)return r;E(r,t)}}function j(r,e){var o=1<arguments.length&&void 0!==e?e:"",i={};return l(r)?r.forEach(function(e){var t="".concat(o,"[]");!u(e)||a(e)?i[t]=a(e)?e:w(e):i=k({},i,{},j(e,t))}):Object.keys(r).forEach(function(e){var t=r[e],n=o?"".concat(o,"[").concat(e,"]"):""+e;!u(t)||a(t)?i[n]=a(t)?t:w(t):i=k({},i,{},j(t,n))}),i}function w(e){return"boolean"==typeof e?""+ +e:"number"==typeof e?e.toString():e||""}var D=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),O(this,"_errors",void 0),O(this,"_data",void 0),O(this,"_originalData",void 0),O(this,"_originalConstantData",void 0),O(this,"_options",void 0),this.setOptions(t),this._originalData={},this._originalConstantData={},this._data={},this.append(e),this._errors=new d}return function(e,t,n){t&&m(e.prototype,t),n&&m(e,n)}(n,[{key:"setOptions",value:function(e){this._options=this._options||n.defaultOptions,e&&(this._options=k({},this._options,{},e))}},{key:"append",value:function(t,e,n){var r=this,o=2<arguments.length&&void 0!==n&&n;return u(t)?Object.keys(t).forEach(function(e){r.append(e,t[e],o)}):(e=this.parseData(e),o?_(this._originalConstantData,t,e):_(this._originalData,t,this.parseData(e)),o?Object.defineProperty(this,t,{get:function(){},set:function(){throw new Error('The "'.concat(t,'" value has been set as constant and cannot be modified'))}}):(_(this._data,t,e),this.defineProperty(t))),this}},{key:"defineProperty",value:function(t){var n=this;Object.defineProperty(this,t,{get:function(){return E(n._data,t)},set:function(e){n.setData(t,e)}})}},{key:"constantData",value:function(e,t){return this.append(e,t,!0)}},{key:"getData",value:function(){return k({},this._data,{},this._originalConstantData)}},{key:"setData",value:function(e,t){_(this._data,e,t),this._options.autoRemoveError&&this._errors.clear(e)}},{key:"errors",value:function(){return this._errors}},{key:"reset",value:function(){for(var e in this._data)_(this._data,e,this.parseData(E(this._originalData,e)));return this._errors.clear(),this}},{key:"clear",value:function(e){return i(this,e)&&_(this._data,e,function(e){return e instanceof Array?[]:"object"===r(e)?{}:"string"==typeof e?"":null}(E(this._data,e))),this}},{key:"parseData",value:function(e){return this._options.clone?s(e):e}},{key:"addFileFromEvent",value:function(e,t){var n=e.target;if(!(n instanceof HTMLInputElement))throw new Error("Incompatible event target, must be of type HTMLInputElement");return(t=t||n.name)in this&&""!==n.value&&(e instanceof DragEvent?this.setData(t,e.dataTransfer&&e.dataTransfer.files.length&&e.dataTransfer.files[0]):this.setData(t,n.files&&n.files.length&&n.files[0]),n.value=""),this}},{key:"post",value:function(e,t){return this.submit("post",e,t)}},{key:"put",value:function(e,t){return this.submit("put",e,t)}},{key:"patch",value:function(e,t){return this.submit("patch",e,t)}},{key:"delete",value:function(e,t){return this.submit("delete",e,t)}},{key:"get",value:function(e,t){return this.submit("get",e,t)}},{key:"graphql",value:function(i,e){var a=this,s=(e=e||{}).formatData||this._options.formatData;return e.url=e.graphql||this._options.graphql,e.useJson=!this.hasFile(),e.formatData=function(e){e=s?s(e):e;var t={query:i,variables:e};if(!a.hasFile())return t;var n=function r(e,t){var n;void 0===t&&(t="");var o=new Map;function i(e,t){var n=o.get(t);n?n.push.apply(n,e):o.set(t,e)}if("undefined"!=typeof File&&e instanceof File||"undefined"!=typeof Blob&&e instanceof Blob||e instanceof f)n=null,i([t],e);else{var a=t?t+".":"";if("undefined"!=typeof FileList&&e instanceof FileList)n=Array.prototype.map.call(e,function(e,t){return i([a+t],e),null});else if(Array.isArray(e))n=e.map(function(e,t){var n=r(e,a+t);return n.files.forEach(i),n.clone});else if(e&&e.constructor===Object)for(var s in n={},e){var u=r(e[s],a+s);u.files.forEach(i),n[s]=u.clone}else n=e}return{clone:n,files:o}}(e),r=n.clone,o=n.files;return t.variables=r,k({operations:JSON.stringify(t),map:JSON.stringify(p(Array.from(o.values())))},p(Array.from(o.keys())))},this.post(e)}},{key:"submit",value:function(e,t,n){var r=this;n=function(e,t,n){return e=e?u(e)?e:{method:e}:{},k({},n=n||{},{},t=t?u(t)?t:{url:t}:{},{},e)}(e,t,n);var o,i=k({},this._options,{},n),a=i.formatData(this.getData());if(this.shouldConvertToFormData(i)){o=new FormData;var s=j(a);Object.keys(s).forEach(function(e){o.append(e,s[e])}),a=o}return(0,i.sendWith)(i.method,this.buildBaseUrl(i),a,i).then(function(e){return i.isValidationError(e)?r.onFail(e,i):r.onSuccess(i),e}).catch(function(e){return i.isValidationError(e)&&r.onFail(e,i),function(e){if(e instanceof Error)throw e;return Promise.reject(e)}(e)})}},{key:"shouldConvertToFormData",value:function(e){return(e=e||this._options).strictMode?!e.useJson:!e.useJson||this.hasFile()}},{key:"hasFile",value:function(){return function e(t){if(l(t))for(var n=0;n<t.length;n++){if(t[n]instanceof File)return!0;if(u(t[n]))return e(t[n])}else for(var r in t){if(t[r]instanceof File)return!0;if(u(t[r]))return e(t[r])}return!1}(this.getData())}},{key:"onSuccess",value:function(e){(e=e||this._options).clear&&this.reset()}},{key:"onFail",value:function(e,t){if(!(t=t||this._options).quiet){var n=t.formatErrorResponse(e);this._errors.record(n,t.timeout),this._errors.hasElements()&&this._errors.scrollToFirst()}}},{key:"buildBaseUrl",value:function(e){if((e=e||this._options).url.includes("://"))return e.url;var t=e.baseUrl,n=e.url;return t=t.replace(/\/+$/g,""),n=n.replace(/^\/+/g,""),"".concat(t,"/").concat(n)}},{key:"makeUrl",value:function(e){var t=this.buildBaseUrl(e),n=t.includes("?")?"&":"?",r=t+n,o=[],i=j(this.getData());return Object.keys(i).forEach(function(e){var t=i[e];if(a(t))throw new Error("Cannot convert file to a string");o.push(e+(c(t)?"":"=".concat(t)))}),r+o.join("&")}},{key:"addElement",value:function(e,t){this._errors.addElement(e,t)}},{key:"removeElement",value:function(e){this._errors.removeElement(e)}},{key:"removeElementKey",value:function(e){this._errors.removeElementKey(e)}}]),n}();O(D,"defaultOptions",{method:"post",baseUrl:"",url:"",graphql:"graphql",sendWith:function(e,t,n,r){var o=new XMLHttpRequest,i=new Promise(function(e,t){o.onload=function(){200<=o.status&&o.status<300?e(o):t(o)},o.onerror=function(){return t(o)}});return o.open(e,t),n instanceof FormData?(o.setRequestHeader("Content-Type","multipart/form-data"),o.send(n)):(o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(n))),i},useJson:!1,strictMode:!1,isValidationError:function(e){return 422===e.status},formatData:function(e){return e},formatErrorResponse:function(e){var t=e.data||e.response;if("string"==typeof t)try{t=JSON.parse(t)}catch(e){throw new Error("Unable to find errors in the response")}var n=t.errors;if(function(e){return!e||"object"!==b(e)||!Object.keys(e).length||Object.values(e).some(function(e){return l(e)?e.some(function(e){return!h(e)}):!h(e)})}(n))throw new Error("Unable to find errors in the response");return n},timeout:!1,autoRemoveError:!0,clear:!0,quiet:!1,clone:!0}),O(D,"setOptions",function(e){D.defaultOptions=k({},D.defaultOptions,{},e)});t.default=D}],o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0);function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n,r});
//# sourceMappingURL=Form.min.map