{"version":3,"sources":["webpack://formla/webpack/universalModuleDefinition","webpack://formla/webpack/bootstrap","webpack://formla/./node_modules/extract-files/lib/ReactNativeFile.mjs","webpack://formla/./src/object-observer.js","webpack://formla/./src/utils.js","webpack://formla/./src/Errors.js","webpack://formla/./src/Form.js","webpack://formla/./node_modules/extract-files/lib/extractFiles.mjs","webpack://formla/./src/http.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","m","ReactNativeFile","_ref","uri","name","type","this","prepareArray","source","observer","item","l","length","target","Array","sysObsKey","Object","prototype","hasOwnProperty","call","nonObservables","constructor","isArray","ArrayObserver","ownKey","parent","proxy","ObjectObserver","prepareObject","key","keys","callObservers","observers","changes","options","relevantChanges","oPath","oPaths","get","path","filter","change","join","pathsFrom","startsWith","e","console","error","getAncestorInfo","self","tmp","l1","l2","result","Symbol","INSERT","UPDATE","DELETE","Date","Blob","Number","String","Boolean","Error","SyntaxError","TypeError","URIError","Function","Promise","RegExp","File","validOptionsKeys","observableDefinition","revoke","value","observe","invalidOption","find","option","includes","has","info","set","assign","unobserve","size","arguments","delete","clear","ObserverBase","properties","cloningFunction","targetClone","isRevoked","defineProperty","Map","defineProperties","revokable","Proxy","revocable","newValue","oldValue","tmpObserved","ad","push","object","proxiedArrayMethods","pop","observed","poppedIndex","popResult","i","pushContent","initialLength","pushResult","Reflect","apply","slice","shift","shiftResult","unshift","unshiftContent","from","splice","forEach","index","unshiftResult","reverse","sort","comparator","fill","tarLen","normArgs","argLen","start","end","prev","tmpTarget","spliceContent","splLen","startIndex","removed","inserted","Math","max","spliceResult","newTarLen","bind","undefined","Observable","input","freeze","isFile","val","isObj","isArr","isNil","isStr","arrayToObject","array","Errors","errors","elements","field","some","test","force","timeout","setTimeout","el","addElement","element","removeElementKey","behavior","inline","rx","expression","string","replace","escapeRegExp","scrollIntoView","flattenToQueryParams","data","prefix","params","paramKey","formValueToString","toString","Form","setOptions","originalData","originalConstantData","append","autoRemoveError","defaultOptions","constant","setData","obj","hasOwn","original","emptyValue","event","node","HTMLInputElement","DragEvent","dataTransfer","files","url","submit","query","originalFormatDataCallback","formatData","graphql","useJson","hasFile","operations","variables","extractFiles","clone","addFile","paths","file","storedPaths","FileList","map","child","JSON","stringify","values","post","method","parseOptions","formData","requestOptions","getData","shouldConvertToFormData","FormData","httpAdapter","sendWith","buildBaseUrl","then","response","isValidationError","onFail","onSuccess","catch","reject","bubbleError","strictMode","containsFile","reset","quiet","formatErrorResponse","record","hasElements","scrollToFirst","baseUrl","relativeUrl","queryStart","fullUrl","removeElement","xhr","XMLHttpRequest","resolve","onload","status","onerror","open","setRequestHeader","send","parse","message","isValidErrorObject","c","d","getter","o","enumerable","r","toStringTag","t","mode","__esModule","ns","create","n","property","p","s","moduleId","modules"],"mappings":"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","file":"Form.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"formla\"] = factory();\n\telse\n\t\troot[\"formla\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export var ReactNativeFile = function ReactNativeFile(_ref) {\n  var uri = _ref.uri,\n    name = _ref.name,\n    type = _ref.type\n  this.uri = uri\n  this.name = name\n  this.type = type\n}\n","export const sysObsKey = Symbol('system-observer-key');\r\nconst\r\n\tINSERT = 'insert',\r\n\tUPDATE = 'update',\r\n\tDELETE = 'delete',\r\n\tREVERSE = 'reverse',\r\n\tSHUFFLE = 'shuffle',\r\n\tnonObservables = {\r\n\t\tDate: true,\r\n\t\tBlob: true,\r\n\t\tNumber: true,\r\n\t\tString: true,\r\n\t\tBoolean: true,\r\n\t\tError: true,\r\n\t\tSyntaxError: true,\r\n\t\tTypeError: true,\r\n\t\tURIError: true,\r\n\t\tFunction: true,\r\n\t\tPromise: true,\r\n\t\tRegExp: true,\r\n\t\tFile: true,\r\n\t},\r\n\tvalidOptionsKeys = ['path', 'pathsFrom'],\r\n\tobservableDefinition = {\r\n\t\trevoke: {\r\n\t\t\tvalue: function () {\r\n\t\t\t\tthis[sysObsKey].revoke();\r\n\t\t\t}\r\n\t\t},\r\n\t\tobserve: {\r\n\t\t\tvalue: function (observer, options) {\r\n\t\t\t\tconst\r\n\t\t\t\t\tsystemObserver = this[sysObsKey],\r\n\t\t\t\t\tobservers = systemObserver.observers;\r\n\r\n\t\t\t\tif (typeof observer !== 'function') {\r\n\t\t\t\t\tthrow new Error('observer parameter MUST be a function');\r\n\t\t\t\t}\r\n\t\t\t\tif (options) {\r\n\t\t\t\t\tif ('path' in options && (typeof options.path !== 'string' || !options.path)) {\r\n\t\t\t\t\t\tthrow new Error('\"path\" option, if/when provided, MUST be a non-empty string');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ('pathsFrom' in options && options.path) {\r\n\t\t\t\t\t\tthrow new Error('\"pathsFrom\" option MAY NOT be specified together with \"path\" option');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ('pathsFrom' in options && (typeof options.pathsFrom !== 'string' || !options.pathsFrom)) {\r\n\t\t\t\t\t\tthrow new Error('\"pathsFrom\" option, if/when provided, MUST be a non-empty string');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst invalidOption = Object.keys(options).find(option => !validOptionsKeys.includes(option));\r\n\t\t\t\t\tif (invalidOption) {\r\n\t\t\t\t\t\tthrow new Error('\"' + invalidOption + '\" is not a one of the valid options (' + validOptionsKeys.join(', ') + ')');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!observers.has(observer)) {\r\n\t\t\t\t\tobservers.set(observer, Object.assign({}, options));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.info('observer may be bound to an observable only once');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tunobserve: {\r\n\t\t\tvalue: function () {\r\n\t\t\t\tconst\r\n\t\t\t\t\tsystemObserver = this[sysObsKey],\r\n\t\t\t\t\tobservers = systemObserver.observers;\r\n\t\t\t\tlet l;\r\n\t\t\t\tif (observers.size) {\r\n\t\t\t\t\tl = arguments.length;\r\n\t\t\t\t\tif (l) {\r\n\t\t\t\t\t\twhile (l) {\r\n\t\t\t\t\t\t\tobservers.delete(arguments[--l]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tobservers.clear();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tprepareArray = function (source, observer) {\r\n\t\tlet l = source.length, item;\r\n\t\tconst target = new Array(l);\r\n\t\ttarget[sysObsKey] = observer;\r\n\t\twhile (l) {\r\n\t\t\tl--;\r\n\t\t\titem = source[l];\r\n\t\t\tif (item && typeof item === 'object' && !Object.prototype.hasOwnProperty.call(nonObservables, item.constructor.name)) {\r\n\t\t\t\ttarget[l] = Array.isArray(item)\r\n\t\t\t\t\t? new ArrayObserver({ target: item, ownKey: l, parent: observer }).proxy\r\n\t\t\t\t\t: new ObjectObserver({ target: item, ownKey: l, parent: observer }).proxy;\r\n\t\t\t} else {\r\n\t\t\t\ttarget[l] = item;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t},\r\n\tprepareObject = function (source, observer) {\r\n\t\tconst\r\n\t\t\tkeys = Object.keys(source),\r\n\t\t\ttarget = { [sysObsKey]: observer };\r\n\t\tlet l = keys.length, key, item;\r\n\t\twhile (l) {\r\n\t\t\tl--;\r\n\t\t\tkey = keys[l];\r\n\t\t\titem = source[key];\r\n\t\t\tif (item && typeof item === 'object' && !nonObservables.hasOwnProperty(item.constructor.name)) {\r\n\t\t\t\ttarget[key] = Array.isArray(item)\r\n\t\t\t\t\t? new ArrayObserver({ target: item, ownKey: key, parent: observer }).proxy\r\n\t\t\t\t\t: new ObjectObserver({ target: item, ownKey: key, parent: observer }).proxy;\r\n\t\t\t} else {\r\n\t\t\t\ttarget[key] = item;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t},\r\n\tcallObservers = function (observers, changes) {\r\n\t\tlet target, options, relevantChanges, oPath, oPaths;\r\n\t\tfor (target of observers.keys()) {\r\n\t\t\ttry {\r\n\t\t\t\toptions = observers.get(target);\r\n\t\t\t\trelevantChanges = changes;\r\n\r\n\t\t\t\tif (options.path) {\r\n\t\t\t\t\toPath = options.path;\r\n\t\t\t\t\trelevantChanges = changes.filter(change => change.path.join('.') === oPath);\r\n\t\t\t\t} else if (options.pathsFrom) {\r\n\t\t\t\t\toPaths = options.pathsFrom;\r\n\t\t\t\t\trelevantChanges = changes.filter(change => change.path.join('.').startsWith(oPaths));\r\n\t\t\t\t}\r\n\t\t\t\tif (relevantChanges.length) {\r\n\t\t\t\t\ttarget(relevantChanges);\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error('failed to deliver changes to listener ' + target, e);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetAncestorInfo = function (self) {\r\n\t\tconst tmp = [];\r\n\t\tlet l1 = 0, l2 = 0;\r\n\t\twhile (self.parent) {\r\n\t\t\ttmp[l1++] = self.ownKey;\r\n\t\t\tself = self.parent;\r\n\t\t}\r\n\t\tconst result = new Array(l1);\r\n\t\twhile (l1) result[l2++] = tmp[--l1];\r\n\t\treturn { observers: self.observers, path: result };\r\n\t};\r\n\r\nclass ObserverBase {\r\n\tconstructor(properties, cloningFunction) {\r\n\t\tconst\r\n\t\t\tsource = properties.target,\r\n\t\t\ttargetClone = cloningFunction(source, this);\r\n\t\tif (properties.parent === null) {\r\n\t\t\tthis.isRevoked = false;\r\n\t\t\tObject.defineProperty(this, 'observers', { value: new Map() });\r\n\t\t\tObject.defineProperties(targetClone, observableDefinition);\r\n\t\t} else {\r\n\t\t\tthis.parent = properties.parent;\r\n\t\t\tthis.ownKey = properties.ownKey;\r\n\t\t}\r\n\t\tthis.revokable = Proxy.revocable(targetClone, this);\r\n\t\tthis.proxy = this.revokable.proxy;\r\n\t\tthis.target = targetClone;\r\n\t}\r\n\r\n\tset(target, key, value) {\r\n\t\tlet newValue, oldValue = target[key], changes;\r\n\r\n\t\tif (value === oldValue) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif (value && typeof value === 'object' && !nonObservables.hasOwnProperty(value.constructor.name)) {\r\n\t\t\tnewValue = Array.isArray(value)\r\n\t\t\t\t? new ArrayObserver({ target: value, ownKey: key, parent: this }).proxy\r\n\t\t\t\t: new ObjectObserver({ target: value, ownKey: key, parent: this }).proxy;\r\n\t\t} else {\r\n\t\t\tnewValue = value;\r\n\t\t}\r\n\t\ttarget[key] = newValue;\r\n\r\n\t\tif (oldValue && typeof oldValue === 'object') {\r\n\t\t\tconst tmpObserved = oldValue[sysObsKey];\r\n\t\t\tif (tmpObserved) {\r\n\t\t\t\toldValue = tmpObserved.revoke();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//\tpublish changes\r\n\t\tconst ad = getAncestorInfo(this);\r\n\t\tif (ad.observers.size) {\r\n\t\t\tad.path.push(key);\r\n\t\t\tchanges = typeof oldValue === 'undefined'\r\n\t\t\t\t? [{ type: INSERT, path: ad.path, value: newValue, object: this.proxy }]\r\n\t\t\t\t: [{ type: UPDATE, path: ad.path, value: newValue, oldValue: oldValue, object: this.proxy }];\r\n\t\t\tcallObservers(ad.observers, changes);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tdeleteProperty(target, key) {\r\n\t\tlet oldValue = target[key], changes;\r\n\r\n\t\tdelete target[key];\r\n\r\n\t\tif (oldValue && typeof oldValue === 'object') {\r\n\t\t\tconst tmpObserved = oldValue[sysObsKey];\r\n\t\t\tif (tmpObserved) {\r\n\t\t\t\toldValue = tmpObserved.revoke();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//\tpublish changes\r\n\t\tconst ad = getAncestorInfo(this);\r\n\t\tif (ad.observers.size) {\r\n\t\t\tad.path.push(key);\r\n\t\t\tchanges = [{ type: DELETE, path: ad.path, oldValue: oldValue, object: this.proxy }];\r\n\t\t\tcallObservers(ad.observers, changes);\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nclass ArrayObserver extends ObserverBase {\r\n\tconstructor(properties) {\r\n\t\tsuper(properties, prepareArray);\r\n\t}\r\n\r\n\t//\treturns an unobserved graph (effectively this is an opposite of an ArrayObserver constructor logic)\r\n\trevoke() {\r\n\t\t//\trevoke native proxy\r\n\t\tthis.revokable.revoke();\r\n\r\n\t\t//\troll back observed array to an unobserved one\r\n\t\tconst target = this.target;\r\n\t\tlet l = target.length, item, tmpObserved;\r\n\t\twhile (l) {\r\n\t\t\tl--;\r\n\t\t\titem = target[l];\r\n\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\ttmpObserved = item[sysObsKey];\r\n\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\ttarget[l] = tmpObserved.revoke();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t}\r\n\r\n\tget(target, key) {\r\n\t\tconst proxiedArrayMethods = {\r\n\t\t\tpop: function proxiedPop(target, observed) {\r\n\t\t\t\tconst poppedIndex = target.length - 1;\r\n\t\t\t\tlet popResult = target.pop();\r\n\t\t\t\tif (popResult && typeof popResult === 'object') {\r\n\t\t\t\t\tconst tmpObserved = popResult[sysObsKey];\r\n\t\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\t\tpopResult = tmpObserved.revoke();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\tpublish changes\r\n\t\t\t\tconst ad = getAncestorInfo(observed);\r\n\t\t\t\tif (ad.observers.size) {\r\n\t\t\t\t\tad.path.push(poppedIndex);\r\n\t\t\t\t\tcallObservers(ad.observers, [{\r\n\t\t\t\t\t\ttype: DELETE,\r\n\t\t\t\t\t\tpath: ad.path,\r\n\t\t\t\t\t\toldValue: popResult,\r\n\t\t\t\t\t\tobject: observed.proxy\r\n\t\t\t\t\t}]);\r\n\t\t\t\t}\r\n\t\t\t\treturn popResult;\r\n\t\t\t},\r\n\t\t\tpush: function proxiedPush(target, observed) {\r\n\t\t\t\tlet i, l = arguments.length - 2, item, changes, path;\r\n\t\t\t\tconst\r\n\t\t\t\t\tpushContent = new Array(l),\r\n\t\t\t\t\tinitialLength = target.length;\r\n\r\n\t\t\t\tfor (i = 0; i < l; i++) {\r\n\t\t\t\t\titem = arguments[i + 2];\r\n\t\t\t\t\tif (item && typeof item === 'object' && !nonObservables.hasOwnProperty(item.constructor.name)) {\r\n\t\t\t\t\t\titem = Array.isArray(item)\r\n\t\t\t\t\t\t\t? new ArrayObserver({ target: item, ownKey: initialLength + i, parent: observed }).proxy\r\n\t\t\t\t\t\t\t: new ObjectObserver({ target: item, ownKey: initialLength + i, parent: observed }).proxy;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpushContent[i] = item;\r\n\t\t\t\t}\r\n\t\t\t\tconst pushResult = Reflect.apply(target.push, target, pushContent);\r\n\r\n\t\t\t\t//\tpublish changes\r\n\t\t\t\tconst ad = getAncestorInfo(observed);\r\n\t\t\t\tif (ad.observers.size) {\r\n\t\t\t\t\tchanges = [];\r\n\t\t\t\t\tfor (i = initialLength, l = target.length; i < l; i++) {\r\n\t\t\t\t\t\tpath = ad.path.slice(0);\r\n\t\t\t\t\t\tpath.push(i);\r\n\t\t\t\t\t\tchanges[i - initialLength] = {\r\n\t\t\t\t\t\t\ttype: INSERT,\r\n\t\t\t\t\t\t\tpath: path,\r\n\t\t\t\t\t\t\tvalue: target[i],\r\n\t\t\t\t\t\t\tobject: observed.proxy\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcallObservers(ad.observers, changes);\r\n\t\t\t\t}\r\n\t\t\t\treturn pushResult;\r\n\t\t\t},\r\n\t\t\tshift: function proxiedShift(target, observed) {\r\n\t\t\t\tlet shiftResult, i, l, item, changes, tmpObserved;\r\n\r\n\t\t\t\tshiftResult = target.shift();\r\n\t\t\t\tif (shiftResult && typeof shiftResult === 'object') {\r\n\t\t\t\t\ttmpObserved = shiftResult[sysObsKey];\r\n\t\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\t\tshiftResult = tmpObserved.revoke();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\tupdate indices of the remaining items\r\n\t\t\t\tfor (i = 0, l = target.length; i < l; i++) {\r\n\t\t\t\t\titem = target[i];\r\n\t\t\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\t\t\ttmpObserved = item[sysObsKey];\r\n\t\t\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\t\t\ttmpObserved.ownKey = i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\tpublish changes\r\n\t\t\t\tconst ad = getAncestorInfo(observed);\r\n\t\t\t\tif (ad.observers.size) {\r\n\t\t\t\t\tad.path.push(0);\r\n\t\t\t\t\tchanges = [{ type: DELETE, path: ad.path, oldValue: shiftResult, object: observed.proxy }];\r\n\t\t\t\t\tcallObservers(ad.observers, changes);\r\n\t\t\t\t}\r\n\t\t\t\treturn shiftResult;\r\n\t\t\t},\r\n\t\t\tunshift: function proxiedUnshift(target, observed) {\r\n\t\t\t\tconst unshiftContent = Array.from(arguments);\r\n\t\t\t\tlet changes;\r\n\t\t\t\tunshiftContent.splice(0, 2);\r\n\t\t\t\tunshiftContent.forEach((item, index) => {\r\n\t\t\t\t\tif (item && typeof item === 'object' && !nonObservables.hasOwnProperty(item.constructor.name)) {\r\n\t\t\t\t\t\tunshiftContent[index] = Array.isArray(item)\r\n\t\t\t\t\t\t\t? new ArrayObserver({ target: item, ownKey: index, parent: observed }).proxy\r\n\t\t\t\t\t\t\t: new ObjectObserver({ target: item, ownKey: index, parent: observed }).proxy;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tconst unshiftResult = Reflect.apply(target.unshift, target, unshiftContent);\r\n\t\t\t\tfor (let i = 0, l = target.length, item; i < l; i++) {\r\n\t\t\t\t\titem = target[i];\r\n\t\t\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\t\t\tconst tmpObserved = item[sysObsKey];\r\n\t\t\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\t\t\ttmpObserved.ownKey = i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\tpublish changes\r\n\t\t\t\tconst ad = getAncestorInfo(observed);\r\n\t\t\t\tif (ad.observers.size) {\r\n\t\t\t\t\tconst l = unshiftContent.length;\r\n\t\t\t\t\tlet path;\r\n\t\t\t\t\tchanges = new Array(l);\r\n\t\t\t\t\tfor (let i = 0; i < l; i++) {\r\n\t\t\t\t\t\tpath = ad.path.slice(0);\r\n\t\t\t\t\t\tpath.push(i);\r\n\t\t\t\t\t\tchanges[i] = { type: INSERT, path: path, value: target[i], object: observed.proxy };\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcallObservers(ad.observers, changes);\r\n\t\t\t\t}\r\n\t\t\t\treturn unshiftResult;\r\n\t\t\t},\r\n\t\t\treverse: function proxiedReverse(target, observed) {\r\n\t\t\t\tlet i, l, item, changes;\r\n\t\t\t\ttarget.reverse();\r\n\t\t\t\tfor (i = 0, l = target.length; i < l; i++) {\r\n\t\t\t\t\titem = target[i];\r\n\t\t\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\t\t\tconst tmpObserved = item[sysObsKey];\r\n\t\t\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\t\t\ttmpObserved.ownKey = i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\tpublish changes\r\n\t\t\t\tconst ad = getAncestorInfo(observed);\r\n\t\t\t\tif (ad.observers.size) {\r\n\t\t\t\t\tchanges = [{ type: REVERSE, path: ad.path, object: observed.proxy }];\r\n\t\t\t\t\tcallObservers(ad.observers, changes);\r\n\t\t\t\t}\r\n\t\t\t\treturn observed.proxy;\r\n\t\t\t},\r\n\t\t\tsort: function proxiedSort(target, observed, comparator) {\r\n\t\t\t\tlet i, l, item, changes;\r\n\t\t\t\ttarget.sort(comparator);\r\n\t\t\t\tfor (i = 0, l = target.length; i < l; i++) {\r\n\t\t\t\t\titem = target[i];\r\n\t\t\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\t\t\tconst tmpObserved = item[sysObsKey];\r\n\t\t\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\t\t\ttmpObserved.ownKey = i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\tpublish changes\r\n\t\t\t\tconst ad = getAncestorInfo(observed);\r\n\t\t\t\tif (ad.observers.size) {\r\n\t\t\t\t\tchanges = [{ type: SHUFFLE, path: ad.path, object: observed.proxy }];\r\n\t\t\t\t\tcallObservers(ad.observers, changes);\r\n\t\t\t\t}\r\n\t\t\t\treturn observed.proxy;\r\n\t\t\t},\r\n\t\t\tfill: function proxiedFill(target, observed) {\r\n\t\t\t\tconst\r\n\t\t\t\t\tad = getAncestorInfo(observed),\r\n\t\t\t\t\tchanges = [],\r\n\t\t\t\t\ttarLen = target.length,\r\n\t\t\t\t\tnormArgs = Array.from(arguments);\r\n\t\t\t\tnormArgs.splice(0, 2);\r\n\t\t\t\tconst\r\n\t\t\t\t\targLen = normArgs.length,\r\n\t\t\t\t\tstart = argLen < 2 ? 0 : (normArgs[1] < 0 ? tarLen + normArgs[1] : normArgs[1]),\r\n\t\t\t\t\tend = argLen < 3 ? tarLen : (normArgs[2] < 0 ? tarLen + normArgs[2] : normArgs[2]),\r\n\t\t\t\t\tprev = target.slice(0);\r\n\t\t\t\tReflect.apply(target.fill, target, normArgs);\r\n\r\n\t\t\t\tlet tmpObserved, path;\r\n\t\t\t\tfor (let i = start, item, tmpTarget; i < end; i++) {\r\n\t\t\t\t\titem = target[i];\r\n\t\t\t\t\tif (item && typeof item === 'object' && !nonObservables.hasOwnProperty(item.constructor.name)) {\r\n\t\t\t\t\t\ttarget[i] = Array.isArray(item)\r\n\t\t\t\t\t\t\t? new ArrayObserver({ target: item, ownKey: i, parent: observed }).proxy\r\n\t\t\t\t\t\t\t: new ObjectObserver({ target: item, ownKey: i, parent: observed }).proxy;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (prev.hasOwnProperty(i)) {\r\n\t\t\t\t\t\ttmpTarget = prev[i];\r\n\t\t\t\t\t\tif (tmpTarget && typeof tmpTarget === 'object') {\r\n\t\t\t\t\t\t\ttmpObserved = tmpTarget[sysObsKey];\r\n\t\t\t\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\t\t\t\ttmpTarget = tmpObserved.revoke();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tpath = ad.path.slice(0);\r\n\t\t\t\t\t\tpath.push(i);\r\n\t\t\t\t\t\tchanges.push({\r\n\t\t\t\t\t\t\ttype: UPDATE,\r\n\t\t\t\t\t\t\tpath: path,\r\n\t\t\t\t\t\t\tvalue: target[i],\r\n\t\t\t\t\t\t\toldValue: tmpTarget,\r\n\t\t\t\t\t\t\tobject: observed.proxy\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpath = ad.path.slice(0);\r\n\t\t\t\t\t\tpath.push(i);\r\n\t\t\t\t\t\tchanges.push({ type: INSERT, path: path, value: target[i], object: observed.proxy });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\tpublish changes\r\n\t\t\t\tif (ad.observers.size) {\r\n\t\t\t\t\tcallObservers(ad.observers, changes);\r\n\t\t\t\t}\r\n\t\t\t\treturn observed.proxy;\r\n\t\t\t},\r\n\t\t\tsplice: function proxiedSplice(target, observed) {\r\n\t\t\t\tconst\r\n\t\t\t\t\tad = getAncestorInfo(observed),\r\n\t\t\t\t\tchanges = [],\r\n\t\t\t\t\tspliceContent = Array.from(arguments),\r\n\t\t\t\t\ttarLen = target.length;\r\n\r\n\t\t\t\tspliceContent.splice(0, 2);\r\n\t\t\t\tconst splLen = spliceContent.length;\r\n\r\n\t\t\t\t//\tobservify the newcomers\r\n\t\t\t\tfor (let i = 2, item; i < splLen; i++) {\r\n\t\t\t\t\titem = spliceContent[i];\r\n\t\t\t\t\tif (item && typeof item === 'object' && !nonObservables.hasOwnProperty(item.constructor.name)) {\r\n\t\t\t\t\t\tspliceContent[i] = Array.isArray(item)\r\n\t\t\t\t\t\t\t? new ArrayObserver({ target: item, ownKey: i, parent: observed }).proxy\r\n\t\t\t\t\t\t\t: new ObjectObserver({ target: item, ownKey: i, parent: observed }).proxy;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\tcalculate pointers\r\n\t\t\t\tconst\r\n\t\t\t\t\tstartIndex = splLen === 0 ? 0 : (spliceContent[0] < 0 ? tarLen + spliceContent[0] : spliceContent[0]),\r\n\t\t\t\t\tremoved = splLen < 2 ? tarLen - startIndex : spliceContent[1],\r\n\t\t\t\t\tinserted = Math.max(splLen - 2, 0),\r\n\t\t\t\t\tspliceResult = Reflect.apply(target.splice, target, spliceContent),\r\n\t\t\t\t\tnewTarLen = target.length;\r\n\r\n\t\t\t\t//\treindex the paths\r\n\t\t\t\tlet tmpObserved;\r\n\t\t\t\tfor (let i = 0, item; i < newTarLen; i++) {\r\n\t\t\t\t\titem = target[i];\r\n\t\t\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\t\t\ttmpObserved = item[sysObsKey];\r\n\t\t\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\t\t\ttmpObserved.ownKey = i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\trevoke removed Observed\r\n\t\t\t\tlet i, l, item;\r\n\t\t\t\tfor (i = 0, l = spliceResult.length; i < l; i++) {\r\n\t\t\t\t\titem = spliceResult[i];\r\n\t\t\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\t\t\ttmpObserved = item[sysObsKey];\r\n\t\t\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\t\t\tspliceResult[i] = tmpObserved.revoke();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\tpublish changes\r\n\t\t\t\tif (ad.observers.size) {\r\n\t\t\t\t\tlet index, path;\r\n\t\t\t\t\tfor (index = 0; index < removed; index++) {\r\n\t\t\t\t\t\tpath = ad.path.slice(0);\r\n\t\t\t\t\t\tpath.push(startIndex + index);\r\n\t\t\t\t\t\tif (index < inserted) {\r\n\t\t\t\t\t\t\tchanges.push({\r\n\t\t\t\t\t\t\t\ttype: UPDATE,\r\n\t\t\t\t\t\t\t\tpath: path,\r\n\t\t\t\t\t\t\t\tvalue: target[startIndex + index],\r\n\t\t\t\t\t\t\t\toldValue: spliceResult[index],\r\n\t\t\t\t\t\t\t\tobject: observed.proxy\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tchanges.push({\r\n\t\t\t\t\t\t\t\ttype: DELETE,\r\n\t\t\t\t\t\t\t\tpath: path,\r\n\t\t\t\t\t\t\t\toldValue: spliceResult[index],\r\n\t\t\t\t\t\t\t\tobject: observed.proxy\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (; index < inserted; index++) {\r\n\t\t\t\t\t\tpath = ad.path.slice(0);\r\n\t\t\t\t\t\tpath.push(startIndex + index);\r\n\t\t\t\t\t\tchanges.push({\r\n\t\t\t\t\t\t\ttype: INSERT,\r\n\t\t\t\t\t\t\tpath: path,\r\n\t\t\t\t\t\t\tvalue: target[startIndex + index],\r\n\t\t\t\t\t\t\tobject: observed.proxy\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcallObservers(ad.observers, changes);\r\n\t\t\t\t}\r\n\t\t\t\treturn spliceResult;\r\n\t\t\t}\r\n\t\t};\r\n\t\tif (proxiedArrayMethods.hasOwnProperty(key)) {\r\n\t\t\treturn proxiedArrayMethods[key].bind(undefined, target, this);\r\n\t\t} else {\r\n\t\t\treturn target[key];\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass ObjectObserver extends ObserverBase {\r\n\tconstructor(properties) {\r\n\t\tsuper(properties, prepareObject);\r\n\t}\r\n\r\n\t//\treturns an unobserved graph (effectively this is an opposite of an ObjectObserver constructor logic)\r\n\trevoke() {\r\n\t\t//\trevoke native proxy\r\n\t\tthis.revokable.revoke();\r\n\r\n\t\t//\troll back observed graph to an unobserved one\r\n\t\tconst\r\n\t\t\ttarget = this.target,\r\n\t\t\tkeys = Object.keys(target);\r\n\t\tlet l = keys.length, key, item, tmpObserved;\r\n\t\twhile (l) {\r\n\t\t\tkey = keys[--l];\r\n\t\t\titem = target[key];\r\n\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\ttmpObserved = item[sysObsKey];\r\n\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\ttarget[key] = tmpObserved.revoke();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t}\r\n}\r\n\r\nclass Observable {\r\n\tconstructor() {\r\n\t\tthrow new Error('Observable MAY NOT be created via constructor, see \"Observable.from\" API');\r\n\t}\r\n\r\n\tstatic from(target) {\r\n\t\tif (target && typeof target === 'object' && !nonObservables.hasOwnProperty(target.constructor.name) && !('observe' in target) && !('unobserve' in target) && !('revoke' in target)) {\r\n\t\t\tconst observed = Array.isArray(target)\r\n\t\t\t\t? new ArrayObserver({ target: target, ownKey: null, parent: null })\r\n\t\t\t\t: new ObjectObserver({ target: target, ownKey: null, parent: null });\r\n\t\t\treturn observed.proxy;\r\n\t\t} else {\r\n\t\t\tif (!target || typeof target !== 'object') {\r\n\t\t\t\tthrow new Error('observable MAY ONLY be created from non-null object only');\r\n\t\t\t} else if ('observe' in target || 'unobserve' in target || 'revoke' in target) {\r\n\t\t\t\tthrow new Error('target object MUST NOT have nor own neither inherited properties from the following list: \"observe\", \"unobserve\", \"revoke\"');\r\n\t\t\t} else if (nonObservables.hasOwnProperty(target.constructor.name)) {\r\n\t\t\t\tthrow new Error(target + ' found to be one of non-observable object types: ' + nonObservables);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isObservable(input) {\r\n\t\treturn !!(input && input[sysObsKey] && input.observe);\r\n\t}\r\n}\r\n\r\nObject.freeze(Observable);\r\n\r\nexport { Observable };","// @flow\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\nexport function hasOwn (obj: Object, key: string): boolean %checks {\n    return hasOwnProperty.call(obj, key)\n}\n\nexport function isFile(val: mixed): boolean %checks {\n    return !!val && (val instanceof Blob);\n}\n\nexport function emptyValue(original: mixed): Array<any> | {} | '' | null {\n    if (original instanceof Array) {\n        return [];\n    }\n    if (typeof original === 'object') {\n        return {};\n    }\n    if (typeof original === 'string') {\n        return '';\n    }\n    return null;\n}\n\nexport function isObj(value: mixed): boolean %checks {\n    return value !== null && typeof value === 'object';\n}\n\nexport function isArr(value: mixed): %checks {\n    return value instanceof Array;\n}\n\nexport function isNil(value: mixed): %checks {\n    return value == null;\n}\n\nexport function isFunc(value: mixed): %checks {\n    return value instanceof Function;\n}\n\nexport function isStr(value: mixed): %checks {\n    return typeof value === 'string';\n}\n\nexport function escapeRegExp(string: string) {\n    return string.replace(/[\\\\^$.*+?()[\\]{}|]/g, '\\\\$&');\n}\n\nexport function containsFile(obj: any): boolean {\n    if (isArr(obj)) {\n        for (let i = 0; i < obj.length; i++) {\n            if (obj[i] instanceof File) {\n                return true;\n            }\n            if (isObj(obj[i])) {\n                return containsFile(obj[i]);\n            }\n        }\n    } else {\n        for (let key in obj) {\n            if (obj[key] instanceof File) {\n                return true;\n            }\n            if (isObj(obj[key])) {\n                return containsFile(obj[key]);\n            }\n        }\n    }\n    return false;\n}\n\nexport function arrayToObject(array: any[]): { [string]: any } {\n    let target = {};\n\n    array.forEach((item, index) => {\n        target[index] = item;\n    });\n\n    return target;\n}\n","// @flow\nimport {escapeRegExp, isArr, isNil} from \"./utils\";\n\ntype ErrorValue = string | Array<string>;\nexport type ErrorValues = { [string]: ErrorValue };\n\nclass Errors {\n\n    errors: ErrorValues;\n    elements: Array<{ key: string | RegExp, el: Element }>;\n\n    /**\n     * Create a new Errors instance.\n     */\n    constructor() {\n        this.errors = {};\n        this.elements = [];\n    }\n\n    /**\n     * Determine if an errors exists for the given field.\n     *\n     * @param {string|RegExp} field\n     */\n    has(field: string | RegExp): boolean {\n        if (field instanceof RegExp) {\n            return Object.keys(this.errors).some(key => field.test(key));\n        }\n        return this.errors.hasOwnProperty(field);\n    }\n\n    /**\n     * Determine if we have any errors.\n     */\n    any(): boolean {\n        return Object.keys(this.errors).length > 0;\n    }\n\n    /**\n     * Retrieve the error message for a field.\n     *\n     * @param {string} field\n     */\n    getFirst(field: string): ?string {\n        let error = this.get(field);\n        if (error) {\n            if (isArr(error)) {\n                return error.length ? error[0] : null;\n            } else {\n                return error || null;\n            }\n        }\n    }\n\n    get(field: string) {\n        return this.errors[field];\n    }\n\n    /**\n     * Add a new error message if one doesn't already exist.\n     *\n     * @param {string} field\n     * @param error\n     * @param force\n     */\n    add(field: string, error: ErrorValue, force: boolean = false) {\n        if (!this.has(field) || force) {\n            this.errors[field] = error;\n        }\n    }\n\n    /**\n     * Record the new errors.\n     *\n     * @param {object} errors\n     * @param timeout\n     */\n    record(errors: ErrorValues, timeout: ?(false | number) = 3000) {\n        this.errors = errors;\n        if (timeout) {\n            window.setTimeout(() => {\n                this.clear();\n            }, timeout);\n        }\n    }\n\n    /**\n     * Clear one or all error fields.\n     *\n     * @param {string|null} field\n     */\n    clear(field: ?string) {\n        if (field) {\n            delete this.errors[field];\n\n            return;\n        }\n\n        this.errors = {};\n    }\n\n    addElement(key: string | RegExp | string[], el: Element) {\n        if (isArr(key)) {\n            key.forEach(field => this.addElement(field, el));\n        } else {\n            this.elements.push({ key, el });\n        }\n    }\n\n    removeElement(element: Element) {\n        this.elements = this.elements.filter(({ el }) => el !== element);\n    }\n\n    removeElementKey(field: string | RegExp | string[]) {\n        if (isArr(field)) {\n            field.forEach(key => this.removeElementKey(key));\n        } else {\n            this.elements = this.elements.filter(({ key }) => key !== field);\n        }\n    }\n\n    hasElements(): boolean {\n        return !!this.elements.length;\n    }\n\n    scrollToFirst(options: ?boolean | {\n        behavior?: ('auto' | 'instant' | 'smooth'),\n        block?: ('start' | 'center' | 'end' | 'nearest'),\n        inline?: ('start' | 'center' | 'end' | 'nearest'),\n    } = null) {\n        options = isNil(options) ? { behavior: 'smooth', inline: 'center' } : options;\n\n        const element = this.elements.find(({ key, el }) => {\n            let rx: RegExp;\n            if (key instanceof RegExp) {\n                rx = key;\n            } else {\n                let expression = escapeRegExp(key);\n                rx = new RegExp(expression.replace('*', '.*'));\n            }\n\n            if (Object.keys(this.errors).some(key => rx.test(key))) {\n                return true;\n            }\n        });\n\n        if (element) {\n            element.el.scrollIntoView(options);\n        }\n    }\n}\n\nexport default Errors;\n","// @flow\nimport { extractFiles } from 'extract-files';\nimport { sysObsKey, Observable } from './object-observer'\nimport {isFile, hasOwn, emptyValue, isObj, isNil, isArr, containsFile, isStr, arrayToObject} from \"./utils\";\nimport Errors from \"./Errors\";\nimport http from \"./http\";\nimport type { Method } from './flow';\nimport type { ErrorValues } from \"./Errors\";\n\ntype PrimitiveFormValue = string | number | boolean | null | typeof undefined;\n\ntype ScalarFormValue = PrimitiveFormValue | Blob | File;\n\ntype FormValue = ScalarFormValue | Array<?FormValue> | { [string]: ?FormValue };\n\nexport type Data = { [string]: FormValue };\n\ntype Options = {\n    method: Method,\n    baseUrl: string,\n    url: string,\n    graphql: string,\n    sendWith: (method: Method, url: string, data: FormData | Data, options: Options) => Promise<any>,\n    useJson: boolean,\n    strictMode: boolean,\n    isValidationError: ({ status: number }) => boolean,\n    formatData: (Data) => Data,\n    formatErrorResponse: (any) => ErrorValues,\n    timeout: false | number,\n    autoRemoveError: boolean,\n    clear: boolean,\n    quiet: boolean,\n}\n\ntype PartialOptions = $Shape<Options>;\n\nfunction parseOptions(method: ?(Method | PartialOptions), url: ?(string | PartialOptions), options: ?PartialOptions): PartialOptions {\n    method = method ? (isObj(method) ? method : { method }) : {};\n    url = url ? (isObj(url) ? url : { url }) : {};\n    options = options || {};\n\n    return {\n        ...options,\n        ...url,\n        ...method,\n    }\n}\n\nfunction flattenToQueryParams(data: Data | Array<FormValue>, prefix: string = ''): { [string]: string | Blob | File } {\n    let params = {};\n\n    if (isArr(data)) {\n        data.forEach(item => {\n            let paramKey = `${prefix}[]`;\n\n            if (isObj(item) && !isFile(item)) {\n                params = {\n                    ...params,\n                    ...flattenToQueryParams(item, paramKey)\n                };\n                return;\n            }\n\n            params[paramKey] = isFile(item) ? item : formValueToString(item);\n        })\n    } else {\n        Object.keys(data).forEach(key => {\n            let item = data[key];\n\n            let paramKey = prefix ? `${prefix}[${key}]` : '' + key;\n\n            if (isObj(item) && !isFile(item)) {\n                params = {\n                    ...params,\n                    ...flattenToQueryParams(item, paramKey)\n                };\n                return;\n            }\n\n            params[paramKey] = isFile(item) ? item : formValueToString(item);\n        });\n    }\n\n    return params;\n}\n\nfunction formValueToString(value: PrimitiveFormValue): string {\n    if (typeof value === 'boolean') {\n        return ''+(+value);\n    }\n    if (typeof value === 'number') {\n        return value.toString();\n    }\n    return value || '';\n}\n\nfunction bubbleError(error: Error | Object): Promise<Object> {\n    if (error instanceof Error) {\n        throw error;\n    }\n    return Promise.reject(error);\n}\n\nfunction isValidErrorObject(errors) {\n    return !errors ||\n        typeof errors !== 'object' ||\n        !Object.keys(errors).length ||\n        Object.values(errors).some(error => {\n            if (isArr(error)) {\n                return error.some(message => !isStr(message));\n            }\n            return !isStr(error);\n        });\n}\n\nclass Form {\n\n    errors: Errors;\n\n    data: Data;\n    originalData: Data;\n    originalConstantData: Data;\n    options: Options;\n\n    static defaultOptions: Options = {\n        // The default method type used by the submit method\n        method: 'post',\n\n        // If set any relative urls will be appended to the baseUrl\n        baseUrl: '',\n\n        // The url to submit the form\n        url: '',\n\n        // The endpoint to use for all graphql queries\n        graphql: 'graphql',\n\n        // A callback to implement custom HTTP logic.\n        // It is recommended to use this option so the form can utilise your HTTP library.\n        // The callback should return a promise that the form can use to handle the response.\n        sendWith: http,\n\n        // Set to true if you want the form to submit the data as a json object.\n        // This will pass the data as a JavaScript object to the sendWith callback so it is up to you to stringify it for your HTTP library.\n        // If the data contains a File or Blob object the data will be a FormData object regardless of this option (unless strictMode is true).\n        useJson: false,\n\n        // If set to true the form will throw an Error if the data has a File or Blob object and the useJson option is true.\n        strictMode: false,\n\n        // The status code for which the form should handle validation errors.\n        isValidationError: ({ status }) => status === 422,\n\n        // A callback to format the data before sending it.\n        formatData: (data) => data,\n\n        // A callback that should turn the error response into an object of field names and their validation errors.\n        formatErrorResponse: (response) => {\n            let data = response.data || response.response;\n            if (typeof data === 'string') {\n                try {\n                    data = JSON.parse(data);\n                } catch (e) {\n                    throw new Error('Unable to find errors in the response');\n                }\n            }\n            let errors: ErrorValues = data.errors;\n            if (isValidErrorObject(errors)) {\n                throw new Error('Unable to find errors in the response');\n            }\n            return errors;\n        },\n\n        // The number of milliseconds to wait before clearing the error messages.\n        // When timeout is false the error messages will stay indefinitely.\n        timeout: false,\n\n        // When set to true the errors for a field will be cleared when that field's value is updated.\n        autoRemoveError: true,\n\n        // When set to true, the data will be reverted to it's original values after a successful request.\n        clear: true,\n\n        // When set to true, no errors will be recorded.\n        quiet: false,\n    };\n\n    static setOptions = function (options: Options) {\n        Form.defaultOptions = {\n            ...Form.defaultOptions,\n            ...options\n        };\n    };\n\n    constructor(data: Data, options: ?Options) {\n        this.setOptions(options);\n\n        this.originalData = {};\n        this.originalConstantData = {};\n        this.data = Observable.from({});\n\n        this.append(data);\n\n        this.errors = new Errors();\n        // $FlowFixMe\n        this.data.observe(changes => {\n            changes.forEach(({ path }) => {\n                this.options.autoRemoveError && this.errors.clear(path.join('.'));\n            });\n        });\n    }\n\n    setOptions(options: ?Options) {\n        this.options = this.options || Form.defaultOptions;\n        if (options) {\n            this.options = {\n                ...this.options,\n                ...options,\n            }\n        }\n    }\n\n    append(key: string | Data, value: FormValue, constant: ?boolean = false): Form {\n        if (isObj(key)) {\n            Object.keys(key).forEach(field => {\n                this.append(field, key[field], constant);\n            });\n            return this;\n        }\n\n        if (constant) {\n            this.originalConstantData[key] = value;\n        } else {\n            this.originalData[key] = value;\n        }\n        if (!constant) {\n            this.data[key] = value;\n            this.defineProperty(key);\n        } else {\n            Object.defineProperty(\n                this,\n                key,\n                {\n                    get: () => undefined,\n                    set: () => {\n                        throw new Error(`The \"${key}\" value has been set as constant and cannot be modified`);\n                    }\n                }\n            );\n        }\n\n        return this;\n    }\n\n    defineProperty(key: string) {\n        Object.defineProperty(\n            this,\n            key,\n            {\n                get: () => this.data[key],\n                set: (newValue: FormValue) => {\n                    this.setData(key, newValue);\n                }\n            }\n        );\n    }\n\n    constantData(key: string | Data, value: FormValue): Form {\n        return this.append(key, value, true);\n    }\n\n    getData(): Data {\n        const data = {\n            ...this.data,\n            ...this.originalConstantData,\n        };\n        delete data[sysObsKey];\n        return data;\n    }\n\n    setData(key: string, value: FormValue) {\n        this.data[key] = value;\n    }\n\n    reset(): Form {\n        for (let field in this.data) {\n            this.data[field] = this.originalData[field];\n        }\n\n        this.errors.clear();\n\n        return this;\n    }\n\n    clear(field: string): Form {\n        if (hasOwn(this, field)) {\n            this.data[field] = emptyValue(this.data[field]);\n        }\n        return this;\n    }\n\n    addFileFromEvent(event: Event | DragEvent, key: ?string): Form {\n        let node = event.target;\n        if (!(node instanceof HTMLInputElement)) {\n            throw new Error('Incompatible event target, must be of type HTMLInputElement');\n        }\n        if (!key) {\n            key = node.name;\n        }\n        if (key in this && (node.value !== '')) {\n            if (event instanceof DragEvent) {\n                this.setData(key, event.dataTransfer && event.dataTransfer.files.length && event.dataTransfer.files[0]);\n            } else {\n                this.setData(key, node.files && node.files.length && node.files[0]);\n            }\n            node.value = '';\n        }\n        return this;\n    }\n\n    post(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('post', url, options);\n    }\n\n    put(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('put', url, options);\n    }\n\n    patch(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('patch', url, options);\n    }\n\n    delete(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('delete', url, options);\n    }\n\n    get(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('get', url, options);\n    }\n\n    graphql(query: string, options: ?Options): Promise<any> {\n        options = options || {};\n        const originalFormatDataCallback = options.formatData;\n\n        options.url = options.graphql || this.options.graphql;\n\n        options.useJson = !this.hasFile();\n\n        options.formatData = (data) => {\n            data = originalFormatDataCallback ? originalFormatDataCallback(data) : data;\n            const operations = {\n                query,\n                variables: data,\n            };\n\n            if (!this.hasFile()) {\n                return operations;\n            }\n            const { clone, files } = extractFiles(data);\n            operations.variables = clone;\n            return {\n                operations: JSON.stringify(operations),\n                map: JSON.stringify(arrayToObject(Array.from(files.values()))),\n                ...arrayToObject(Array.from(files.keys())),\n            };\n        };\n        return this.post(options);\n    }\n\n    submit(method: Method | Options, url: ?string | Options, options: ?Options): Promise<any> {\n        options = parseOptions(method, url, options);\n        const requestOptions = {\n            ...this.options,\n            ...options,\n        };\n\n        let formData, data = requestOptions.formatData(this.getData());\n        if (this.shouldConvertToFormData(requestOptions)) {\n            formData = new FormData();\n\n            let params = flattenToQueryParams(data);\n\n            Object.keys(params).forEach(key => {\n                formData.append(key, params[key]);\n            });\n\n            data = formData;\n        }\n\n        let httpAdapter = requestOptions.sendWith;\n\n        return httpAdapter(requestOptions.method, this.buildBaseUrl(requestOptions), data, requestOptions).then(response => {\n            if (requestOptions.isValidationError(response)) {\n                this.onFail(response, requestOptions);\n            } else {\n                this.onSuccess(requestOptions);\n            }\n            return response;\n        }).catch(error => {\n            if (requestOptions.isValidationError(error)) {\n                this.onFail(error, requestOptions);\n            }\n            return bubbleError(error);\n        });\n    }\n\n    shouldConvertToFormData(options: ?Options) {\n        options = options || this.options;\n        if (!options.useJson) {\n            return true;\n        }\n        if (this.hasFile() && options.strictMode) {\n            throw new Error('Cannot convert a file to JSON');\n        }\n        return this.hasFile();\n    }\n\n    hasFile(): boolean {\n        return containsFile(this.getData());\n    }\n\n    onSuccess(options: ?Options) {\n        options = options || this.options;\n        if (options.clear) {\n            this.reset();\n        }\n    }\n\n    onFail(error: XMLHttpRequest, options: ?Options) {\n        options = options || this.options;\n        if (!options.quiet) {\n            let errors = options.formatErrorResponse(error);\n            this.errors.record(errors, options.timeout);\n            if (this.errors.hasElements()) {\n                this.errors.scrollToFirst();\n            }\n        }\n    }\n\n    buildBaseUrl(options: ?Options) {\n        options = options || this.options;\n        if (options.url.includes('://')) {\n            return options.url;\n        }\n        let baseUrl = options.baseUrl;\n        let relativeUrl = options.url;\n\n        baseUrl = baseUrl.replace(/\\/+$/g, '');\n        relativeUrl = relativeUrl.replace(/^\\/+/g, '');\n\n        return `${baseUrl}/${relativeUrl}`;\n    }\n\n    makeUrl(options: ?Options): string {\n        let url = this.buildBaseUrl(options);\n        let queryStart = url.includes('?') ? '&' : '?';\n        let fullUrl = url + queryStart;\n        let properties = [];\n        let data = this.getData();\n\n        let params = flattenToQueryParams(data);\n\n        Object.keys(params).forEach(key => {\n            let item = params[key];\n\n            if (isFile(item)) {\n                throw new Error('Cannot convert file to a string');\n            }\n\n            properties.push(key + (isNil(item) ? '' : `=${item}`));\n        });\n        return fullUrl + properties.join('&');\n    }\n\n    addElement(key: string, el: HTMLElement) {\n        this.errors.addElement(key, el);\n    }\n\n    removeElement(el: HTMLElement) {\n        this.errors.removeElement(el);\n    }\n\n    removeElementKey(key: string) {\n        this.errors.removeElementKey(key);\n    }\n}\n\n\nexport default Form;\n","import { ReactNativeFile } from './ReactNativeFile'\nexport function extractFiles(value, path) {\n  if (path === void 0) {\n    path = ''\n  }\n\n  var clone\n  var files = new Map()\n\n  function addFile(paths, file) {\n    var storedPaths = files.get(file)\n    if (storedPaths) storedPaths.push.apply(storedPaths, paths)\n    else files.set(file, paths)\n  }\n\n  if (\n    (typeof File !== 'undefined' && value instanceof File) ||\n    (typeof Blob !== 'undefined' && value instanceof Blob) ||\n    value instanceof ReactNativeFile\n  ) {\n    clone = null\n    addFile([path], value)\n  } else {\n    var prefix = path ? path + '.' : ''\n    if (typeof FileList !== 'undefined' && value instanceof FileList)\n      clone = Array.prototype.map.call(value, function(file, i) {\n        addFile(['' + prefix + i], file)\n        return null\n      })\n    else if (Array.isArray(value))\n      clone = value.map(function(child, i) {\n        var result = extractFiles(child, '' + prefix + i)\n        result.files.forEach(addFile)\n        return result.clone\n      })\n    else if (value && value.constructor === Object) {\n      clone = {}\n\n      for (var i in value) {\n        var result = extractFiles(value[i], '' + prefix + i)\n        result.files.forEach(addFile)\n        clone[i] = result.clone\n      }\n    } else clone = value\n  }\n\n  return {\n    clone: clone,\n    files: files\n  }\n}\n","// @flow\nimport type { Method } from './flow';\nimport type { Data } from \"./Form\";\n\ntype Options = {\n    method: Method,\n    url: string,\n}\n\nexport default function http(method: Method, url: string, data: FormData | Data, options: Options) {\n    let xhr = new XMLHttpRequest();\n\n    let response = new Promise<XMLHttpRequest>((resolve, reject) => {\n        xhr.onload = () => {\n            if (xhr.status >= 200 && xhr.status < 300) {\n                resolve(xhr);\n            } else {\n                reject(xhr);\n            }\n        };\n        xhr.onerror = () => reject(xhr);\n    });\n\n    xhr.open(method, url);\n    if (data instanceof FormData) {\n        xhr.setRequestHeader('Content-Type', 'multipart/form-data');\n        xhr.send(data);\n    } else {\n        xhr.setRequestHeader('Content-Type', 'application/json');\n        xhr.send(JSON.stringify(data));\n    }\n\n    return response;\n}"],"sourceRoot":""}