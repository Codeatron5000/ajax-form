{"version":3,"sources":["webpack://formla/webpack/universalModuleDefinition","webpack://formla/webpack/bootstrap","webpack://formla/./node_modules/extract-files/lib/ReactNativeFile.mjs","webpack://formla/./node_modules/extract-files/lib/extractFiles.mjs","webpack://formla/./src/object-observer.js","webpack://formla/./src/utils.js","webpack://formla/./src/Errors.js","webpack://formla/./src/http.js","webpack://formla/./src/Form.js"],"names":["sysObsKey","Symbol","INSERT","UPDATE","DELETE","REVERSE","SHUFFLE","nonObservables","Date","Blob","Number","String","Boolean","Error","SyntaxError","TypeError","URIError","Function","Promise","RegExp","File","validOptionsKeys","observableDefinition","revoke","value","observe","observer","options","systemObserver","observers","path","pathsFrom","invalidOption","Object","keys","find","option","includes","join","has","set","assign","console","info","unobserve","l","size","arguments","length","delete","clear","prepareArray","source","item","target","Array","prototype","hasOwnProperty","call","constructor","name","isArray","ArrayObserver","ownKey","parent","proxy","ObjectObserver","prepareObject","key","callObservers","changes","relevantChanges","oPath","oPaths","get","filter","change","startsWith","e","error","getAncestorInfo","self","tmp","l1","l2","result","ObserverBase","properties","cloningFunction","targetClone","isRevoked","defineProperty","Map","defineProperties","revokable","Proxy","revocable","newValue","oldValue","tmpObserved","ad","push","type","object","proxiedArrayMethods","pop","proxiedPop","observed","poppedIndex","popResult","proxiedPush","i","pushContent","initialLength","pushResult","Reflect","apply","slice","shift","proxiedShift","shiftResult","unshift","proxiedUnshift","unshiftContent","from","splice","forEach","index","unshiftResult","reverse","proxiedReverse","sort","proxiedSort","comparator","fill","proxiedFill","tarLen","normArgs","argLen","start","end","prev","tmpTarget","proxiedSplice","spliceContent","splLen","startIndex","removed","inserted","Math","max","spliceResult","newTarLen","bind","undefined","Observable","input","freeze","hasOwn","obj","isFile","val","emptyValue","original","isObj","isArr","isNil","isFunc","isStr","escapeRegExp","string","replace","containsFile","arrayToObject","array","Errors","errors","elements","field","some","test","force","timeout","window","setTimeout","el","addElement","element","removeElementKey","behavior","inline","rx","expression","scrollIntoView","http","method","url","data","xhr","XMLHttpRequest","response","resolve","reject","onload","status","onerror","open","FormData","setRequestHeader","send","JSON","stringify","parseOptions","flattenToQueryParams","prefix","params","paramKey","formValueToString","toString","bubbleError","isValidErrorObject","values","message","Form","setOptions","originalData","originalConstantData","append","autoRemoveError","defaultOptions","constant","setData","event","node","HTMLInputElement","DragEvent","dataTransfer","files","submit","query","originalFormatDataCallback","formatData","graphql","useJson","hasFile","operations","variables","extractFiles","clone","map","post","requestOptions","formData","getData","shouldConvertToFormData","httpAdapter","sendWith","buildBaseUrl","then","isValidationError","onFail","onSuccess","catch","strictMode","reset","quiet","formatErrorResponse","record","hasElements","scrollToFirst","baseUrl","relativeUrl","queryStart","fullUrl","removeElement","parse"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;AClFO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;;ACPmD;AAC5C;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;AClDO,IAAMA,SAAS,GAAGC,MAAM,CAAC,qBAAD,CAAxB;;AACP,IACCC,MAAM,GAAG,QADV;AAAA,IAECC,MAAM,GAAG,QAFV;AAAA,IAGCC,MAAM,GAAG,QAHV;AAAA,IAICC,OAAO,GAAG,SAJX;AAAA,IAKCC,OAAO,GAAG,SALX;AAAA,IAMCC,cAAc,GAAG;AAChBC,MAAI,EAAE,IADU;AAEhBC,MAAI,EAAE,IAFU;AAGhBC,QAAM,EAAE,IAHQ;AAIhBC,QAAM,EAAE,IAJQ;AAKhBC,SAAO,EAAE,IALO;AAMhBC,OA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","file":"Form.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"formla\"] = factory();\n\telse\n\t\troot[\"formla\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export var ReactNativeFile = function ReactNativeFile(_ref) {\n  var uri = _ref.uri,\n    name = _ref.name,\n    type = _ref.type\n  this.uri = uri\n  this.name = name\n  this.type = type\n}\n","import { ReactNativeFile } from './ReactNativeFile'\nexport function extractFiles(value, path) {\n  if (path === void 0) {\n    path = ''\n  }\n\n  var clone\n  var files = new Map()\n\n  function addFile(paths, file) {\n    var storedPaths = files.get(file)\n    if (storedPaths) storedPaths.push.apply(storedPaths, paths)\n    else files.set(file, paths)\n  }\n\n  if (\n    (typeof File !== 'undefined' && value instanceof File) ||\n    (typeof Blob !== 'undefined' && value instanceof Blob) ||\n    value instanceof ReactNativeFile\n  ) {\n    clone = null\n    addFile([path], value)\n  } else {\n    var prefix = path ? path + '.' : ''\n    if (typeof FileList !== 'undefined' && value instanceof FileList)\n      clone = Array.prototype.map.call(value, function(file, i) {\n        addFile(['' + prefix + i], file)\n        return null\n      })\n    else if (Array.isArray(value))\n      clone = value.map(function(child, i) {\n        var result = extractFiles(child, '' + prefix + i)\n        result.files.forEach(addFile)\n        return result.clone\n      })\n    else if (value && value.constructor === Object) {\n      clone = {}\n\n      for (var i in value) {\n        var result = extractFiles(value[i], '' + prefix + i)\n        result.files.forEach(addFile)\n        clone[i] = result.clone\n      }\n    } else clone = value\n  }\n\n  return {\n    clone: clone,\n    files: files\n  }\n}\n","export const sysObsKey = Symbol('system-observer-key');\r\nconst\r\n\tINSERT = 'insert',\r\n\tUPDATE = 'update',\r\n\tDELETE = 'delete',\r\n\tREVERSE = 'reverse',\r\n\tSHUFFLE = 'shuffle',\r\n\tnonObservables = {\r\n\t\tDate: true,\r\n\t\tBlob: true,\r\n\t\tNumber: true,\r\n\t\tString: true,\r\n\t\tBoolean: true,\r\n\t\tError: true,\r\n\t\tSyntaxError: true,\r\n\t\tTypeError: true,\r\n\t\tURIError: true,\r\n\t\tFunction: true,\r\n\t\tPromise: true,\r\n\t\tRegExp: true,\r\n\t\tFile: true,\r\n\t},\r\n\tvalidOptionsKeys = ['path', 'pathsFrom'],\r\n\tobservableDefinition = {\r\n\t\trevoke: {\r\n\t\t\tvalue: function () {\r\n\t\t\t\tthis[sysObsKey].revoke();\r\n\t\t\t}\r\n\t\t},\r\n\t\tobserve: {\r\n\t\t\tvalue: function (observer, options) {\r\n\t\t\t\tconst\r\n\t\t\t\t\tsystemObserver = this[sysObsKey],\r\n\t\t\t\t\tobservers = systemObserver.observers;\r\n\r\n\t\t\t\tif (typeof observer !== 'function') {\r\n\t\t\t\t\tthrow new Error('observer parameter MUST be a function');\r\n\t\t\t\t}\r\n\t\t\t\tif (options) {\r\n\t\t\t\t\tif ('path' in options && (typeof options.path !== 'string' || !options.path)) {\r\n\t\t\t\t\t\tthrow new Error('\"path\" option, if/when provided, MUST be a non-empty string');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ('pathsFrom' in options && options.path) {\r\n\t\t\t\t\t\tthrow new Error('\"pathsFrom\" option MAY NOT be specified together with \"path\" option');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ('pathsFrom' in options && (typeof options.pathsFrom !== 'string' || !options.pathsFrom)) {\r\n\t\t\t\t\t\tthrow new Error('\"pathsFrom\" option, if/when provided, MUST be a non-empty string');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst invalidOption = Object.keys(options).find(option => !validOptionsKeys.includes(option));\r\n\t\t\t\t\tif (invalidOption) {\r\n\t\t\t\t\t\tthrow new Error('\"' + invalidOption + '\" is not a one of the valid options (' + validOptionsKeys.join(', ') + ')');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!observers.has(observer)) {\r\n\t\t\t\t\tobservers.set(observer, Object.assign({}, options));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.info('observer may be bound to an observable only once');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tunobserve: {\r\n\t\t\tvalue: function () {\r\n\t\t\t\tconst\r\n\t\t\t\t\tsystemObserver = this[sysObsKey],\r\n\t\t\t\t\tobservers = systemObserver.observers;\r\n\t\t\t\tlet l;\r\n\t\t\t\tif (observers.size) {\r\n\t\t\t\t\tl = arguments.length;\r\n\t\t\t\t\tif (l) {\r\n\t\t\t\t\t\twhile (l) {\r\n\t\t\t\t\t\t\tobservers.delete(arguments[--l]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tobservers.clear();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tprepareArray = function (source, observer) {\r\n\t\tlet l = source.length, item;\r\n\t\tconst target = new Array(l);\r\n\t\ttarget[sysObsKey] = observer;\r\n\t\twhile (l) {\r\n\t\t\tl--;\r\n\t\t\titem = source[l];\r\n\t\t\tif (item && typeof item === 'object' && !Object.prototype.hasOwnProperty.call(nonObservables, item.constructor.name)) {\r\n\t\t\t\ttarget[l] = Array.isArray(item)\r\n\t\t\t\t\t? new ArrayObserver({ target: item, ownKey: l, parent: observer }).proxy\r\n\t\t\t\t\t: new ObjectObserver({ target: item, ownKey: l, parent: observer }).proxy;\r\n\t\t\t} else {\r\n\t\t\t\ttarget[l] = item;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t},\r\n\tprepareObject = function (source, observer) {\r\n\t\tconst\r\n\t\t\tkeys = Object.keys(source),\r\n\t\t\ttarget = { [sysObsKey]: observer };\r\n\t\tlet l = keys.length, key, item;\r\n\t\twhile (l) {\r\n\t\t\tl--;\r\n\t\t\tkey = keys[l];\r\n\t\t\titem = source[key];\r\n\t\t\tif (item && typeof item === 'object' && !nonObservables.hasOwnProperty(item.constructor.name)) {\r\n\t\t\t\ttarget[key] = Array.isArray(item)\r\n\t\t\t\t\t? new ArrayObserver({ target: item, ownKey: key, parent: observer }).proxy\r\n\t\t\t\t\t: new ObjectObserver({ target: item, ownKey: key, parent: observer }).proxy;\r\n\t\t\t} else {\r\n\t\t\t\ttarget[key] = item;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t},\r\n\tcallObservers = function (observers, changes) {\r\n\t\tlet target, options, relevantChanges, oPath, oPaths;\r\n\t\tfor (target of observers.keys()) {\r\n\t\t\ttry {\r\n\t\t\t\toptions = observers.get(target);\r\n\t\t\t\trelevantChanges = changes;\r\n\r\n\t\t\t\tif (options.path) {\r\n\t\t\t\t\toPath = options.path;\r\n\t\t\t\t\trelevantChanges = changes.filter(change => change.path.join('.') === oPath);\r\n\t\t\t\t} else if (options.pathsFrom) {\r\n\t\t\t\t\toPaths = options.pathsFrom;\r\n\t\t\t\t\trelevantChanges = changes.filter(change => change.path.join('.').startsWith(oPaths));\r\n\t\t\t\t}\r\n\t\t\t\tif (relevantChanges.length) {\r\n\t\t\t\t\ttarget(relevantChanges);\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error('failed to deliver changes to listener ' + target, e);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetAncestorInfo = function (self) {\r\n\t\tconst tmp = [];\r\n\t\tlet l1 = 0, l2 = 0;\r\n\t\twhile (self.parent) {\r\n\t\t\ttmp[l1++] = self.ownKey;\r\n\t\t\tself = self.parent;\r\n\t\t}\r\n\t\tconst result = new Array(l1);\r\n\t\twhile (l1) result[l2++] = tmp[--l1];\r\n\t\treturn { observers: self.observers, path: result };\r\n\t};\r\n\r\nclass ObserverBase {\r\n\tconstructor(properties, cloningFunction) {\r\n\t\tconst\r\n\t\t\tsource = properties.target,\r\n\t\t\ttargetClone = cloningFunction(source, this);\r\n\t\tif (properties.parent === null) {\r\n\t\t\tthis.isRevoked = false;\r\n\t\t\tObject.defineProperty(this, 'observers', { value: new Map() });\r\n\t\t\tObject.defineProperties(targetClone, observableDefinition);\r\n\t\t} else {\r\n\t\t\tthis.parent = properties.parent;\r\n\t\t\tthis.ownKey = properties.ownKey;\r\n\t\t}\r\n\t\tthis.revokable = Proxy.revocable(targetClone, this);\r\n\t\tthis.proxy = this.revokable.proxy;\r\n\t\tthis.target = targetClone;\r\n\t}\r\n\r\n\tset(target, key, value) {\r\n\t\tlet newValue, oldValue = target[key], changes;\r\n\r\n\t\tif (value === oldValue) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif (value && typeof value === 'object' && !nonObservables.hasOwnProperty(value.constructor.name)) {\r\n\t\t\tnewValue = Array.isArray(value)\r\n\t\t\t\t? new ArrayObserver({ target: value, ownKey: key, parent: this }).proxy\r\n\t\t\t\t: new ObjectObserver({ target: value, ownKey: key, parent: this }).proxy;\r\n\t\t} else {\r\n\t\t\tnewValue = value;\r\n\t\t}\r\n\t\ttarget[key] = newValue;\r\n\r\n\t\tif (oldValue && typeof oldValue === 'object') {\r\n\t\t\tconst tmpObserved = oldValue[sysObsKey];\r\n\t\t\tif (tmpObserved) {\r\n\t\t\t\toldValue = tmpObserved.revoke();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//\tpublish changes\r\n\t\tconst ad = getAncestorInfo(this);\r\n\t\tif (ad.observers.size) {\r\n\t\t\tad.path.push(key);\r\n\t\t\tchanges = typeof oldValue === 'undefined'\r\n\t\t\t\t? [{ type: INSERT, path: ad.path, value: newValue, object: this.proxy }]\r\n\t\t\t\t: [{ type: UPDATE, path: ad.path, value: newValue, oldValue: oldValue, object: this.proxy }];\r\n\t\t\tcallObservers(ad.observers, changes);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tdeleteProperty(target, key) {\r\n\t\tlet oldValue = target[key], changes;\r\n\r\n\t\tdelete target[key];\r\n\r\n\t\tif (oldValue && typeof oldValue === 'object') {\r\n\t\t\tconst tmpObserved = oldValue[sysObsKey];\r\n\t\t\tif (tmpObserved) {\r\n\t\t\t\toldValue = tmpObserved.revoke();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//\tpublish changes\r\n\t\tconst ad = getAncestorInfo(this);\r\n\t\tif (ad.observers.size) {\r\n\t\t\tad.path.push(key);\r\n\t\t\tchanges = [{ type: DELETE, path: ad.path, oldValue: oldValue, object: this.proxy }];\r\n\t\t\tcallObservers(ad.observers, changes);\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nclass ArrayObserver extends ObserverBase {\r\n\tconstructor(properties) {\r\n\t\tsuper(properties, prepareArray);\r\n\t}\r\n\r\n\t//\treturns an unobserved graph (effectively this is an opposite of an ArrayObserver constructor logic)\r\n\trevoke() {\r\n\t\t//\trevoke native proxy\r\n\t\tthis.revokable.revoke();\r\n\r\n\t\t//\troll back observed array to an unobserved one\r\n\t\tconst target = this.target;\r\n\t\tlet l = target.length, item, tmpObserved;\r\n\t\twhile (l) {\r\n\t\t\tl--;\r\n\t\t\titem = target[l];\r\n\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\ttmpObserved = item[sysObsKey];\r\n\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\ttarget[l] = tmpObserved.revoke();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t}\r\n\r\n\tget(target, key) {\r\n\t\tconst proxiedArrayMethods = {\r\n\t\t\tpop: function proxiedPop(target, observed) {\r\n\t\t\t\tconst poppedIndex = target.length - 1;\r\n\t\t\t\tlet popResult = target.pop();\r\n\t\t\t\tif (popResult && typeof popResult === 'object') {\r\n\t\t\t\t\tconst tmpObserved = popResult[sysObsKey];\r\n\t\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\t\tpopResult = tmpObserved.revoke();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\tpublish changes\r\n\t\t\t\tconst ad = getAncestorInfo(observed);\r\n\t\t\t\tif (ad.observers.size) {\r\n\t\t\t\t\tad.path.push(poppedIndex);\r\n\t\t\t\t\tcallObservers(ad.observers, [{\r\n\t\t\t\t\t\ttype: DELETE,\r\n\t\t\t\t\t\tpath: ad.path,\r\n\t\t\t\t\t\toldValue: popResult,\r\n\t\t\t\t\t\tobject: observed.proxy\r\n\t\t\t\t\t}]);\r\n\t\t\t\t}\r\n\t\t\t\treturn popResult;\r\n\t\t\t},\r\n\t\t\tpush: function proxiedPush(target, observed) {\r\n\t\t\t\tlet i, l = arguments.length - 2, item, changes, path;\r\n\t\t\t\tconst\r\n\t\t\t\t\tpushContent = new Array(l),\r\n\t\t\t\t\tinitialLength = target.length;\r\n\r\n\t\t\t\tfor (i = 0; i < l; i++) {\r\n\t\t\t\t\titem = arguments[i + 2];\r\n\t\t\t\t\tif (item && typeof item === 'object' && !nonObservables.hasOwnProperty(item.constructor.name)) {\r\n\t\t\t\t\t\titem = Array.isArray(item)\r\n\t\t\t\t\t\t\t? new ArrayObserver({ target: item, ownKey: initialLength + i, parent: observed }).proxy\r\n\t\t\t\t\t\t\t: new ObjectObserver({ target: item, ownKey: initialLength + i, parent: observed }).proxy;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpushContent[i] = item;\r\n\t\t\t\t}\r\n\t\t\t\tconst pushResult = Reflect.apply(target.push, target, pushContent);\r\n\r\n\t\t\t\t//\tpublish changes\r\n\t\t\t\tconst ad = getAncestorInfo(observed);\r\n\t\t\t\tif (ad.observers.size) {\r\n\t\t\t\t\tchanges = [];\r\n\t\t\t\t\tfor (i = initialLength, l = target.length; i < l; i++) {\r\n\t\t\t\t\t\tpath = ad.path.slice(0);\r\n\t\t\t\t\t\tpath.push(i);\r\n\t\t\t\t\t\tchanges[i - initialLength] = {\r\n\t\t\t\t\t\t\ttype: INSERT,\r\n\t\t\t\t\t\t\tpath: path,\r\n\t\t\t\t\t\t\tvalue: target[i],\r\n\t\t\t\t\t\t\tobject: observed.proxy\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcallObservers(ad.observers, changes);\r\n\t\t\t\t}\r\n\t\t\t\treturn pushResult;\r\n\t\t\t},\r\n\t\t\tshift: function proxiedShift(target, observed) {\r\n\t\t\t\tlet shiftResult, i, l, item, changes, tmpObserved;\r\n\r\n\t\t\t\tshiftResult = target.shift();\r\n\t\t\t\tif (shiftResult && typeof shiftResult === 'object') {\r\n\t\t\t\t\ttmpObserved = shiftResult[sysObsKey];\r\n\t\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\t\tshiftResult = tmpObserved.revoke();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\tupdate indices of the remaining items\r\n\t\t\t\tfor (i = 0, l = target.length; i < l; i++) {\r\n\t\t\t\t\titem = target[i];\r\n\t\t\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\t\t\ttmpObserved = item[sysObsKey];\r\n\t\t\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\t\t\ttmpObserved.ownKey = i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\tpublish changes\r\n\t\t\t\tconst ad = getAncestorInfo(observed);\r\n\t\t\t\tif (ad.observers.size) {\r\n\t\t\t\t\tad.path.push(0);\r\n\t\t\t\t\tchanges = [{ type: DELETE, path: ad.path, oldValue: shiftResult, object: observed.proxy }];\r\n\t\t\t\t\tcallObservers(ad.observers, changes);\r\n\t\t\t\t}\r\n\t\t\t\treturn shiftResult;\r\n\t\t\t},\r\n\t\t\tunshift: function proxiedUnshift(target, observed) {\r\n\t\t\t\tconst unshiftContent = Array.from(arguments);\r\n\t\t\t\tlet changes;\r\n\t\t\t\tunshiftContent.splice(0, 2);\r\n\t\t\t\tunshiftContent.forEach((item, index) => {\r\n\t\t\t\t\tif (item && typeof item === 'object' && !nonObservables.hasOwnProperty(item.constructor.name)) {\r\n\t\t\t\t\t\tunshiftContent[index] = Array.isArray(item)\r\n\t\t\t\t\t\t\t? new ArrayObserver({ target: item, ownKey: index, parent: observed }).proxy\r\n\t\t\t\t\t\t\t: new ObjectObserver({ target: item, ownKey: index, parent: observed }).proxy;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tconst unshiftResult = Reflect.apply(target.unshift, target, unshiftContent);\r\n\t\t\t\tfor (let i = 0, l = target.length, item; i < l; i++) {\r\n\t\t\t\t\titem = target[i];\r\n\t\t\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\t\t\tconst tmpObserved = item[sysObsKey];\r\n\t\t\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\t\t\ttmpObserved.ownKey = i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\tpublish changes\r\n\t\t\t\tconst ad = getAncestorInfo(observed);\r\n\t\t\t\tif (ad.observers.size) {\r\n\t\t\t\t\tconst l = unshiftContent.length;\r\n\t\t\t\t\tlet path;\r\n\t\t\t\t\tchanges = new Array(l);\r\n\t\t\t\t\tfor (let i = 0; i < l; i++) {\r\n\t\t\t\t\t\tpath = ad.path.slice(0);\r\n\t\t\t\t\t\tpath.push(i);\r\n\t\t\t\t\t\tchanges[i] = { type: INSERT, path: path, value: target[i], object: observed.proxy };\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcallObservers(ad.observers, changes);\r\n\t\t\t\t}\r\n\t\t\t\treturn unshiftResult;\r\n\t\t\t},\r\n\t\t\treverse: function proxiedReverse(target, observed) {\r\n\t\t\t\tlet i, l, item, changes;\r\n\t\t\t\ttarget.reverse();\r\n\t\t\t\tfor (i = 0, l = target.length; i < l; i++) {\r\n\t\t\t\t\titem = target[i];\r\n\t\t\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\t\t\tconst tmpObserved = item[sysObsKey];\r\n\t\t\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\t\t\ttmpObserved.ownKey = i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\tpublish changes\r\n\t\t\t\tconst ad = getAncestorInfo(observed);\r\n\t\t\t\tif (ad.observers.size) {\r\n\t\t\t\t\tchanges = [{ type: REVERSE, path: ad.path, object: observed.proxy }];\r\n\t\t\t\t\tcallObservers(ad.observers, changes);\r\n\t\t\t\t}\r\n\t\t\t\treturn observed.proxy;\r\n\t\t\t},\r\n\t\t\tsort: function proxiedSort(target, observed, comparator) {\r\n\t\t\t\tlet i, l, item, changes;\r\n\t\t\t\ttarget.sort(comparator);\r\n\t\t\t\tfor (i = 0, l = target.length; i < l; i++) {\r\n\t\t\t\t\titem = target[i];\r\n\t\t\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\t\t\tconst tmpObserved = item[sysObsKey];\r\n\t\t\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\t\t\ttmpObserved.ownKey = i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\tpublish changes\r\n\t\t\t\tconst ad = getAncestorInfo(observed);\r\n\t\t\t\tif (ad.observers.size) {\r\n\t\t\t\t\tchanges = [{ type: SHUFFLE, path: ad.path, object: observed.proxy }];\r\n\t\t\t\t\tcallObservers(ad.observers, changes);\r\n\t\t\t\t}\r\n\t\t\t\treturn observed.proxy;\r\n\t\t\t},\r\n\t\t\tfill: function proxiedFill(target, observed) {\r\n\t\t\t\tconst\r\n\t\t\t\t\tad = getAncestorInfo(observed),\r\n\t\t\t\t\tchanges = [],\r\n\t\t\t\t\ttarLen = target.length,\r\n\t\t\t\t\tnormArgs = Array.from(arguments);\r\n\t\t\t\tnormArgs.splice(0, 2);\r\n\t\t\t\tconst\r\n\t\t\t\t\targLen = normArgs.length,\r\n\t\t\t\t\tstart = argLen < 2 ? 0 : (normArgs[1] < 0 ? tarLen + normArgs[1] : normArgs[1]),\r\n\t\t\t\t\tend = argLen < 3 ? tarLen : (normArgs[2] < 0 ? tarLen + normArgs[2] : normArgs[2]),\r\n\t\t\t\t\tprev = target.slice(0);\r\n\t\t\t\tReflect.apply(target.fill, target, normArgs);\r\n\r\n\t\t\t\tlet tmpObserved, path;\r\n\t\t\t\tfor (let i = start, item, tmpTarget; i < end; i++) {\r\n\t\t\t\t\titem = target[i];\r\n\t\t\t\t\tif (item && typeof item === 'object' && !nonObservables.hasOwnProperty(item.constructor.name)) {\r\n\t\t\t\t\t\ttarget[i] = Array.isArray(item)\r\n\t\t\t\t\t\t\t? new ArrayObserver({ target: item, ownKey: i, parent: observed }).proxy\r\n\t\t\t\t\t\t\t: new ObjectObserver({ target: item, ownKey: i, parent: observed }).proxy;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (prev.hasOwnProperty(i)) {\r\n\t\t\t\t\t\ttmpTarget = prev[i];\r\n\t\t\t\t\t\tif (tmpTarget && typeof tmpTarget === 'object') {\r\n\t\t\t\t\t\t\ttmpObserved = tmpTarget[sysObsKey];\r\n\t\t\t\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\t\t\t\ttmpTarget = tmpObserved.revoke();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tpath = ad.path.slice(0);\r\n\t\t\t\t\t\tpath.push(i);\r\n\t\t\t\t\t\tchanges.push({\r\n\t\t\t\t\t\t\ttype: UPDATE,\r\n\t\t\t\t\t\t\tpath: path,\r\n\t\t\t\t\t\t\tvalue: target[i],\r\n\t\t\t\t\t\t\toldValue: tmpTarget,\r\n\t\t\t\t\t\t\tobject: observed.proxy\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpath = ad.path.slice(0);\r\n\t\t\t\t\t\tpath.push(i);\r\n\t\t\t\t\t\tchanges.push({ type: INSERT, path: path, value: target[i], object: observed.proxy });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\tpublish changes\r\n\t\t\t\tif (ad.observers.size) {\r\n\t\t\t\t\tcallObservers(ad.observers, changes);\r\n\t\t\t\t}\r\n\t\t\t\treturn observed.proxy;\r\n\t\t\t},\r\n\t\t\tsplice: function proxiedSplice(target, observed) {\r\n\t\t\t\tconst\r\n\t\t\t\t\tad = getAncestorInfo(observed),\r\n\t\t\t\t\tchanges = [],\r\n\t\t\t\t\tspliceContent = Array.from(arguments),\r\n\t\t\t\t\ttarLen = target.length;\r\n\r\n\t\t\t\tspliceContent.splice(0, 2);\r\n\t\t\t\tconst splLen = spliceContent.length;\r\n\r\n\t\t\t\t//\tobservify the newcomers\r\n\t\t\t\tfor (let i = 2, item; i < splLen; i++) {\r\n\t\t\t\t\titem = spliceContent[i];\r\n\t\t\t\t\tif (item && typeof item === 'object' && !nonObservables.hasOwnProperty(item.constructor.name)) {\r\n\t\t\t\t\t\tspliceContent[i] = Array.isArray(item)\r\n\t\t\t\t\t\t\t? new ArrayObserver({ target: item, ownKey: i, parent: observed }).proxy\r\n\t\t\t\t\t\t\t: new ObjectObserver({ target: item, ownKey: i, parent: observed }).proxy;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\tcalculate pointers\r\n\t\t\t\tconst\r\n\t\t\t\t\tstartIndex = splLen === 0 ? 0 : (spliceContent[0] < 0 ? tarLen + spliceContent[0] : spliceContent[0]),\r\n\t\t\t\t\tremoved = splLen < 2 ? tarLen - startIndex : spliceContent[1],\r\n\t\t\t\t\tinserted = Math.max(splLen - 2, 0),\r\n\t\t\t\t\tspliceResult = Reflect.apply(target.splice, target, spliceContent),\r\n\t\t\t\t\tnewTarLen = target.length;\r\n\r\n\t\t\t\t//\treindex the paths\r\n\t\t\t\tlet tmpObserved;\r\n\t\t\t\tfor (let i = 0, item; i < newTarLen; i++) {\r\n\t\t\t\t\titem = target[i];\r\n\t\t\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\t\t\ttmpObserved = item[sysObsKey];\r\n\t\t\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\t\t\ttmpObserved.ownKey = i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\trevoke removed Observed\r\n\t\t\t\tlet i, l, item;\r\n\t\t\t\tfor (i = 0, l = spliceResult.length; i < l; i++) {\r\n\t\t\t\t\titem = spliceResult[i];\r\n\t\t\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\t\t\ttmpObserved = item[sysObsKey];\r\n\t\t\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\t\t\tspliceResult[i] = tmpObserved.revoke();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\tpublish changes\r\n\t\t\t\tif (ad.observers.size) {\r\n\t\t\t\t\tlet index, path;\r\n\t\t\t\t\tfor (index = 0; index < removed; index++) {\r\n\t\t\t\t\t\tpath = ad.path.slice(0);\r\n\t\t\t\t\t\tpath.push(startIndex + index);\r\n\t\t\t\t\t\tif (index < inserted) {\r\n\t\t\t\t\t\t\tchanges.push({\r\n\t\t\t\t\t\t\t\ttype: UPDATE,\r\n\t\t\t\t\t\t\t\tpath: path,\r\n\t\t\t\t\t\t\t\tvalue: target[startIndex + index],\r\n\t\t\t\t\t\t\t\toldValue: spliceResult[index],\r\n\t\t\t\t\t\t\t\tobject: observed.proxy\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tchanges.push({\r\n\t\t\t\t\t\t\t\ttype: DELETE,\r\n\t\t\t\t\t\t\t\tpath: path,\r\n\t\t\t\t\t\t\t\toldValue: spliceResult[index],\r\n\t\t\t\t\t\t\t\tobject: observed.proxy\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (; index < inserted; index++) {\r\n\t\t\t\t\t\tpath = ad.path.slice(0);\r\n\t\t\t\t\t\tpath.push(startIndex + index);\r\n\t\t\t\t\t\tchanges.push({\r\n\t\t\t\t\t\t\ttype: INSERT,\r\n\t\t\t\t\t\t\tpath: path,\r\n\t\t\t\t\t\t\tvalue: target[startIndex + index],\r\n\t\t\t\t\t\t\tobject: observed.proxy\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcallObservers(ad.observers, changes);\r\n\t\t\t\t}\r\n\t\t\t\treturn spliceResult;\r\n\t\t\t}\r\n\t\t};\r\n\t\tif (proxiedArrayMethods.hasOwnProperty(key)) {\r\n\t\t\treturn proxiedArrayMethods[key].bind(undefined, target, this);\r\n\t\t} else {\r\n\t\t\treturn target[key];\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass ObjectObserver extends ObserverBase {\r\n\tconstructor(properties) {\r\n\t\tsuper(properties, prepareObject);\r\n\t}\r\n\r\n\t//\treturns an unobserved graph (effectively this is an opposite of an ObjectObserver constructor logic)\r\n\trevoke() {\r\n\t\t//\trevoke native proxy\r\n\t\tthis.revokable.revoke();\r\n\r\n\t\t//\troll back observed graph to an unobserved one\r\n\t\tconst\r\n\t\t\ttarget = this.target,\r\n\t\t\tkeys = Object.keys(target);\r\n\t\tlet l = keys.length, key, item, tmpObserved;\r\n\t\twhile (l) {\r\n\t\t\tkey = keys[--l];\r\n\t\t\titem = target[key];\r\n\t\t\tif (item && typeof item === 'object') {\r\n\t\t\t\ttmpObserved = item[sysObsKey];\r\n\t\t\t\tif (tmpObserved) {\r\n\t\t\t\t\ttarget[key] = tmpObserved.revoke();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t}\r\n}\r\n\r\nclass Observable {\r\n\tconstructor() {\r\n\t\tthrow new Error('Observable MAY NOT be created via constructor, see \"Observable.from\" API');\r\n\t}\r\n\r\n\tstatic from(target) {\r\n\t\tif (target && typeof target === 'object' && !nonObservables.hasOwnProperty(target.constructor.name) && !('observe' in target) && !('unobserve' in target) && !('revoke' in target)) {\r\n\t\t\tconst observed = Array.isArray(target)\r\n\t\t\t\t? new ArrayObserver({ target: target, ownKey: null, parent: null })\r\n\t\t\t\t: new ObjectObserver({ target: target, ownKey: null, parent: null });\r\n\t\t\treturn observed.proxy;\r\n\t\t} else {\r\n\t\t\tif (!target || typeof target !== 'object') {\r\n\t\t\t\tthrow new Error('observable MAY ONLY be created from non-null object only');\r\n\t\t\t} else if ('observe' in target || 'unobserve' in target || 'revoke' in target) {\r\n\t\t\t\tthrow new Error('target object MUST NOT have nor own neither inherited properties from the following list: \"observe\", \"unobserve\", \"revoke\"');\r\n\t\t\t} else if (nonObservables.hasOwnProperty(target.constructor.name)) {\r\n\t\t\t\tthrow new Error(target + ' found to be one of non-observable object types: ' + nonObservables);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isObservable(input) {\r\n\t\treturn !!(input && input[sysObsKey] && input.observe);\r\n\t}\r\n}\r\n\r\nObject.freeze(Observable);\r\n\r\nexport { Observable };","// @flow\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\nexport function hasOwn (obj: Object, key: string): boolean %checks {\n    return hasOwnProperty.call(obj, key)\n}\n\nexport function isFile(val: mixed): boolean %checks {\n    return !!val && (val instanceof Blob);\n}\n\nexport function emptyValue(original: mixed): Array<any> | {} | '' | null {\n    if (original instanceof Array) {\n        return [];\n    }\n    if (typeof original === 'object') {\n        return {};\n    }\n    if (typeof original === 'string') {\n        return '';\n    }\n    return null;\n}\n\nexport function isObj(value: mixed): boolean %checks {\n    return value !== null && typeof value === 'object';\n}\n\nexport function isArr(value: mixed): %checks {\n    return value instanceof Array;\n}\n\nexport function isNil(value: mixed): %checks {\n    return value == null;\n}\n\nexport function isFunc(value: mixed): %checks {\n    return value instanceof Function;\n}\n\nexport function isStr(value: mixed): %checks {\n    return typeof value === 'string';\n}\n\nexport function escapeRegExp(string: string) {\n    return string.replace(/[\\\\^$.*+?()[\\]{}|]/g, '\\\\$&');\n}\n\nexport function containsFile(obj: any): boolean {\n    if (isArr(obj)) {\n        for (let i = 0; i < obj.length; i++) {\n            if (obj[i] instanceof File) {\n                return true;\n            }\n            if (isObj(obj[i])) {\n                return containsFile(obj[i]);\n            }\n        }\n    } else {\n        for (let key in obj) {\n            if (obj[key] instanceof File) {\n                return true;\n            }\n            if (isObj(obj[key])) {\n                return containsFile(obj[key]);\n            }\n        }\n    }\n    return false;\n}\n\nexport function arrayToObject(array: any[]): { [string]: any } {\n    let target = {};\n\n    array.forEach((item, index) => {\n        target[index] = item;\n    });\n\n    return target;\n}\n","// @flow\nimport {escapeRegExp, isArr, isNil} from \"./utils\";\n\ntype ErrorValue = string | Array<string>;\nexport type ErrorValues = { [string]: ErrorValue };\n\nclass Errors {\n\n    errors: ErrorValues;\n    elements: Array<{ key: string | RegExp, el: Element }>;\n\n    /**\n     * Create a new Errors instance.\n     */\n    constructor() {\n        this.errors = {};\n        this.elements = [];\n    }\n\n    /**\n     * Determine if an errors exists for the given field.\n     *\n     * @param {string|RegExp} field\n     */\n    has(field: string | RegExp): boolean {\n        if (field instanceof RegExp) {\n            return Object.keys(this.errors).some(key => field.test(key));\n        }\n        return this.errors.hasOwnProperty(field);\n    }\n\n    /**\n     * Determine if we have any errors.\n     */\n    any(): boolean {\n        return Object.keys(this.errors).length > 0;\n    }\n\n    /**\n     * Retrieve the error message for a field.\n     *\n     * @param {string} field\n     */\n    getFirst(field: string): ?string {\n        let error = this.get(field);\n        if (error) {\n            if (isArr(error)) {\n                return error.length ? error[0] : null;\n            } else {\n                return error || null;\n            }\n        }\n    }\n\n    get(field: string) {\n        return this.errors[field];\n    }\n\n    /**\n     * Add a new error message if one doesn't already exist.\n     *\n     * @param {string} field\n     * @param error\n     * @param force\n     */\n    add(field: string, error: ErrorValue, force: boolean = false) {\n        if (!this.has(field) || force) {\n            this.errors[field] = error;\n        }\n    }\n\n    /**\n     * Record the new errors.\n     *\n     * @param {object} errors\n     * @param timeout\n     */\n    record(errors: ErrorValues, timeout: ?(false | number) = 3000) {\n        this.errors = errors;\n        if (timeout) {\n            window.setTimeout(() => {\n                this.clear();\n            }, timeout);\n        }\n    }\n\n    /**\n     * Clear one or all error fields.\n     *\n     * @param {string|null} field\n     */\n    clear(field: ?string) {\n        if (field) {\n            delete this.errors[field];\n\n            return;\n        }\n\n        this.errors = {};\n    }\n\n    addElement(key: string | RegExp | string[], el: Element) {\n        if (isArr(key)) {\n            key.forEach(field => this.addElement(field, el));\n        } else {\n            this.elements.push({ key, el });\n        }\n    }\n\n    removeElement(element: Element) {\n        this.elements = this.elements.filter(({ el }) => el !== element);\n    }\n\n    removeElementKey(field: string | RegExp | string[]) {\n        if (isArr(field)) {\n            field.forEach(key => this.removeElementKey(key));\n        } else {\n            this.elements = this.elements.filter(({ key }) => key !== field);\n        }\n    }\n\n    hasElements(): boolean {\n        return !!this.elements.length;\n    }\n\n    scrollToFirst(options: ?boolean | {\n        behavior?: ('auto' | 'instant' | 'smooth'),\n        block?: ('start' | 'center' | 'end' | 'nearest'),\n        inline?: ('start' | 'center' | 'end' | 'nearest'),\n    } = null) {\n        options = isNil(options) ? { behavior: 'smooth', inline: 'center' } : options;\n\n        const element = this.elements.find(({ key, el }) => {\n            let rx: RegExp;\n            if (key instanceof RegExp) {\n                rx = key;\n            } else {\n                let expression = escapeRegExp(key);\n                rx = new RegExp(expression.replace('*', '.*'));\n            }\n\n            if (Object.keys(this.errors).some(key => rx.test(key))) {\n                return true;\n            }\n        });\n\n        if (element) {\n            element.el.scrollIntoView(options);\n        }\n    }\n}\n\nexport default Errors;\n","// @flow\nimport type { Method } from './flow';\nimport type { Data } from \"./Form\";\n\ntype Options = {\n    method: Method,\n    url: string,\n}\n\nexport default function http(method: Method, url: string, data: FormData | Data, options: Options) {\n    let xhr = new XMLHttpRequest();\n\n    let response = new Promise<XMLHttpRequest>((resolve, reject) => {\n        xhr.onload = () => {\n            if (xhr.status >= 200 && xhr.status < 300) {\n                resolve(xhr);\n            } else {\n                reject(xhr);\n            }\n        };\n        xhr.onerror = () => reject(xhr);\n    });\n\n    xhr.open(method, url);\n    if (data instanceof FormData) {\n        xhr.setRequestHeader('Content-Type', 'multipart/form-data');\n        xhr.send(data);\n    } else {\n        xhr.setRequestHeader('Content-Type', 'application/json');\n        xhr.send(JSON.stringify(data));\n    }\n\n    return response;\n}","// @flow\nimport { extractFiles } from 'extract-files';\nimport { sysObsKey, Observable } from './object-observer'\nimport {isFile, hasOwn, emptyValue, isObj, isNil, isArr, containsFile, isStr, arrayToObject} from \"./utils\";\nimport Errors from \"./Errors\";\nimport http from \"./http\";\nimport type { Method } from './flow';\nimport type { ErrorValues } from \"./Errors\";\n\ntype PrimitiveFormValue = string | number | boolean | null | typeof undefined;\n\ntype ScalarFormValue = PrimitiveFormValue | Blob | File;\n\ntype FormValue = ScalarFormValue | Array<?FormValue> | { [string]: ?FormValue };\n\nexport type Data = { [string]: FormValue };\n\ntype Options = {\n    method: Method,\n    baseUrl: string,\n    url: string,\n    graphql: string,\n    sendWith: (method: Method, url: string, data: FormData | Data, options: Options) => Promise<any>,\n    useJson: boolean,\n    strictMode: boolean,\n    isValidationError: ({ status: number }) => boolean,\n    formatData: (Data) => Data,\n    formatErrorResponse: (any) => ErrorValues,\n    timeout: false | number,\n    autoRemoveError: boolean,\n    clear: boolean,\n    quiet: boolean,\n}\n\ntype PartialOptions = $Shape<Options>;\n\nfunction parseOptions(method: ?(Method | PartialOptions), url: ?(string | PartialOptions), options: ?PartialOptions): PartialOptions {\n    method = method ? (isObj(method) ? method : { method }) : {};\n    url = url ? (isObj(url) ? url : { url }) : {};\n    options = options || {};\n\n    return {\n        ...options,\n        ...url,\n        ...method,\n    }\n}\n\nfunction flattenToQueryParams(data: Data | Array<FormValue>, prefix: string = ''): { [string]: string | Blob | File } {\n    let params = {};\n\n    if (isArr(data)) {\n        data.forEach(item => {\n            let paramKey = `${prefix}[]`;\n\n            if (isObj(item) && !isFile(item)) {\n                params = {\n                    ...params,\n                    ...flattenToQueryParams(item, paramKey)\n                };\n                return;\n            }\n\n            params[paramKey] = isFile(item) ? item : formValueToString(item);\n        })\n    } else {\n        Object.keys(data).forEach(key => {\n            let item = data[key];\n\n            let paramKey = prefix ? `${prefix}[${key}]` : '' + key;\n\n            if (isObj(item) && !isFile(item)) {\n                params = {\n                    ...params,\n                    ...flattenToQueryParams(item, paramKey)\n                };\n                return;\n            }\n\n            params[paramKey] = isFile(item) ? item : formValueToString(item);\n        });\n    }\n\n    return params;\n}\n\nfunction formValueToString(value: PrimitiveFormValue): string {\n    if (typeof value === 'boolean') {\n        return ''+(+value);\n    }\n    if (typeof value === 'number') {\n        return value.toString();\n    }\n    return value || '';\n}\n\nfunction bubbleError(error: Error | Object): Promise<Object> {\n    if (error instanceof Error) {\n        throw error;\n    }\n    return Promise.reject(error);\n}\n\nfunction isValidErrorObject(errors) {\n    return !errors ||\n        typeof errors !== 'object' ||\n        !Object.keys(errors).length ||\n        Object.values(errors).some(error => {\n            if (isArr(error)) {\n                return error.some(message => !isStr(message));\n            }\n            return !isStr(error);\n        });\n}\n\nclass Form {\n\n    errors: Errors;\n\n    data: Data;\n    originalData: Data;\n    originalConstantData: Data;\n    options: Options;\n\n    static defaultOptions: Options = {\n        // The default method type used by the submit method\n        method: 'post',\n\n        // If set any relative urls will be appended to the baseUrl\n        baseUrl: '',\n\n        // The url to submit the form\n        url: '',\n\n        // The endpoint to use for all graphql queries\n        graphql: 'graphql',\n\n        // A callback to implement custom HTTP logic.\n        // It is recommended to use this option so the form can utilise your HTTP library.\n        // The callback should return a promise that the form can use to handle the response.\n        sendWith: http,\n\n        // Set to true if you want the form to submit the data as a json object.\n        // This will pass the data as a JavaScript object to the sendWith callback so it is up to you to stringify it for your HTTP library.\n        // If the data contains a File or Blob object the data will be a FormData object regardless of this option (unless strictMode is true).\n        useJson: false,\n\n        // If set to true the form will throw an Error if the data has a File or Blob object and the useJson option is true.\n        strictMode: false,\n\n        // The status code for which the form should handle validation errors.\n        isValidationError: ({ status }) => status === 422,\n\n        // A callback to format the data before sending it.\n        formatData: (data) => data,\n\n        // A callback that should turn the error response into an object of field names and their validation errors.\n        formatErrorResponse: (response) => {\n            let data = response.data || response.response;\n            if (typeof data === 'string') {\n                try {\n                    data = JSON.parse(data);\n                } catch (e) {\n                    throw new Error('Unable to find errors in the response');\n                }\n            }\n            let errors: ErrorValues = data.errors;\n            if (isValidErrorObject(errors)) {\n                throw new Error('Unable to find errors in the response');\n            }\n            return errors;\n        },\n\n        // The number of milliseconds to wait before clearing the error messages.\n        // When timeout is false the error messages will stay indefinitely.\n        timeout: false,\n\n        // When set to true the errors for a field will be cleared when that field's value is updated.\n        autoRemoveError: true,\n\n        // When set to true, the data will be reverted to it's original values after a successful request.\n        clear: true,\n\n        // When set to true, no errors will be recorded.\n        quiet: false,\n    };\n\n    static setOptions = function (options: Options) {\n        Form.defaultOptions = {\n            ...Form.defaultOptions,\n            ...options\n        };\n    };\n\n    constructor(data: Data, options: ?Options) {\n        this.setOptions(options);\n\n        this.originalData = {};\n        this.originalConstantData = {};\n        this.data = Observable.from({});\n\n        this.append(data);\n\n        this.errors = new Errors();\n        // $FlowFixMe\n        this.data.observe(changes => {\n            changes.forEach(({ path }) => {\n                this.options.autoRemoveError && this.errors.clear(path.join('.'));\n            });\n        });\n    }\n\n    setOptions(options: ?Options) {\n        this.options = this.options || Form.defaultOptions;\n        if (options) {\n            this.options = {\n                ...this.options,\n                ...options,\n            }\n        }\n    }\n\n    append(key: string | Data, value: FormValue, constant: ?boolean = false): Form {\n        if (isObj(key)) {\n            Object.keys(key).forEach(field => {\n                this.append(field, key[field], constant);\n            });\n            return this;\n        }\n\n        if (constant) {\n            this.originalConstantData[key] = value;\n        } else {\n            this.originalData[key] = value;\n        }\n        if (!constant) {\n            this.data[key] = value;\n            this.defineProperty(key);\n        } else {\n            Object.defineProperty(\n                this,\n                key,\n                {\n                    get: () => undefined,\n                    set: () => {\n                        throw new Error(`The \"${key}\" value has been set as constant and cannot be modified`);\n                    }\n                }\n            );\n        }\n\n        return this;\n    }\n\n    defineProperty(key: string) {\n        Object.defineProperty(\n            this,\n            key,\n            {\n                get: () => this.data[key],\n                set: (newValue: FormValue) => {\n                    this.setData(key, newValue);\n                }\n            }\n        );\n    }\n\n    constantData(key: string | Data, value: FormValue): Form {\n        return this.append(key, value, true);\n    }\n\n    getData(): Data {\n        const data = {\n            ...this.data,\n            ...this.originalConstantData,\n        };\n        delete data[sysObsKey];\n        return data;\n    }\n\n    setData(key: string, value: FormValue) {\n        this.data[key] = value;\n    }\n\n    reset(): Form {\n        for (let field in this.data) {\n            this.data[field] = this.originalData[field];\n        }\n\n        this.errors.clear();\n\n        return this;\n    }\n\n    clear(field: string): Form {\n        if (hasOwn(this, field)) {\n            this.data[field] = emptyValue(this.data[field]);\n        }\n        return this;\n    }\n\n    addFileFromEvent(event: Event | DragEvent, key: ?string): Form {\n        let node = event.target;\n        if (!(node instanceof HTMLInputElement)) {\n            throw new Error('Incompatible event target, must be of type HTMLInputElement');\n        }\n        if (!key) {\n            key = node.name;\n        }\n        if (key in this && (node.value !== '')) {\n            if (event instanceof DragEvent) {\n                this.setData(key, event.dataTransfer && event.dataTransfer.files.length && event.dataTransfer.files[0]);\n            } else {\n                this.setData(key, node.files && node.files.length && node.files[0]);\n            }\n            node.value = '';\n        }\n        return this;\n    }\n\n    post(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('post', url, options);\n    }\n\n    put(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('put', url, options);\n    }\n\n    patch(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('patch', url, options);\n    }\n\n    delete(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('delete', url, options);\n    }\n\n    get(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('get', url, options);\n    }\n\n    graphql(query: string, options: ?Options): Promise<any> {\n        options = options || {};\n        const originalFormatDataCallback = options.formatData;\n\n        options.url = options.graphql || this.options.graphql;\n\n        options.useJson = !this.hasFile();\n\n        options.formatData = (data) => {\n            data = originalFormatDataCallback ? originalFormatDataCallback(data) : data;\n            const operations = {\n                query,\n                variables: data,\n            };\n\n            if (!this.hasFile()) {\n                return operations;\n            }\n            const { clone, files } = extractFiles(data);\n            operations.variables = clone;\n            return {\n                operations: JSON.stringify(operations),\n                map: JSON.stringify(arrayToObject(Array.from(files.values()))),\n                ...arrayToObject(Array.from(files.keys())),\n            };\n        };\n        return this.post(options);\n    }\n\n    submit(method: Method | Options, url: ?string | Options, options: ?Options): Promise<any> {\n        options = parseOptions(method, url, options);\n        const requestOptions = {\n            ...this.options,\n            ...options,\n        };\n\n        let formData, data = requestOptions.formatData(this.getData());\n        if (this.shouldConvertToFormData(requestOptions)) {\n            formData = new FormData();\n\n            let params = flattenToQueryParams(data);\n\n            Object.keys(params).forEach(key => {\n                formData.append(key, params[key]);\n            });\n\n            data = formData;\n        }\n\n        let httpAdapter = requestOptions.sendWith;\n\n        return httpAdapter(requestOptions.method, this.buildBaseUrl(requestOptions), data, requestOptions).then(response => {\n            if (requestOptions.isValidationError(response)) {\n                this.onFail(response, requestOptions);\n            } else {\n                this.onSuccess(requestOptions);\n            }\n            return response;\n        }).catch(error => {\n            if (requestOptions.isValidationError(error)) {\n                this.onFail(error, requestOptions);\n            }\n            return bubbleError(error);\n        });\n    }\n\n    shouldConvertToFormData(options: ?Options) {\n        options = options || this.options;\n        if (!options.useJson) {\n            return true;\n        }\n        if (this.hasFile() && options.strictMode) {\n            throw new Error('Cannot convert a file to JSON');\n        }\n        return this.hasFile();\n    }\n\n    hasFile(): boolean {\n        return containsFile(this.getData());\n    }\n\n    onSuccess(options: ?Options) {\n        options = options || this.options;\n        if (options.clear) {\n            this.reset();\n        }\n    }\n\n    onFail(error: XMLHttpRequest, options: ?Options) {\n        options = options || this.options;\n        if (!options.quiet) {\n            let errors = options.formatErrorResponse(error);\n            this.errors.record(errors, options.timeout);\n            if (this.errors.hasElements()) {\n                this.errors.scrollToFirst();\n            }\n        }\n    }\n\n    buildBaseUrl(options: ?Options) {\n        options = options || this.options;\n        if (options.url.includes('://')) {\n            return options.url;\n        }\n        let baseUrl = options.baseUrl;\n        let relativeUrl = options.url;\n\n        baseUrl = baseUrl.replace(/\\/+$/g, '');\n        relativeUrl = relativeUrl.replace(/^\\/+/g, '');\n\n        return `${baseUrl}/${relativeUrl}`;\n    }\n\n    makeUrl(options: ?Options): string {\n        let url = this.buildBaseUrl(options);\n        let queryStart = url.includes('?') ? '&' : '?';\n        let fullUrl = url + queryStart;\n        let properties = [];\n        let data = this.getData();\n\n        let params = flattenToQueryParams(data);\n\n        Object.keys(params).forEach(key => {\n            let item = params[key];\n\n            if (isFile(item)) {\n                throw new Error('Cannot convert file to a string');\n            }\n\n            properties.push(key + (isNil(item) ? '' : `=${item}`));\n        });\n        return fullUrl + properties.join('&');\n    }\n\n    addElement(key: string, el: HTMLElement) {\n        this.errors.addElement(key, el);\n    }\n\n    removeElement(el: HTMLElement) {\n        this.errors.removeElement(el);\n    }\n\n    removeElementKey(key: string) {\n        this.errors.removeElementKey(key);\n    }\n}\n\n\nexport default Form;\n"],"sourceRoot":""}