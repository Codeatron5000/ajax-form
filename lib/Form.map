{"version":3,"file":"Form.js","mappings":"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","sources":["webpack://formla/webpack/universalModuleDefinition","webpack://formla/./node_modules/extract-files/lib/ReactNativeFile.js","webpack://formla/./node_modules/extract-files/lib/extractFiles.js","webpack://formla/./node_modules/extract-files/lib/index.js","webpack://formla/webpack/bootstrap","webpack://formla/webpack/runtime/define property getters","webpack://formla/webpack/runtime/hasOwnProperty shorthand","webpack://formla/webpack/runtime/make namespace object","webpack://formla/./src/utils.js","webpack://formla/./src/Errors.js","webpack://formla/./src/http.js","webpack://formla/./src/Form.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"formla\"] = factory();\n\telse\n\t\troot[\"formla\"] = factory();\n})(self, function() {\nreturn ","'use strict'\n\nexports.__esModule = true\nexports.ReactNativeFile = void 0\n\nvar ReactNativeFile = function ReactNativeFile(_ref) {\n  var uri = _ref.uri,\n    name = _ref.name,\n    type = _ref.type\n  this.uri = uri\n  this.name = name\n  this.type = type\n}\n\nexports.ReactNativeFile = ReactNativeFile\n","'use strict'\n\nexports.__esModule = true\nexports.extractFiles = extractFiles\n\nvar _ReactNativeFile = require('./ReactNativeFile')\n\nfunction extractFiles(value, path) {\n  if (path === void 0) {\n    path = ''\n  }\n\n  var clone\n  var files = new Map()\n\n  function addFile(paths, file) {\n    var storedPaths = files.get(file)\n    if (storedPaths) storedPaths.push.apply(storedPaths, paths)\n    else files.set(file, paths)\n  }\n\n  if (\n    (typeof File !== 'undefined' && value instanceof File) ||\n    (typeof Blob !== 'undefined' && value instanceof Blob) ||\n    value instanceof _ReactNativeFile.ReactNativeFile\n  ) {\n    clone = null\n    addFile([path], value)\n  } else {\n    var prefix = path ? path + '.' : ''\n    if (typeof FileList !== 'undefined' && value instanceof FileList)\n      clone = Array.prototype.map.call(value, function(file, i) {\n        addFile(['' + prefix + i], file)\n        return null\n      })\n    else if (Array.isArray(value))\n      clone = value.map(function(child, i) {\n        var result = extractFiles(child, '' + prefix + i)\n        result.files.forEach(addFile)\n        return result.clone\n      })\n    else if (value && value.constructor === Object) {\n      clone = {}\n\n      for (var i in value) {\n        var result = extractFiles(value[i], '' + prefix + i)\n        result.files.forEach(addFile)\n        clone[i] = result.clone\n      }\n    } else clone = value\n  }\n\n  return {\n    clone: clone,\n    files: files\n  }\n}\n","'use strict'\n\nexports.__esModule = true\nexports.ReactNativeFile = exports.extractFiles = void 0\n\nvar _extractFiles = require('./extractFiles')\n\nexports.extractFiles = _extractFiles.extractFiles\n\nvar _ReactNativeFile = require('./ReactNativeFile')\n\nexports.ReactNativeFile = _ReactNativeFile.ReactNativeFile\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// @flow\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\nexport function hasOwn (obj: Object, key: string): boolean %checks {\n    return hasOwnProperty.call(obj, key)\n}\n\nexport function isFile(val: mixed): boolean %checks {\n    return !!val && (val instanceof Blob);\n}\n\nexport function clone(obj: any): any {\n    if (isArr(obj)) {\n        return obj.map(clone);\n    }\n    if (obj === null || obj === undefined) {\n        return null;\n    }\n    if (isFile(obj) || ['number', 'string', 'boolean'].includes(typeof obj)) {\n        return obj;\n    }\n    if (isObj(obj)) {\n        let target = {};\n\n        Object.keys(obj).forEach((key) => target[key] = clone(obj[key]));\n\n        return target;\n    }\n}\n\nexport function emptyValue(original: mixed): Array<any> | {} | '' | null {\n    if (original instanceof Array) {\n        return [];\n    }\n    if (typeof original === 'object') {\n        return {};\n    }\n    if (typeof original === 'string') {\n        return '';\n    }\n    return null;\n}\n\nexport function isObj(value: mixed): boolean %checks {\n    return value !== null && typeof value === 'object';\n}\n\nexport function isArr(value: mixed): %checks {\n    return value instanceof Array;\n}\n\nexport function isNil(value: mixed): %checks {\n    return value == null;\n}\n\nexport function isFunc(value: mixed): %checks {\n    return value instanceof Function;\n}\n\nexport function isStr(value: mixed): %checks {\n    return typeof value === 'string';\n}\n\nexport function escapeRegExp(string: string) {\n    return string.replace(/[\\\\^$.*+?()[\\]{}|]/g, '\\\\$&');\n}\n\nexport function containsFile(obj: any): boolean {\n    if (isArr(obj)) {\n        for (let i = 0; i < obj.length; i++) {\n            if (obj[i] instanceof File) {\n                return true;\n            }\n            if (isObj(obj[i])) {\n                return containsFile(obj[i]);\n            }\n        }\n    } else {\n        for (let key in obj) {\n            if (obj[key] instanceof File) {\n                return true;\n            }\n            if (isObj(obj[key])) {\n                return containsFile(obj[key]);\n            }\n        }\n    }\n    return false;\n}\n\nexport function arrayToObject(array: any[]): { [string]: any } {\n    let target = {};\n\n    array.forEach((item, index) => {\n        target[index] = item;\n    });\n\n    return target;\n}\n\nexport function isInViewport(el: Element) {\n    const boundingBox = el.getBoundingClientRect();\n    // $FlowFixMe\n    return boundingBox.top >= 0 && boundingBox.bottom <= (window.innerHeight || window.document.documentElement.clientHeight);\n}\n","// @flow\nimport { escapeRegExp, isArr, isInViewport, isNil } from \"./utils\";\n\ntype ErrorValue = string | Array<string>;\nexport type ErrorValues = { [string]: ErrorValue };\n\nclass Errors {\n\n    errors: ErrorValues;\n    elements: Array<{ key: string | RegExp, el: Element }>;\n\n    /**\n     * Create a new Errors instance.\n     */\n    constructor() {\n        this.errors = {};\n        this.elements = [];\n    }\n\n    /**\n     * Determine if an errors exists for the given field.\n     *\n     * @param {string|RegExp} field\n     */\n    has(field: string | RegExp): boolean {\n        if (field instanceof RegExp) {\n            return Object.keys(this.errors).some(key => field.test(key));\n        }\n        return this.errors.hasOwnProperty(field);\n    }\n\n    /**\n     * Determine if we have any errors.\n     */\n    any(): boolean {\n        return Object.keys(this.errors).length > 0;\n    }\n\n    /**\n     * Retrieve the error message for a field.\n     *\n     * @param {string} field\n     */\n    getFirst(field: string, matchWildCards: boolean = true): ?string {\n        let error = this.get(field, matchWildCards);\n        if (error) {\n            if (isArr(error)) {\n                return error.length ? error[0] : null;\n            } else {\n                return error || null;\n            }\n        }\n    }\n\n    get(field: string, matchWildCards: boolean = true) {\n        if (field.includes('*') && matchWildCards) {\n            const regExpStr = field.replace(/[.+?^${}()|[\\]\\\\]/g, '\\\\$&')\n                .replace('*', '(.*)');\n            const regExp = new RegExp(regExpStr);\n            let errors = [];\n            Object.keys(this.errors).forEach((key) => {\n                if (regExp.test(key)) {\n                    const keyErrors = this.errors[key];\n                    if (isArr(keyErrors)) {\n                        errors = errors.concat(keyErrors);\n                    } else {\n                        errors.push(keyErrors);\n                    }\n                }\n            });\n            return errors;\n        }\n        return this.errors[field];\n    }\n\n    /**\n     * Add a new error message if one doesn't already exist.\n     *\n     * @param {string} field\n     * @param error\n     * @param force\n     */\n    add(field: string, error: ErrorValue, force: boolean = false) {\n        if (!this.has(field) || force) {\n            this.errors[field] = error;\n        }\n    }\n\n    /**\n     * Record the new errors.\n     *\n     * @param {object} errors\n     * @param timeout\n     */\n    record(errors: ErrorValues, timeout: ?(false | number) = 3000) {\n        this.errors = errors;\n        if (timeout) {\n            window.setTimeout(() => {\n                this.clear();\n            }, timeout);\n        }\n    }\n\n    /**\n     * Clear one or all error fields.\n     *\n     * @param {string|null} field\n     */\n    clear(field: ?string) {\n        if (field) {\n            delete this.errors[field];\n\n            return;\n        }\n\n        this.errors = {};\n    }\n\n    addElement(key: string | RegExp | string[], el: Element) {\n        if (isArr(key)) {\n            key.forEach(field => this.addElement(field, el));\n        } else {\n            this.elements.push({ key, el });\n        }\n    }\n\n    removeElement(element: Element) {\n        this.elements = this.elements.filter(({ el }) => el !== element);\n    }\n\n    removeElementKey(field: string | RegExp | string[]) {\n        if (isArr(field)) {\n            field.forEach(key => this.removeElementKey(key));\n        } else {\n            this.elements = this.elements.filter(({ key }) => key !== field);\n        }\n    }\n\n    hasElements(): boolean {\n        return !!this.elements.length;\n    }\n\n    scrollToFirst(options: ?boolean | {\n        behavior?: ('auto' | 'instant' | 'smooth'),\n        block?: ('start' | 'center' | 'end' | 'nearest'),\n        inline?: ('start' | 'center' | 'end' | 'nearest'),\n    } = null) {\n        options = isNil(options) ? { behavior: 'smooth', inline: 'center' } : options;\n\n        const element = this.elements.find(({ key, el }) => {\n            let rx: RegExp;\n            if (key instanceof RegExp) {\n                rx = key;\n            } else {\n                let expression = escapeRegExp(key);\n                rx = new RegExp(expression.replace('*', '.*'));\n            }\n\n            if (Object.keys(this.errors).some(key => rx.test(key))) {\n                return true;\n            }\n        });\n\n        if (element && !isInViewport(element.el)) {\n            element.el.scrollIntoView(options);\n        }\n    }\n}\n\nexport default Errors;\n","// @flow\nimport type { Method } from './flow';\nimport type { Data } from \"./Form\";\n\ntype Options = {\n    method: Method,\n    url: string,\n}\n\nexport default function http(method: Method, url: string, data: FormData | Data, options: Options) {\n    let xhr = new XMLHttpRequest();\n\n    let response = new Promise<XMLHttpRequest>((resolve, reject) => {\n        xhr.onload = () => {\n            if (xhr.status >= 200 && xhr.status < 300) {\n                resolve(xhr);\n            } else {\n                reject(xhr);\n            }\n        };\n        xhr.onerror = () => reject(xhr);\n    });\n\n    xhr.open(method, url);\n    if (data instanceof FormData) {\n        xhr.setRequestHeader('Content-Type', 'multipart/form-data');\n        xhr.send(data);\n    } else {\n        xhr.setRequestHeader('Content-Type', 'application/json');\n        xhr.send(JSON.stringify(data));\n    }\n\n    return response;\n}","// @flow\nimport { extractFiles } from 'extract-files';\nimport type { ErrorValues } from './Errors';\nimport Errors from './Errors';\nimport type { Method } from './flow';\nimport http from './http';\nimport { arrayToObject, clone, containsFile, emptyValue, hasOwn, isArr, isFile, isNil, isObj, isStr, isFunc } from './utils';\n\ntype PrimitiveFormValue = string | number | boolean | null | typeof undefined;\n\ntype ScalarFormValue = PrimitiveFormValue | Blob | File;\n\ntype FormValue = ScalarFormValue | Array<?FormValue> | { [string]: ?FormValue };\n\nexport type Data = { [string]: FormValue };\n\ntype DataCb = () => Data;\n\ntype Options = {\n    method: Method,\n    baseUrl: string,\n    url: string,\n    graphql: string,\n    sendWith: (method: Method, url: string, data: FormData | Data, options: Options) => Promise<any>,\n    useJson: boolean,\n    strictMode: boolean,\n    isValidationError: ({ status: number }) => boolean,\n    formatData: (Data) => Data,\n    formatErrorResponse: (any) => ErrorValues,\n    timeout: false | number,\n    autoRemoveError: boolean,\n    clear: boolean,\n    quiet: boolean,\n    clone: boolean,\n    addAppendToDataCallback: boolean,\n}\n\ntype PartialOptions = $Shape<Options>;\n\nfunction set(obj: FormValue, keys: number|string|string[], value: FormValue) {\n    if (isStr(keys) || (typeof keys === 'number')) {\n        keys = (''+keys).split('.');\n    }\n\n    let key = keys.shift();\n\n    if (!isObj(obj) || isFile(obj)) {\n        return;\n    }\n\n    if (!keys.length) {\n        if (isArr(obj)) {\n            obj[+key] = value;\n        } else {\n            obj[key] = value;\n        }\n    } else {\n        if (!hasOwn(obj, key)) {\n            if (isArr(obj)) {\n                obj[+key] = key === '0' ? [] : {};\n            } else {\n                obj[key] = key === '0' ? [] : {};\n            }\n        }\n        if (isArr(obj)) {\n            set(obj[+key], keys, value);\n        } else {\n            set(obj[key], keys, value);\n        }\n    }\n}\n\nfunction get(obj: FormValue, keys: string|string[]): FormValue {\n    if (isStr(keys)) {\n        keys = keys.split('.');\n    }\n\n    let key = keys.shift();\n\n    if (!isObj(obj) || isFile(obj) || !hasOwn(obj, key)) {\n        return undefined;\n    }\n\n    let result: FormValue;\n\n    if (isArr(obj)) {\n        result = obj[+key];\n    } else if (isObj(obj) && !isFile(obj)) {\n        result = obj[key];\n    } else {\n        result = undefined;\n    }\n\n    if (!keys.length) {\n        return result;\n    }\n    get(result, keys);\n}\n\nfunction parseOptions(method: ?(Method | PartialOptions), url: ?(string | PartialOptions), options: ?PartialOptions): PartialOptions {\n    method = method ? (isObj(method) ? method : { method }) : {};\n    url = url ? (isObj(url) ? url : { url }) : {};\n    options = options || {};\n\n    return {\n        ...options,\n        ...url,\n        ...method,\n    }\n}\n\nfunction flattenToQueryParams(data: Data | Array<FormValue>, prefix: string = ''): { [string]: string | Blob | File } {\n    let params = {};\n\n    if (isArr(data)) {\n        data.forEach(item => {\n            let paramKey = `${prefix}[]`;\n\n            if (isObj(item) && !isFile(item)) {\n                params = {\n                    ...params,\n                    ...flattenToQueryParams(item, paramKey)\n                };\n                return;\n            }\n\n            params[paramKey] = isFile(item) ? item : formValueToString(item);\n        })\n    } else {\n        Object.keys(data).forEach(key => {\n            let item = data[key];\n\n            let paramKey = prefix ? `${prefix}[${key}]` : '' + key;\n\n            if (isObj(item) && !isFile(item)) {\n                params = {\n                    ...params,\n                    ...flattenToQueryParams(item, paramKey)\n                };\n                return;\n            }\n\n            params[paramKey] = isFile(item) ? item : formValueToString(item);\n        });\n    }\n\n    return params;\n}\n\nfunction formValueToString(value: PrimitiveFormValue): string {\n    if (typeof value === 'boolean') {\n        return ''+(+value);\n    }\n    if (typeof value === 'number') {\n        return value.toString();\n    }\n    return value || '';\n}\n\nfunction bubbleError(error: Error | Object): Promise<Object> {\n    if (error instanceof Error) {\n        throw error;\n    }\n    return Promise.reject(error);\n}\n\nfunction isValidErrorObject(errors) {\n    return !errors ||\n        typeof errors !== 'object' ||\n        !Object.keys(errors).length ||\n        Object.values(errors).some(error => {\n            if (isArr(error)) {\n                return error.some(message => !isStr(message));\n            }\n            return !isStr(error);\n        });\n}\n\nclass Form {\n\n    _errors: Errors;\n\n    _data: Data;\n    _dataCb: ?DataCb;\n    _originalData: Data;\n    _originalConstantData: Data;\n    _options: Options;\n\n    static defaultOptions: Options = {\n        // The default method type used by the submit method\n        method: 'post',\n\n        // If set any relative urls will be appended to the baseUrl\n        baseUrl: '',\n\n        // The url to submit the form\n        url: '',\n\n        // The endpoint to use for all graphql queries\n        graphql: 'graphql',\n\n        // A callback to implement custom HTTP logic.\n        // It is recommended to use this option so the form can utilise your HTTP library.\n        // The callback should return a promise that the form can use to handle the response.\n        sendWith: http,\n\n        // Set to true if you want the form to submit the data as a json object.\n        // This will pass the data as a JavaScript object to the sendWith callback so it is up to you to stringify it for your HTTP library.\n        // If the data contains a File or Blob object the data will be a FormData object regardless of this option (unless strictMode is true).\n        useJson: false,\n\n        // If set to true the form will use follow the `useJson` option even if the data contains non JSONable values (including files).\n        strictMode: false,\n\n        // The status code for which the form should handle validation errors.\n        isValidationError: ({ status }) => status === 422,\n\n        // A callback to format the data before sending it.\n        formatData: (data) => data,\n\n        // A callback that should turn the error response into an object of field names and their validation errors.\n        formatErrorResponse: (response) => {\n            let data = response.data || response.response;\n            if (typeof data === 'string') {\n                try {\n                    data = JSON.parse(data);\n                } catch (e) {\n                    throw new Error('Unable to find errors in the response');\n                }\n            }\n            let errors: ErrorValues = data.errors;\n            if (isValidErrorObject(errors)) {\n                throw new Error('Unable to find errors in the response');\n            }\n            return errors;\n        },\n\n        // The number of milliseconds to wait before clearing the error messages.\n        // When timeout is false the error messages will stay indefinitely.\n        timeout: false,\n\n        // When set to true the errors for a field will be cleared when that field's value is updated.\n        autoRemoveError: true,\n\n        // When set to true, the data will be reverted to it's original values after a successful request.\n        clear: true,\n\n        // When set to true, no errors will be recorded.\n        quiet: false,\n\n        // If clone is set to false any nested objects and arrays will be stored in the form by reference.\n        clone: true,\n\n        // If the form is called with a callback constructor then any data added\n        // later will be included when the form is reset. Set this to false to\n        // have the form reset using just the callback.\n        addAppendToDataCallback: true,\n    };\n\n    static setOptions = function (options: Options) {\n        Form.defaultOptions = {\n            ...Form.defaultOptions,\n            ...options\n        };\n    };\n\n    constructor(data: Data|DataCb, options: ?Options) {\n        this.setOptions(options);\n\n        if (isFunc(data)) {\n            this._dataCb = data;\n            data = data();\n        }\n\n        this._originalData = {};\n        this._originalConstantData = {};\n        this._data = {};\n\n        // $FlowFixMe\n        this.append(data, undefined, false, false);\n\n        this._errors = new Errors();\n    }\n\n    setOptions(options: ?Options) {\n        this._options = this._options || Form.defaultOptions;\n        if (options) {\n            this._options = {\n                ...this._options,\n                ...options,\n            }\n        }\n    }\n\n    append(key: string | Data, value: FormValue, constant: ?boolean = false, addToDataCallback: ?boolean = true): Form {\n        if (this._dataCb && !constant && this._options.addAppendToDataCallback && addToDataCallback) {\n            const originalCb = this._dataCb;\n            this._dataCb = () => {\n                const data = originalCb();\n                if (isObj(key)) {\n                    return {\n                        ...data,\n                        ...key\n                    };\n                }\n                return {\n                    ...data,\n                    [key]: value,\n                };\n            }\n        }\n\n        if (isObj(key)) {\n            Object.keys(key).forEach(field => {\n                this.append(field, key[field], constant, false);\n            });\n            return this;\n        }\n\n        value = this.parseData(value);\n        if (constant) {\n            set(this._originalConstantData, key, value);\n        } else {\n            set(this._originalData, key, this.parseData(value));\n        }\n        if (!constant) {\n            set(this._data, key, value);\n            this.defineProperty(key);\n        } else {\n            Object.defineProperty(\n                this,\n                key,\n                {\n                    get: () => undefined,\n                    set: () => {\n                        throw new Error(`The \"${key}\" value has been set as constant and cannot be modified`);\n                    }\n                }\n            );\n        }\n\n        return this;\n    }\n\n    defineProperty(key: string) {\n        Object.defineProperty(\n            this,\n            key,\n            {\n                configurable: true,\n                enumerable: true,\n                get: () => get(this._data, key),\n                set: (newValue: FormValue) => {\n                    this.setData(key, newValue);\n                }\n            }\n        );\n    }\n\n    constantData(key: string | Data, value: FormValue): Form {\n        return this.append(key, value, true, false);\n    }\n\n    getData(): Data {\n        return {\n            ...this._data,\n            ...this._originalConstantData,\n        }\n    }\n\n    setData(key: string, value: FormValue) {\n        set(this._data, key, value);\n        if (this._options.autoRemoveError) {\n            this._errors.clear(key);\n        }\n    }\n\n    errors(): Errors {\n        return this._errors;\n    }\n\n    reset(): Form {\n        const originalData = this._dataCb ? this._dataCb() : this._originalData;\n\n        for (let field in this._data) {\n            // $FlowFixMe\n            delete this[field];\n        }\n\n        this._originalData = {};\n        this._data = {};\n\n        this.append(originalData, undefined, false, false);\n\n        this._errors.clear();\n\n        return this;\n    }\n\n    clear(field: string): Form {\n        if (hasOwn(this, field)) {\n            set(this._data, field, emptyValue(get(this._data, field)));\n        }\n        return this;\n    }\n\n    parseData(data: FormValue): FormValue {\n        return this._options.clone ? clone(data) : data;\n    }\n\n    addFileFromEvent(event: Event | DragEvent, key: ?string): Form {\n        let node = event.target;\n        if (!(node instanceof HTMLInputElement)) {\n            throw new Error('Incompatible event target, must be of type HTMLInputElement');\n        }\n        if (!key) {\n            key = node.name;\n        }\n        if (key in this && (node.value !== '')) {\n            if (event instanceof DragEvent) {\n                this.setData(key, event.dataTransfer && event.dataTransfer.files.length && event.dataTransfer.files[0]);\n            } else {\n                this.setData(key, node.files && node.files.length && node.files[0]);\n            }\n            node.value = '';\n        }\n        return this;\n    }\n\n    post(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('post', url, options);\n    }\n\n    put(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('put', url, options);\n    }\n\n    patch(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('patch', url, options);\n    }\n\n    delete(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('delete', url, options);\n    }\n\n    get(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('get', url, options);\n    }\n\n    graphql(query: string, options: ?Options): Promise<any> {\n        options = options || {};\n        const originalFormatDataCallback = options.formatData || this._options.formatData;\n\n        options.url = options.graphql || this._options.graphql;\n\n        options.useJson = !this.hasFile();\n\n        options.formatData = (data) => {\n            data = originalFormatDataCallback ? originalFormatDataCallback(data) : data;\n            const operations = {\n                query,\n                variables: data,\n            };\n\n            if (!this.hasFile()) {\n                return operations;\n            }\n            const { clone, files } = extractFiles(data);\n            operations.variables = clone;\n            return {\n                operations: JSON.stringify(operations),\n                map: JSON.stringify(arrayToObject(Array.from(files.values()))),\n                ...arrayToObject(Array.from(files.keys())),\n            };\n        };\n        return this.post(options);\n    }\n\n    submit(method: Method | Options, url: ?string | Options, options: ?Options): Promise<any> {\n        options = parseOptions(method, url, options);\n        const requestOptions = {\n            ...this._options,\n            ...options,\n        };\n\n        let formData, data = requestOptions.formatData(this.getData());\n        if (this.shouldConvertToFormData(requestOptions)) {\n            formData = new FormData();\n\n            let params = flattenToQueryParams(data);\n\n            Object.keys(params).forEach(key => {\n                formData.append(key, params[key]);\n            });\n\n            data = formData;\n        }\n\n        let httpAdapter = requestOptions.sendWith;\n\n        return httpAdapter(requestOptions.method, this.buildBaseUrl(requestOptions), data, requestOptions).then(response => {\n            if (requestOptions.isValidationError(response)) {\n                this.onFail(response, requestOptions);\n            } else {\n                this.onSuccess(requestOptions);\n            }\n            return response;\n        }).catch(error => {\n            if (requestOptions.isValidationError(error)) {\n                this.onFail(error, requestOptions);\n            }\n            return bubbleError(error);\n        });\n    }\n\n    shouldConvertToFormData(options: ?Options) {\n        options = options || this._options;\n        if (options.strictMode) {\n            return !options.useJson;\n        }\n        return !options.useJson || this.hasFile();\n    }\n\n    hasFile(): boolean {\n        return containsFile(this.getData());\n    }\n\n    onSuccess(options: ?Options) {\n        options = options || this._options;\n        if (options.clear) {\n            this.reset();\n        }\n    }\n\n    onFail(error: XMLHttpRequest, options: ?Options) {\n        options = options || this._options;\n        if (!options.quiet) {\n            let errors = options.formatErrorResponse(error);\n            this._errors.record(errors, options.timeout);\n            if (this._errors.hasElements()) {\n                this._errors.scrollToFirst();\n            }\n        }\n    }\n\n    buildBaseUrl(options: ?Options) {\n        options = options || this._options;\n        if (options.url.includes('://')) {\n            return options.url;\n        }\n        let baseUrl = options.baseUrl;\n        let relativeUrl = options.url;\n\n        baseUrl = baseUrl.replace(/\\/+$/g, '');\n        relativeUrl = relativeUrl.replace(/^\\/+/g, '');\n\n        return `${baseUrl}/${relativeUrl}`;\n    }\n\n    makeUrl(options: ?Options): string {\n        let url = this.buildBaseUrl(options);\n        let queryStart = url.includes('?') ? '&' : '?';\n        let fullUrl = url + queryStart;\n        let properties = [];\n        let data = this.getData();\n\n        let params = flattenToQueryParams(data);\n\n        Object.keys(params).forEach(key => {\n            let item = params[key];\n\n            if (isFile(item)) {\n                throw new Error('Cannot convert file to a string');\n            }\n\n            properties.push(key + (isNil(item) ? '' : `=${item}`));\n        });\n        return fullUrl + properties.join('&');\n    }\n\n    addElement(key: string, el: HTMLElement) {\n        this._errors.addElement(key, el);\n    }\n\n    removeElement(el: HTMLElement) {\n        this._errors.removeElement(el);\n    }\n\n    removeElementKey(key: string) {\n        this._errors.removeElementKey(key);\n    }\n}\n\n\nexport default Form;\n"],"names":["hasOwnProperty","Object","prototype","hasOwn","obj","key","call","isFile","val","Blob","clone","isArr","map","undefined","includes","isObj","target","keys","forEach","emptyValue","original","Array","value","isNil","isFunc","Function","isStr","escapeRegExp","string","replace","containsFile","i","length","File","arrayToObject","array","item","index","isInViewport","el","boundingBox","getBoundingClientRect","top","bottom","window","innerHeight","document","documentElement","clientHeight","Errors","constructor","errors","elements","has","field","RegExp","some","test","any","getFirst","matchWildCards","error","get","regExpStr","regExp","keyErrors","concat","push","add","force","record","timeout","setTimeout","clear","addElement","removeElement","element","filter","removeElementKey","hasElements","scrollToFirst","options","behavior","inline","find","rx","expression","scrollIntoView","http","method","url","data","xhr","XMLHttpRequest","response","Promise","resolve","reject","onload","status","onerror","open","FormData","setRequestHeader","send","JSON","stringify","extractFiles","set","split","shift","result","parseOptions","flattenToQueryParams","prefix","params","paramKey","formValueToString","toString","bubbleError","Error","isValidErrorObject","values","message","Form","setOptions","_dataCb","_originalData","_originalConstantData","_data","append","_errors","_options","defaultOptions","constant","addToDataCallback","addAppendToDataCallback","originalCb","parseData","defineProperty","configurable","enumerable","newValue","setData","constantData","getData","autoRemoveError","reset","originalData","addFileFromEvent","event","node","HTMLInputElement","name","DragEvent","dataTransfer","files","post","submit","put","patch","delete","graphql","query","originalFormatDataCallback","formatData","useJson","hasFile","operations","variables","from","requestOptions","formData","shouldConvertToFormData","httpAdapter","sendWith","buildBaseUrl","then","isValidationError","onFail","onSuccess","catch","strictMode","quiet","formatErrorResponse","baseUrl","relativeUrl","makeUrl","queryStart","fullUrl","properties","join","parse","e"],"sourceRoot":""}