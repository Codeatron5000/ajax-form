{"version":3,"sources":["webpack://formla/webpack/universalModuleDefinition","webpack://formla/webpack/bootstrap","webpack://formla/./node_modules/extract-files/lib/ReactNativeFile.mjs","webpack://formla/./node_modules/extract-files/lib/extractFiles.mjs","webpack://formla/./src/utils.js","webpack://formla/./src/Errors.js","webpack://formla/./src/http.js","webpack://formla/./src/Form.js"],"names":["hasOwnProperty","Object","prototype","hasOwn","obj","key","call","isFile","val","Blob","clone","JSON","parse","stringify","emptyValue","original","Array","isObj","value","isArr","isNil","isFunc","Function","isStr","escapeRegExp","string","replace","containsFile","i","length","File","arrayToObject","array","target","forEach","item","index","Errors","errors","elements","field","RegExp","keys","some","test","error","get","force","has","timeout","window","setTimeout","clear","el","addElement","push","element","filter","removeElementKey","options","behavior","inline","find","rx","expression","scrollIntoView","http","method","url","data","xhr","XMLHttpRequest","response","Promise","resolve","reject","onload","status","onerror","open","FormData","setRequestHeader","send","parseOptions","flattenToQueryParams","prefix","params","paramKey","formValueToString","toString","bubbleError","Error","isValidErrorObject","values","message","Form","setOptions","originalData","originalConstantData","append","defaultOptions","constant","parseData","defineProperty","undefined","set","newValue","setData","autoRemoveError","event","node","HTMLInputElement","name","DragEvent","dataTransfer","files","submit","query","originalFormatDataCallback","formatData","graphql","useJson","hasFile","operations","variables","extractFiles","map","from","post","requestOptions","formData","getData","shouldConvertToFormData","httpAdapter","sendWith","buildBaseUrl","then","isValidationError","onFail","onSuccess","catch","strictMode","reset","quiet","formatErrorResponse","record","hasElements","scrollToFirst","includes","baseUrl","relativeUrl","queryStart","fullUrl","properties","join","e"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;AClFO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;;ACPmD;AAC5C;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;;;;ACjDA,IAAMA,oBAAc,GAAGC,MAAM,CAACC,SAAP,CAAiBF,cAAxC;AAEO,SAASG,MAAT,CAAiBC,GAAjB,EAA8BC,GAA9B,EAA4D;AAC/D,SAAOL,oBAAc,CAACM,IAAf,CAAoBF,GAApB,EAAyBC,GAAzB,CAAP;AACH;AAEM,SAASE,MAAT,CAAgBC,GAAhB,EAA6C;AAChD,SAAO,CAAC,CAACA,GAAF,IAAUA,GAAG,YAAYC,IAAhC;AACH;AAEM,SAASC,WAAT,CAAeN,GAAf,EAA8B;AACjC,SAAOO,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,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","file":"Form.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"formla\"] = factory();\n\telse\n\t\troot[\"formla\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export var ReactNativeFile = function ReactNativeFile(_ref) {\n  var uri = _ref.uri,\n    name = _ref.name,\n    type = _ref.type\n  this.uri = uri\n  this.name = name\n  this.type = type\n}\n","import { ReactNativeFile } from './ReactNativeFile'\nexport function extractFiles(value, path) {\n  if (path === void 0) {\n    path = ''\n  }\n\n  var clone\n  var files = new Map()\n\n  function addFile(paths, file) {\n    var storedPaths = files.get(file)\n    if (storedPaths) storedPaths.push.apply(storedPaths, paths)\n    else files.set(file, paths)\n  }\n\n  if (\n    (typeof File !== 'undefined' && value instanceof File) ||\n    (typeof Blob !== 'undefined' && value instanceof Blob) ||\n    value instanceof ReactNativeFile\n  ) {\n    clone = null\n    addFile([path], value)\n  } else {\n    var prefix = path ? path + '.' : ''\n    if (typeof FileList !== 'undefined' && value instanceof FileList)\n      clone = Array.prototype.map.call(value, function(file, i) {\n        addFile(['' + prefix + i], file)\n        return null\n      })\n    else if (Array.isArray(value))\n      clone = value.map(function(child, i) {\n        var result = extractFiles(child, '' + prefix + i)\n        result.files.forEach(addFile)\n        return result.clone\n      })\n    else if (value && value.constructor === Object) {\n      clone = {}\n\n      for (var i in value) {\n        var result = extractFiles(value[i], '' + prefix + i)\n        result.files.forEach(addFile)\n        clone[i] = result.clone\n      }\n    } else clone = value\n  }\n\n  return {\n    clone: clone,\n    files: files\n  }\n}\n","// @flow\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\nexport function hasOwn (obj: Object, key: string): boolean %checks {\n    return hasOwnProperty.call(obj, key)\n}\n\nexport function isFile(val: mixed): boolean %checks {\n    return !!val && (val instanceof Blob);\n}\n\nexport function clone(obj: any): any {\n    return JSON.parse(JSON.stringify(obj));\n}\n\nexport function emptyValue(original: mixed): Array<any> | {} | '' | null {\n    if (original instanceof Array) {\n        return [];\n    }\n    if (typeof original === 'object') {\n        return {};\n    }\n    if (typeof original === 'string') {\n        return '';\n    }\n    return null;\n}\n\nexport function isObj(value: mixed): boolean %checks {\n    return value !== null && typeof value === 'object';\n}\n\nexport function isArr(value: mixed): %checks {\n    return value instanceof Array;\n}\n\nexport function isNil(value: mixed): %checks {\n    return value == null;\n}\n\nexport function isFunc(value: mixed): %checks {\n    return value instanceof Function;\n}\n\nexport function isStr(value: mixed): %checks {\n    return typeof value === 'string';\n}\n\nexport function escapeRegExp(string: string) {\n    return string.replace(/[\\\\^$.*+?()[\\]{}|]/g, '\\\\$&');\n}\n\nexport function containsFile(obj: any): boolean {\n    if (isArr(obj)) {\n        for (let i = 0; i < obj.length; i++) {\n            if (obj[i] instanceof File) {\n                return true;\n            }\n            if (isObj(obj[i])) {\n                return containsFile(obj[i]);\n            }\n        }\n    } else {\n        for (let key in obj) {\n            if (obj[key] instanceof File) {\n                return true;\n            }\n            if (isObj(obj[key])) {\n                return containsFile(obj[key]);\n            }\n        }\n    }\n    return false;\n}\n\nexport function arrayToObject(array: any[]): { [string]: any } {\n    let target = {};\n\n    array.forEach((item, index) => {\n        target[index] = item;\n    });\n\n    return target;\n}\n","// @flow\nimport {escapeRegExp, isArr, isNil} from \"./utils\";\n\ntype ErrorValue = string | Array<string>;\nexport type ErrorValues = { [string]: ErrorValue };\n\nclass Errors {\n\n    errors: ErrorValues;\n    elements: Array<{ key: string | RegExp, el: Element }>;\n\n    /**\n     * Create a new Errors instance.\n     */\n    constructor() {\n        this.errors = {};\n        this.elements = [];\n    }\n\n    /**\n     * Determine if an errors exists for the given field.\n     *\n     * @param {string|RegExp} field\n     */\n    has(field: string | RegExp): boolean {\n        if (field instanceof RegExp) {\n            return Object.keys(this.errors).some(key => field.test(key));\n        }\n        return this.errors.hasOwnProperty(field);\n    }\n\n    /**\n     * Determine if we have any errors.\n     */\n    any(): boolean {\n        return Object.keys(this.errors).length > 0;\n    }\n\n    /**\n     * Retrieve the error message for a field.\n     *\n     * @param {string} field\n     */\n    getFirst(field: string): ?string {\n        let error = this.get(field);\n        if (error) {\n            if (isArr(error)) {\n                return error.length ? error[0] : null;\n            } else {\n                return error || null;\n            }\n        }\n    }\n\n    get(field: string) {\n        return this.errors[field];\n    }\n\n    /**\n     * Add a new error message if one doesn't already exist.\n     *\n     * @param {string} field\n     * @param error\n     * @param force\n     */\n    add(field: string, error: ErrorValue, force: boolean = false) {\n        if (!this.has(field) || force) {\n            this.errors[field] = error;\n        }\n    }\n\n    /**\n     * Record the new errors.\n     *\n     * @param {object} errors\n     * @param timeout\n     */\n    record(errors: ErrorValues, timeout: ?(false | number) = 3000) {\n        this.errors = errors;\n        if (timeout) {\n            window.setTimeout(() => {\n                this.clear();\n            }, timeout);\n        }\n    }\n\n    /**\n     * Clear one or all error fields.\n     *\n     * @param {string|null} field\n     */\n    clear(field: ?string) {\n        if (field) {\n            delete this.errors[field];\n\n            return;\n        }\n\n        this.errors = {};\n    }\n\n    addElement(key: string | RegExp | string[], el: Element) {\n        if (isArr(key)) {\n            key.forEach(field => this.addElement(field, el));\n        } else {\n            this.elements.push({ key, el });\n        }\n    }\n\n    removeElement(element: Element) {\n        this.elements = this.elements.filter(({ el }) => el !== element);\n    }\n\n    removeElementKey(field: string | RegExp | string[]) {\n        if (isArr(field)) {\n            field.forEach(key => this.removeElementKey(key));\n        } else {\n            this.elements = this.elements.filter(({ key }) => key !== field);\n        }\n    }\n\n    hasElements(): boolean {\n        return !!this.elements.length;\n    }\n\n    scrollToFirst(options: ?boolean | {\n        behavior?: ('auto' | 'instant' | 'smooth'),\n        block?: ('start' | 'center' | 'end' | 'nearest'),\n        inline?: ('start' | 'center' | 'end' | 'nearest'),\n    } = null) {\n        options = isNil(options) ? { behavior: 'smooth', inline: 'center' } : options;\n\n        const element = this.elements.find(({ key, el }) => {\n            let rx: RegExp;\n            if (key instanceof RegExp) {\n                rx = key;\n            } else {\n                let expression = escapeRegExp(key);\n                rx = new RegExp(expression.replace('*', '.*'));\n            }\n\n            if (Object.keys(this.errors).some(key => rx.test(key))) {\n                return true;\n            }\n        });\n\n        if (element) {\n            element.el.scrollIntoView(options);\n        }\n    }\n}\n\nexport default Errors;\n","// @flow\nimport type { Method } from './flow';\nimport type { Data } from \"./Form\";\n\ntype Options = {\n    method: Method,\n    url: string,\n}\n\nexport default function http(method: Method, url: string, data: FormData | Data, options: Options) {\n    let xhr = new XMLHttpRequest();\n\n    let response = new Promise<XMLHttpRequest>((resolve, reject) => {\n        xhr.onload = () => {\n            if (xhr.status >= 200 && xhr.status < 300) {\n                resolve(xhr);\n            } else {\n                reject(xhr);\n            }\n        };\n        xhr.onerror = () => reject(xhr);\n    });\n\n    xhr.open(method, url);\n    if (data instanceof FormData) {\n        xhr.setRequestHeader('Content-Type', 'multipart/form-data');\n        xhr.send(data);\n    } else {\n        xhr.setRequestHeader('Content-Type', 'application/json');\n        xhr.send(JSON.stringify(data));\n    }\n\n    return response;\n}","// @flow\nimport { extractFiles } from 'extract-files';\nimport {isFile, clone, hasOwn, emptyValue, isObj, isNil, isArr, containsFile, isStr, arrayToObject} from \"./utils\";\nimport Errors from \"./Errors\";\nimport http from \"./http\";\nimport type { Method } from './flow';\nimport type { ErrorValues } from \"./Errors\";\n\ntype PrimitiveFormValue = string | number | boolean | null | typeof undefined;\n\ntype ScalarFormValue = PrimitiveFormValue | Blob | File;\n\ntype FormValue = ScalarFormValue | Array<?FormValue> | { [string]: ?FormValue };\n\nexport type Data = { [string]: FormValue };\n\ntype Options = {\n    method: Method,\n    baseUrl: string,\n    url: string,\n    graphql: string,\n    sendWith: (method: Method, url: string, data: FormData | Data, options: Options) => Promise<any>,\n    useJson: boolean,\n    strictMode: boolean,\n    isValidationError: ({ status: number }) => boolean,\n    formatData: (Data) => Data,\n    formatErrorResponse: (any) => ErrorValues,\n    timeout: false | number,\n    autoRemoveError: boolean,\n    clear: boolean,\n    quiet: boolean,\n    clone: boolean,\n}\n\ntype PartialOptions = $Shape<Options>;\n\nfunction parseOptions(method: ?(Method | PartialOptions), url: ?(string | PartialOptions), options: ?PartialOptions): PartialOptions {\n    method = method ? (isObj(method) ? method : { method }) : {};\n    url = url ? (isObj(url) ? url : { url }) : {};\n    options = options || {};\n\n    return {\n        ...options,\n        ...url,\n        ...method,\n    }\n}\n\nfunction flattenToQueryParams(data: Data | Array<FormValue>, prefix: string = ''): { [string]: string | Blob | File } {\n    let params = {};\n\n    if (isArr(data)) {\n        data.forEach(item => {\n            let paramKey = `${prefix}[]`;\n\n            if (isObj(item) && !isFile(item)) {\n                params = {\n                    ...params,\n                    ...flattenToQueryParams(item, paramKey)\n                };\n                return;\n            }\n\n            params[paramKey] = isFile(item) ? item : formValueToString(item);\n        })\n    } else {\n        Object.keys(data).forEach(key => {\n            let item = data[key];\n\n            let paramKey = prefix ? `${prefix}[${key}]` : '' + key;\n\n            if (isObj(item) && !isFile(item)) {\n                params = {\n                    ...params,\n                    ...flattenToQueryParams(item, paramKey)\n                };\n                return;\n            }\n\n            params[paramKey] = isFile(item) ? item : formValueToString(item);\n        });\n    }\n\n    return params;\n}\n\nfunction formValueToString(value: PrimitiveFormValue): string {\n    if (typeof value === 'boolean') {\n        return ''+(+value);\n    }\n    if (typeof value === 'number') {\n        return value.toString();\n    }\n    return value || '';\n}\n\nfunction bubbleError(error: Error | Object): Promise<Object> {\n    if (error instanceof Error) {\n        throw error;\n    }\n    return Promise.reject(error);\n}\n\nfunction isValidErrorObject(errors) {\n    return !errors ||\n        typeof errors !== 'object' ||\n        !Object.keys(errors).length ||\n        Object.values(errors).some(error => {\n            if (isArr(error)) {\n                return error.some(message => !isStr(message));\n            }\n            return !isStr(error);\n        });\n}\n\nclass Form {\n\n    errors: Errors;\n\n    data: Data;\n    originalData: Data;\n    originalConstantData: Data;\n    options: Options;\n\n    static defaultOptions: Options = {\n        // The default method type used by the submit method\n        method: 'post',\n\n        // If set any relative urls will be appended to the baseUrl\n        baseUrl: '',\n\n        // The url to submit the form\n        url: '',\n\n        // The endpoint to use for all graphql queries\n        graphql: 'graphql',\n\n        // A callback to implement custom HTTP logic.\n        // It is recommended to use this option so the form can utilise your HTTP library.\n        // The callback should return a promise that the form can use to handle the response.\n        sendWith: http,\n\n        // Set to true if you want the form to submit the data as a json object.\n        // This will pass the data as a JavaScript object to the sendWith callback so it is up to you to stringify it for your HTTP library.\n        // If the data contains a File or Blob object the data will be a FormData object regardless of this option (unless strictMode is true).\n        useJson: false,\n\n        // If set to true the form will throw an Error if the data has a File or Blob object and the useJson option is true.\n        strictMode: false,\n\n        // The status code for which the form should handle validation errors.\n        isValidationError: ({ status }) => status === 422,\n\n        // A callback to format the data before sending it.\n        formatData: (data) => data,\n\n        // A callback that should turn the error response into an object of field names and their validation errors.\n        formatErrorResponse: (response) => {\n            let data = response.data || response.response;\n            if (typeof data === 'string') {\n                try {\n                    data = JSON.parse(data);\n                } catch (e) {\n                    throw new Error('Unable to find errors in the response');\n                }\n            }\n            let errors: ErrorValues = data.errors;\n            if (isValidErrorObject(errors)) {\n                throw new Error('Unable to find errors in the response');\n            }\n            return errors;\n        },\n\n        // The number of milliseconds to wait before clearing the error messages.\n        // When timeout is false the error messages will stay indefinitely.\n        timeout: false,\n\n        // When set to true the errors for a field will be cleared when that field's value is updated.\n        autoRemoveError: true,\n\n        // When set to true, the data will be reverted to it's original values after a successful request.\n        clear: true,\n\n        // When set to true, no errors will be recorded.\n        quiet: false,\n\n        // If clone is set to false any nested objects and arrays will be stored in the form by reference.\n        clone: true,\n    };\n\n    static setOptions = function (options: Options) {\n        Form.defaultOptions = {\n            ...Form.defaultOptions,\n            ...options\n        };\n    };\n\n    constructor(data: Data, options: ?Options) {\n        this.setOptions(options);\n\n        this.originalData = {};\n        this.originalConstantData = {};\n        this.data = {};\n\n        this.append(data);\n\n        this.errors = new Errors();\n    }\n\n    setOptions(options: ?Options) {\n        this.options = this.options || Form.defaultOptions;\n        if (options) {\n            this.options = {\n                ...this.options,\n                ...options,\n            }\n        }\n    }\n\n    append(key: string | Data, value: FormValue, constant: ?boolean = false): Form {\n        if (typeof key === 'object') {\n            Object.keys(key).forEach(field => {\n                this.append(field, key[field], constant);\n            });\n            return this;\n        }\n\n        value = this.parseData(value);\n        if (constant) {\n            this.originalConstantData[key] = value;\n        } else {\n            this.originalData[key] = value;\n        }\n        if (!constant) {\n            this.data[key] = value;\n            this.defineProperty(key);\n        } else {\n            Object.defineProperty(\n                this,\n                key,\n                {\n                    get: () => undefined,\n                    set: () => {\n                        throw new Error(`The \"${key}\" value has been set as constant and cannot be modified`);\n                    }\n                }\n            );\n        }\n\n        return this;\n    }\n\n    defineProperty(key: string) {\n        Object.defineProperty(\n            this,\n            key,\n            {\n                get: () => this.data[key],\n                set: (newValue: FormValue) => {\n                    this.setData(key, newValue);\n                }\n            }\n        );\n    }\n\n    constantData(key: string | Data, value: FormValue): Form {\n        return this.append(key, value, true);\n    }\n\n    getData(): Data {\n        return {\n            ...this.data,\n            ...this.originalConstantData,\n        }\n    }\n\n    setData(key: string, value: FormValue) {\n        this.data[key] = value;\n        if (this.options.autoRemoveError) {\n            this.errors.clear(key);\n        }\n    }\n\n    reset(): Form {\n        for (let field in this.data) {\n            this.data[field] = this.originalData[field];\n        }\n\n        this.errors.clear();\n\n        return this;\n    }\n\n    clear(field: string): Form {\n        if (hasOwn(this, field)) {\n            this.data[field] = emptyValue(this.data[field]);\n        }\n        return this;\n    }\n\n    parseData(data: FormValue): FormValue {\n        return this.options.clone && !isFile(data) ? clone(data) : data;\n    }\n\n    addFileFromEvent(event: Event | DragEvent, key: ?string): Form {\n        let node = event.target;\n        if (!(node instanceof HTMLInputElement)) {\n            throw new Error('Incompatible event target, must be of type HTMLInputElement');\n        }\n        if (!key) {\n            key = node.name;\n        }\n        if (key in this && (node.value !== '')) {\n            if (event instanceof DragEvent) {\n                this.setData(key, event.dataTransfer && event.dataTransfer.files.length && event.dataTransfer.files[0]);\n            } else {\n                this.setData(key, node.files && node.files.length && node.files[0]);\n            }\n            node.value = '';\n        }\n        return this;\n    }\n\n    post(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('post', url, options);\n    }\n\n    put(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('put', url, options);\n    }\n\n    patch(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('patch', url, options);\n    }\n\n    delete(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('delete', url, options);\n    }\n\n    get(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('get', url, options);\n    }\n\n    graphql(query: string, options: ?Options): Promise<any> {\n        options = options || {};\n        const originalFormatDataCallback = options.formatData;\n\n        options.url = options.graphql || this.options.graphql;\n\n        options.useJson = !this.hasFile();\n\n        options.formatData = (data) => {\n            data = originalFormatDataCallback ? originalFormatDataCallback(data) : data;\n            const operations = {\n                query,\n                variables: data,\n            };\n\n            if (!this.hasFile()) {\n                return operations;\n            }\n            const { clone, files } = extractFiles(data);\n            operations.variables = clone;\n            return {\n                operations: JSON.stringify(operations),\n                map: JSON.stringify(arrayToObject(Array.from(files.values()))),\n                ...arrayToObject(Array.from(files.keys())),\n            };\n        };\n        return this.post(options);\n    }\n\n    submit(method: Method | Options, url: ?string | Options, options: ?Options): Promise<any> {\n        options = parseOptions(method, url, options);\n        const requestOptions = {\n            ...this.options,\n            ...options,\n        };\n\n        let formData, data = requestOptions.formatData(this.getData());\n        if (this.shouldConvertToFormData(requestOptions)) {\n            formData = new FormData();\n\n            let params = flattenToQueryParams(data);\n\n            Object.keys(params).forEach(key => {\n                formData.append(key, params[key]);\n            });\n\n            data = formData;\n        }\n\n        let httpAdapter = requestOptions.sendWith;\n\n        return httpAdapter(requestOptions.method, this.buildBaseUrl(requestOptions), data, requestOptions).then(response => {\n            if (requestOptions.isValidationError(response)) {\n                this.onFail(response, requestOptions);\n            } else {\n                this.onSuccess(requestOptions);\n            }\n            return response;\n        }).catch(error => {\n            if (requestOptions.isValidationError(error)) {\n                this.onFail(error, requestOptions);\n            }\n            return bubbleError(error);\n        });\n    }\n\n    shouldConvertToFormData(options: ?Options) {\n        options = options || this.options;\n        if (!options.useJson) {\n            return true;\n        }\n        if (this.hasFile() && options.strictMode) {\n            throw new Error('Cannot convert a file to JSON');\n        }\n        return this.hasFile();\n    }\n\n    hasFile(): boolean {\n        return containsFile(this.getData());\n    }\n\n    onSuccess(options: ?Options) {\n        options = options || this.options;\n        if (options.clear) {\n            this.reset();\n        }\n    }\n\n    onFail(error: XMLHttpRequest, options: ?Options) {\n        options = options || this.options;\n        if (!options.quiet) {\n            let errors = options.formatErrorResponse(error);\n            this.errors.record(errors, options.timeout);\n            if (this.errors.hasElements()) {\n                this.errors.scrollToFirst();\n            }\n        }\n    }\n\n    buildBaseUrl(options: ?Options) {\n        options = options || this.options;\n        if (options.url.includes('://')) {\n            return options.url;\n        }\n        let baseUrl = options.baseUrl;\n        let relativeUrl = options.url;\n\n        baseUrl = baseUrl.replace(/\\/+$/g, '');\n        relativeUrl = relativeUrl.replace(/^\\/+/g, '');\n\n        return `${baseUrl}/${relativeUrl}`;\n    }\n\n    makeUrl(options: ?Options): string {\n        let url = this.buildBaseUrl(options);\n        let queryStart = url.includes('?') ? '&' : '?';\n        let fullUrl = url + queryStart;\n        let properties = [];\n        let data = this.getData();\n\n        let params = flattenToQueryParams(data);\n\n        Object.keys(params).forEach(key => {\n            let item = params[key];\n\n            if (isFile(item)) {\n                throw new Error('Cannot convert file to a string');\n            }\n\n            properties.push(key + (isNil(item) ? '' : `=${item}`));\n        });\n        return fullUrl + properties.join('&');\n    }\n\n    addElement(key: string, el: HTMLElement) {\n        this.errors.addElement(key, el);\n    }\n}\n\n\nexport default Form;\n"],"sourceRoot":""}