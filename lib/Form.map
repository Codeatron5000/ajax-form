{"version":3,"sources":["webpack://formla/webpack/bootstrap","webpack://formla/./src/utils.js","webpack://formla/./src/Errors.js","webpack://formla/./src/http.js","webpack://formla/./src/Form.js"],"names":["hasOwnProperty","Object","prototype","hasOwn","obj","key","call","isFile","val","Blob","clone","JSON","parse","stringify","emptyValue","original","Array","isObj","value","isArr","isNil","isFunc","Function","isStr","escapeRegExp","string","replace","containsFile","i","length","File","Errors","errors","elements","field","RegExp","keys","some","test","error","get","force","has","timeout","window","setTimeout","clear","el","forEach","addElement","push","options","behavior","inline","element","find","rx","expression","scrollIntoView","http","method","url","data","xhr","XMLHttpRequest","response","Promise","resolve","reject","onload","status","onerror","open","FormData","setRequestHeader","send","parseOptions","flattenToQueryParams","prefix","params","item","paramKey","formValueToString","toString","bubbleError","Error","isValidErrorObject","values","message","Form","setOptions","originalData","originalConstantData","append","defaultOptions","constant","parseData","defineProperty","undefined","set","newValue","setData","autoRemoveError","event","node","target","HTMLInputElement","name","DragEvent","dataTransfer","files","submit","requestOptions","formData","getData","shouldConvertToFormData","httpAdapter","sendWith","buildBaseUrl","then","isValidationError","onFail","onSuccess","catch","useJson","hasFile","strictMode","reset","quiet","formatErrorResponse","record","hasElements","scrollToFirst","includes","baseUrl","relativeUrl","queryStart","fullUrl","properties","join","e"],"mappings":"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","file":"Form.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","// @flow\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\nexport function hasOwn (obj: Object, key: string): boolean %checks {\n    return hasOwnProperty.call(obj, key)\n}\n\nexport function isFile(val: mixed): boolean %checks {\n    return !!val && (val instanceof Blob);\n}\n\nexport function clone(obj: any): any {\n    return JSON.parse(JSON.stringify(obj));\n}\n\nexport function emptyValue(original: mixed): Array<any> | {} | '' | null {\n    if (original instanceof Array) {\n        return [];\n    }\n    if (typeof original === 'object') {\n        return {};\n    }\n    if (typeof original === 'string') {\n        return '';\n    }\n    return null;\n}\n\nexport function isObj(value: mixed): boolean %checks {\n    return value !== null && typeof value === 'object';\n}\n\nexport function isArr(value: mixed): %checks {\n    return value instanceof Array;\n}\n\nexport function isNil(value: mixed): %checks {\n    return value == null;\n}\n\nexport function isFunc(value: mixed): %checks {\n    return value instanceof Function;\n}\n\nexport function isStr(value: mixed): %checks {\n    return typeof value === 'string';\n}\n\nexport function escapeRegExp(string: string) {\n    return string.replace(/[\\\\^$.*+?()[\\]{}|]/g, '\\\\$&');\n}\n\nexport function containsFile(obj: any): boolean {\n    if (isArr(obj)) {\n        for (let i = 0; i < obj.length; i++) {\n            if (obj[i] instanceof File) {\n                return true;\n            }\n            if (isObj(obj[i])) {\n                return containsFile(obj[i]);\n            }\n        }\n    } else {\n        for (let key in obj) {\n            if (obj[key] instanceof File) {\n                return true;\n            }\n            if (isObj(obj[key])) {\n                return containsFile(obj[key]);\n            }\n        }\n    }\n    return false;\n}\n","// @flow\nimport {escapeRegExp, isArr, isNil} from \"./utils\";\n\ntype ErrorValue = string | Array<string>;\nexport type ErrorValues = { [string]: ErrorValue };\n\nclass Errors {\n\n    errors: ErrorValues;\n    elements: Array<{ key: string | RegExp, el: Element }>;\n\n    /**\n     * Create a new Errors instance.\n     */\n    constructor() {\n        this.errors = {};\n        this.elements = [];\n    }\n\n    /**\n     * Determine if an errors exists for the given field.\n     *\n     * @param {string|RegExp} field\n     */\n    has(field: string | RegExp): boolean {\n        if (field instanceof RegExp) {\n            return Object.keys(this.errors).some(key => field.test(key));\n        }\n        return this.errors.hasOwnProperty(field);\n    }\n\n    /**\n     * Determine if we have any errors.\n     */\n    any(): boolean {\n        return Object.keys(this.errors).length > 0;\n    }\n\n    /**\n     * Retrieve the error message for a field.\n     *\n     * @param {string} field\n     */\n    getFirst(field: string): ?string {\n        let error = this.get(field);\n        if (error) {\n            if (isArr(error)) {\n                return error.length ? error[0] : null;\n            } else {\n                return error || null;\n            }\n        }\n    }\n\n    get(field: string) {\n        return this.errors[field];\n    }\n\n    /**\n     * Add a new error message if one doesn't already exist.\n     *\n     * @param {string} field\n     * @param error\n     * @param force\n     */\n    add(field: string, error: ErrorValue, force: boolean = false) {\n        if (!this.has(field) || force) {\n            this.errors[field] = error;\n        }\n    }\n\n    /**\n     * Record the new errors.\n     *\n     * @param {object} errors\n     * @param timeout\n     */\n    record(errors: ErrorValues, timeout: ?(false | number) = 3000) {\n        this.errors = errors;\n        if (timeout) {\n            window.setTimeout(() => {\n                this.clear();\n            }, timeout);\n        }\n    }\n\n    /**\n     * Clear one or all error fields.\n     *\n     * @param {string|null} field\n     */\n    clear(field: ?string) {\n        if (field) {\n            delete this.errors[field];\n\n            return;\n        }\n\n        this.errors = {};\n    }\n\n    addElement(key: string | RegExp | string[], el: Element) {\n        if (isArr(key)) {\n            key.forEach(field => this.addElement(field, el));\n        } else {\n            this.elements.push({ key, el });\n        }\n    }\n\n    hasElements(): boolean {\n        return !!this.elements.length;\n    }\n\n    scrollToFirst(options: ?boolean | {\n        behavior?: ('auto' | 'instant' | 'smooth'),\n        block?: ('start' | 'center' | 'end' | 'nearest'),\n        inline?: ('start' | 'center' | 'end' | 'nearest'),\n    } = null) {\n        options = isNil(options) ? { behavior: 'smooth', inline: 'center' } : options;\n\n        const element = this.elements.find(({ key, el }) => {\n            let rx: RegExp;\n            if (key instanceof RegExp) {\n                rx = key;\n            } else {\n                let expression = escapeRegExp(key);\n                rx = new RegExp(expression.replace('*', '.*'));\n            }\n\n            if (Object.keys(this.errors).some(key => rx.test(key))) {\n                return true;\n            }\n        });\n\n        if (element) {\n            element.el.scrollIntoView(options);\n        }\n    }\n}\n\nexport default Errors;\n","// @flow\nimport type { Method } from './flow';\nimport type { Data } from \"./Form\";\n\ntype Options = {\n    method: Method,\n    url: string,\n}\n\nexport default function http(method: Method, url: string, data: FormData | Data) {\n    let xhr = new XMLHttpRequest();\n\n    let response = new Promise<XMLHttpRequest>((resolve, reject) => {\n        xhr.onload = () => {\n            if (xhr.status >= 200 && xhr.status < 300) {\n                resolve(xhr);\n            } else {\n                reject(xhr);\n            }\n        };\n        xhr.onerror = () => reject(xhr);\n    });\n\n    xhr.open(method, url);\n    if (data instanceof FormData) {\n        xhr.setRequestHeader('Content-Type', 'multipart/form-data');\n        xhr.send(data);\n    } else {\n        xhr.setRequestHeader('Content-Type', 'application/json');\n        xhr.send(JSON.stringify(data));\n    }\n\n    return response;\n}","// @flow\nimport {isFile, clone, hasOwn, emptyValue, isObj, isNil, isArr, containsFile, isStr} from \"./utils\";\nimport Errors from \"./Errors\";\nimport http from \"./http\";\nimport type { Method } from './flow';\nimport type { ErrorValues } from \"./Errors\";\n\ntype ErrorResponse = {\n    status: number,\n    response: {\n        errors: {\n            [string]: Array<string> | string\n        }\n    }\n}\n\ntype PrimitiveFormValue = string | number | boolean | null | typeof undefined;\n\ntype ScalarFormValue = PrimitiveFormValue | Blob | File;\n\ntype FormValue = ScalarFormValue | Array<?FormValue> | { [string]: ?FormValue };\n\nexport type Data = { [string]: FormValue };\n\ntype Options = {\n    method: Method,\n    baseUrl: string,\n    url: string,\n    sendWith: (method: Method, url: string, data: FormData | Data) => Promise<any>,\n    useJson: boolean,\n    strictMode: boolean,\n    isValidationError: ({ status: number }) => boolean,\n    formatErrorResponse: (any) => ErrorValues,\n    timeout: false | number,\n    autoRemoveError: boolean,\n    clear: boolean,\n    quiet: boolean,\n    clone: boolean,\n}\n\ntype PartialOptions = $Shape<Options>;\n\nfunction parseOptions(method: ?(Method | PartialOptions), url: ?(string | PartialOptions), options: ?PartialOptions): PartialOptions {\n    method = method ? (isObj(method) ? method : { method }) : {};\n    url = url ? (isObj(url) ? url : { url }) : {};\n    options = options || {};\n\n    return {\n        ...options,\n        ...url,\n        ...method,\n    }\n}\n\nfunction flattenToQueryParams(data: Data | Array<FormValue>, prefix: string = ''): { [string]: string | Blob | File } {\n    let params = {};\n\n    if (isArr(data)) {\n        data.forEach(item => {\n            let paramKey = `${prefix}[]`;\n\n            if (isObj(item) && !isFile(item)) {\n                params = {\n                    ...params,\n                    ...flattenToQueryParams(item, paramKey)\n                };\n                return;\n            }\n\n            params[paramKey] = isFile(item) ? item : formValueToString(item);\n        })\n    } else {\n        Object.keys(data).forEach(key => {\n            let item = data[key];\n\n            let paramKey = prefix ? `${prefix}[${key}]` : '' + key;\n\n            if (isObj(item) && !isFile(item)) {\n                params = {\n                    ...params,\n                    ...flattenToQueryParams(item, paramKey)\n                };\n                return;\n            }\n\n            params[paramKey] = isFile(item) ? item : formValueToString(item);\n        });\n    }\n\n    return params;\n}\n\nfunction formValueToString(value: PrimitiveFormValue): string {\n    if (typeof value === 'boolean') {\n        return ''+(+value);\n    }\n    if (typeof value === 'number') {\n        return value.toString();\n    }\n    return value || '';\n}\n\nfunction bubbleError(error: Error | Object): Promise<Object> {\n    if (error instanceof Error) {\n        throw error;\n    }\n    return Promise.reject(error);\n}\n\nfunction isValidErrorObject(errors) {\n    return !errors ||\n        typeof errors !== 'object' ||\n        !Object.keys(errors).length ||\n        Object.values(errors).some(error => {\n            if (isArr(error)) {\n                return error.some(message => !isStr(message));\n            }\n            return !isStr(error);\n        });\n}\n\nclass Form {\n\n    errors: Errors;\n\n    data: Data;\n    originalData: Data;\n    originalConstantData: Data;\n    options: Options;\n\n    static defaultOptions: Options = {\n        // The default method type used by the submit method\n        method: 'post',\n\n        // If set any relative urls will be appended to the baseUrl\n        baseUrl: '',\n\n        // The url to submit the form\n        url: '',\n\n        // A callback to implement custom HTTP logic.\n        // It is recommended to use this option so the form can utilise your HTTP library.\n        // The callback should return a promise that the form can use to handle the response.\n        sendWith: http,\n\n        // Set to true if you want the form to submit the data as a json object.\n        // This will pass the data as a JavaScript object to the sendWith callback so it is up to you to stringify it for your HTTP library.\n        // If the data contains a File or Blob object the data will be a FormData object regardless of this option (unless strictMode is true).\n        useJson: false,\n\n        // If set to true the form will throw an Error if the data has a File or Blob object and the useJson option is true.\n        strictMode: false,\n\n        // The status code for which the form should handle validation errors.\n        isValidationError: ({ status }) => status === 422,\n\n        // A callback that should turn the error response into an object of field names and their validation errors.\n        formatErrorResponse: (response) => {\n            let data = response.data || response.response;\n            if (typeof data === 'string') {\n                try {\n                    data = JSON.parse(data);\n                } catch (e) {\n                    throw new Error('Unable to find errors in the response');\n                }\n            }\n            let errors: ErrorValues = data.errors;\n            if (isValidErrorObject(errors)) {\n                throw new Error('Unable to find errors in the response');\n            }\n            return errors;\n        },\n\n        // The number of milliseconds to wait before clearing the error messages.\n        // When timeout is false the error messages will stay indefinitely.\n        timeout: false,\n\n        // When set to true the errors for a field will be cleared when that field's value is updated.\n        autoRemoveError: true,\n\n        // When set to true, the data will be reverted to it's original values after a successful request.\n        clear: true,\n\n        // When set to true, no errors will be recorded.\n        quiet: false,\n\n        // If clone is set to false any nested objects and arrays will be stored in the form by reference.\n        clone: true,\n    };\n\n    static setOptions = function (options: Options) {\n        Form.defaultOptions = {\n            ...Form.defaultOptions,\n            ...options\n        };\n    };\n\n    constructor(data: Data, options: ?Options) {\n        this.setOptions(options);\n\n        this.originalData = {};\n        this.originalConstantData = {};\n        this.data = {};\n\n        this.append(data);\n\n        this.errors = new Errors();\n    }\n\n    setOptions(options: ?Options) {\n        this.options = this.options || Form.defaultOptions;\n        if (options) {\n            this.options = {\n                ...this.options,\n                ...options,\n            }\n        }\n    }\n\n    append(key: string | Data, value: FormValue, constant: ?boolean = false): Form {\n        if (typeof key === 'object') {\n            Object.keys(key).forEach(field => {\n                this.append(field, key[field], constant);\n            });\n            return this;\n        }\n\n        value = this.parseData(value);\n        if (constant) {\n            this.originalConstantData[key] = value;\n        } else {\n            this.originalData[key] = value;\n        }\n        if (!constant) {\n            this.data[key] = value;\n            this.defineProperty(key);\n        } else {\n            Object.defineProperty(\n                this,\n                key,\n                {\n                    get: () => undefined,\n                    set: () => {\n                        throw new Error(`The \"${key}\" value has been set as constant and cannot be modified`);\n                    }\n                }\n            );\n        }\n\n        return this;\n    }\n\n    defineProperty(key: string) {\n        Object.defineProperty(\n            this,\n            key,\n            {\n                get: () => this.data[key],\n                set: (newValue: FormValue) => {\n                    this.setData(key, newValue);\n                }\n            }\n        );\n    }\n\n    constantData(key: string | Data, value: FormValue): Form {\n        return this.append(key, value, true);\n    }\n\n    getData(): Data {\n        return {\n            ...this.data,\n            ...this.originalConstantData,\n        }\n    }\n\n    setData(key: string, value: FormValue) {\n        this.data[key] = value;\n        if (this.options.autoRemoveError) {\n            this.errors.clear(key);\n        }\n    }\n\n    reset(): Form {\n        for (let field in this.data) {\n            this.data[field] = this.originalData[field];\n        }\n\n        this.errors.clear();\n\n        return this;\n    }\n\n    clear(field: string): Form {\n        if (hasOwn(this, field)) {\n            this.data[field] = emptyValue(this.data[field]);\n        }\n        return this;\n    }\n\n    parseData(data: FormValue): FormValue {\n        return this.options.clone && !isFile(data) ? clone(data) : data;\n    }\n\n    addFileFromEvent(event: Event | DragEvent, key: ?string): Form {\n        let node = event.target;\n        if (!(node instanceof HTMLInputElement)) {\n            throw new Error('Incompatible event target, must be of type HTMLInputElement');\n        }\n        if (!key) {\n            key = node.name;\n        }\n        if (key in this && (node.value !== '')) {\n            if (event instanceof DragEvent) {\n                this.setData(key, event.dataTransfer && event.dataTransfer.files.length && event.dataTransfer.files[0]);\n            } else {\n                this.setData(key, node.files && node.files.length && node.files[0]);\n            }\n            node.value = '';\n        }\n        return this;\n    }\n\n    post(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('post', url, options);\n    }\n\n    put(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('put', url, options);\n    }\n\n    patch(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('patch', url, options);\n    }\n\n    delete(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('delete', url, options);\n    }\n\n    get(url: string | Options, options: ?Options): Promise<any> {\n        return this.submit('get', url, options);\n    }\n\n    submit(method: Method | Options, url: ?string | Options, options: ?Options): Promise<any> {\n        options = parseOptions(method, url, options);\n        const requestOptions = {\n            ...this.options,\n            ...options,\n        };\n\n        let formData, data = this.getData();\n        if (this.shouldConvertToFormData(requestOptions)) {\n            formData = new FormData();\n\n            let params = flattenToQueryParams(data);\n\n            Object.keys(params).forEach(key => {\n                formData.append(key, params[key]);\n            });\n\n            data = formData;\n        }\n\n        let httpAdapter = requestOptions.sendWith;\n\n        return httpAdapter(requestOptions.method, this.buildBaseUrl(requestOptions), data).then(response => {\n            if (requestOptions.isValidationError(response)) {\n                this.onFail(response, requestOptions);\n            } else {\n                this.onSuccess(requestOptions);\n            }\n            return response;\n        }).catch(error => {\n            if (requestOptions.isValidationError(error)) {\n                this.onFail(error, requestOptions);\n            }\n            return bubbleError(error);\n        });\n    }\n\n    shouldConvertToFormData(options: ?Options) {\n        options = options || this.options;\n        if (!options.useJson) {\n            return true;\n        }\n        if (this.hasFile() && options.strictMode) {\n            throw new Error('Cannot convert a file to JSON');\n        }\n        return this.hasFile();\n    }\n\n    hasFile(): boolean {\n        return containsFile(this.getData());\n    }\n\n    onSuccess(options: ?Options) {\n        options = options || this.options;\n        if (options.clear) {\n            this.reset();\n        }\n    }\n\n    onFail(error: XMLHttpRequest, options: ?Options) {\n        options = options || this.options;\n        if (!options.quiet) {\n            let errors = options.formatErrorResponse(error);\n            this.errors.record(errors, options.timeout);\n            if (this.errors.hasElements()) {\n                this.errors.scrollToFirst();\n            }\n        }\n    }\n\n    buildBaseUrl(options: ?Options) {\n        options = options || this.options;\n        if (options.url.includes('://')) {\n            return options.url;\n        }\n        let baseUrl = options.baseUrl;\n        let relativeUrl = options.url;\n\n        baseUrl = baseUrl.replace(/\\/+$/g, '');\n        relativeUrl = relativeUrl.replace(/^\\/+/g, '');\n\n        return `${baseUrl}/${relativeUrl}`;\n    }\n\n    makeUrl(options: ?Options): string {\n        let url = this.buildBaseUrl(options);\n        let queryStart = url.includes('?') ? '&' : '?';\n        let fullUrl = url + queryStart;\n        let properties = [];\n        let data = this.getData();\n\n        let params = flattenToQueryParams(data);\n\n        Object.keys(params).forEach(key => {\n            let item = params[key];\n\n            if (isFile(item)) {\n                throw new Error('Cannot convert file to a string');\n            }\n\n            properties.push(key + (isNil(item) ? '' : `=${item}`));\n        });\n        return fullUrl + properties.join('&');\n    }\n\n    addElement(key: string, el: HTMLElement) {\n        this.errors.addElement(key, el);\n    }\n}\n\n\nexport default Form;\n"],"sourceRoot":""}